!function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=a(1),l=a(2),u=n(l),o=a(3),s=n(o),c=document.createElement("div");c.classList.add("forager-holder"),document.body.appendChild(c),(0,r.render)(s["default"].createElement(u["default"],null),c)},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),l=n(r),u=a(4),o=n(u),s=a(8),c=n(s),i=a(13),d=n(i);t["default"]=l["default"].createClass({displayName:"Forager",getInitialState:function(){return{pages:[void 0,{name:"example 1",selector:"body",spec:{type:"single",value:0},children:[],rules:[{name:"test",attr:"text",type:"string"}]},{name:"example 2",selector:"body",spec:{type:"single",value:0},children:[],rules:[]}],pageIndex:0}},loadPage:function(e){this.setState({pageIndex:e})},addPage:function(e){var t=this.state.pages;t.push(e),this.setState({pages:t,pageIndex:t.length-1})},removePage:function(){var e=this.state,t=e.pages,a=e.pageIndex;0!==a&&(t.splice(a,1),this.setState({pages:t,pageIndex:0}))},renamePage:function(e){var t=this.state,a=t.pages,n=t.pageIndex;a[n].name=e,this.setState({pages:a})},render:function(){var e=this.state,t=e.pages,a=e.pageIndex,n=t[a];return l["default"].createElement("div",{className:"forager no-select",ref:"app"},l["default"].createElement(o["default"],{pages:t,index:a,loadPage:this.loadPage,addPage:this.addPage,removePage:this.removePage,renamePage:this.renamePage}),l["default"].createElement("div",{className:"workspace"},l["default"].createElement(c["default"],{page:n}),l["default"].createElement(d["default"],{page:n})))},_makeNoSelect:function(){[].slice.call(this.refs.app.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})},componentDidMount:function(){this._makeNoSelect()},componentDidUpdate:function(){this._makeNoSelect()}})},function(e,t){e.exports=React},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),l=n(r),u=a(5),o=a(6),s=a(7);t["default"]=l["default"].createClass({displayName:"Controls",render:function(){var e=this.props,t=e.pages,a=e.index,n=e.loadPage,r=e.addPage,u=e.removePage,o=e.renamePage;return l["default"].createElement("div",{className:"controls"},l["default"].createElement(c,{pages:t,index:a,loadPage:n,addPage:r,removePage:u,renamePage:o}),l["default"].createElement(i,null))}});var c=l["default"].createClass({displayName:"PageControls",getName:function(){var e=window.prompt('Page Name:\nCannot contain the following characters: < > : "  / | ? * ');return(0,o.legalName)(e)?e:void console.error("bad name",e)},addHandler:function(e){e.preventDefault();var t=this.getName();if(void 0!==t){var a=(0,s.createPage)(t);this.props.addPage(a)}},renameHandler:function(e){e.preventDefault();var t=this.props.pages[this.props.index],a=this.getName();void 0!==a&&a!==t.name&&this.props.renamePage(a)},deleteHandler:function(e){e.preventDefault(),this.props.removePage()},uploadHandler:function(e){e.preventDefault(),console.error("not yet implemented")},previewHandler:function(e){e.preventDefault(),console.error("not yet implemented")},loadPage:function(e){this.props.loadPage(e.target.value)},render:function(){var e=this.props,t=e.pages,a=e.index,n=t.map(function(e,t){var a=void 0===e?"":e.name;return l["default"].createElement("option",{key:t,value:t},a)});return l["default"].createElement("div",{className:"page-controls"},"Page: ",l["default"].createElement("select",{value:a,onChange:this.loadPage},n),l["default"].createElement(u.PosButton,{click:this.addHandler,text:"Add"}),l["default"].createElement(u.PosButton,{click:this.renameHandler,text:"Rename"}),l["default"].createElement(u.NegButton,{click:this.deleteHandler,text:"Delete"}),l["default"].createElement(u.PosButton,{click:this.uploadHandler,text:"Upload"}),l["default"].createElement(u.PosButton,{click:this.previewHandler,text:"Preview"}))}}),i=l["default"].createClass({displayName:"GeneralControls",handle:function(e){e.preventDefault(),console.error("not yet implemented")},render:function(){return l["default"].createElement("div",{className:"app-controls"},l["default"].createElement(u.NeutralButton,{click:this.handle,text:"Sync"}),l["default"].createElement(u.NeutralButton,{click:this.handle,text:"Options"}),l["default"].createElement(u.NeutralButton,{click:this.handle,text:String.fromCharCode(215)}))}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PosButton=React.createClass({displayName:"PosButton",render:function(){var e=this.props,t=e.text,a=e.click;return React.createElement("button",{className:"pos",onClick:a},t)}}),t.NegButton=React.createClass({displayName:"NegButton",render:function(){var e=this.props,t=e.text,a=e.click;return React.createElement("button",{className:"neg",onClick:a},t)}}),t.NeutralButton=React.createClass({displayName:"NeutralButton",render:function(){var e=this.props,t=e.text,a=e.click;return React.createElement("button",{className:"neutral",onClick:a},t)}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.legalName=function(e){if(null===e||""===e)return!1;var t=/[<>:"\/\\\|\?\*]/;return null===e.match(t)},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var a,n,r=t-3,l=r/2;r%2===0?(a=l,n=l):(a=Math.ceil(l),n=Math.floor(l));var u=e.slice(0,a),o=0===n?"":e.slice(-n);return u+"..."+o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createPage=function(e){return{name:e,selector:"body",spec:{type:"single",value:0},children:[],rules:[]}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),l=n(r),u=a(9),o=n(u),s=a(10),c=(n(s),a(11)),i=(n(c),a(12));n(i);t["default"]=l["default"].createClass({displayName:"Frames",render:function(){var e=this.props,t=e.form,a=e.page,n=null;switch(t){case"selector":default:n=l["default"].createElement(o["default"],{page:a})}return l["default"].createElement("div",{className:"frames"},n)}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=a(3),u=n(l),o=a(5);t["default"]=u["default"].createClass({displayName:"ViewFrame",addChild:function(e){console.error("not yet implemented")},addRule:function(e){console.error("not yet implemented")},remove:function(e){console.error("not yet implemented")},render:function(){var e=this.props.page;if(void 0===e)return null;var t=e.selector,a=(e.children,e.rules),n=e.spec,r=n.type,l=n.value,c="";"single"===r?c="Select element at index "+l:"all"===r&&(c='Select all elements, save as "'+l+'"');var i=a.length?u["default"].createElement(s,{rules:a}):u["default"].createElement("p",null,"No Rules");return u["default"].createElement("div",{className:"frame selector-form"},u["default"].createElement("div",null,u["default"].createElement("h2",null,t),u["default"].createElement("p",null,c),i,u["default"].createElement(o.PosButton,{text:"Add Child",click:this.addChild}),u["default"].createElement(o.PosButton,{text:"Add Rule",click:this.addRule}),u["default"].createElement(o.NegButton,{text:"Remove",click:this.remove})))}});var s=u["default"].createClass({displayName:"RuleList",render:function(){var e=this.props.rules,t=e.map(function(e,t){return u["default"].createElement(c,r({key:t},e))});return u["default"].createElement("ul",null,t)}}),c=u["default"].createClass({displayName:"Rule",handleClick:function(e){console.error("not yet implemented")},render:function(){var e=this.props,t=e.name,a=e.attr,n=e.type;return u["default"].createElement("li",null,u["default"].createElement("span",{className:"name"},t)," <",a,"> (",n,")",u["default"].createElement("button",{onClick:this.handleClick},String.fromCharCode(215)))}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),l=n(r);t["default"]=l["default"].createClass({displayName:"ElementFrame",render:function(){return l["default"].createElement("div",{className:"frame element-form"},l["default"].createElement("h2",null,selector),l["default"].createElement("p",null,description))}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),l=n(r);t["default"]=l["default"].createClass({displayName:"SelectorFrame",render:function(){return l["default"].createElement("div",{className:"frame element-form"},l["default"].createElement("h2",null,selector),l["default"].createElement("p",null,description))}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),l=n(r);t["default"]=l["default"].createClass({displayName:"SpecFrame",render:function(){return l["default"].createElement("div",{className:"frame element-form"},l["default"].createElement("h2",null,selector),l["default"].createElement("p",null,description))}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=a(3),u=n(l),o=a(14),s=n(o),c=a(6);t["default"]=u["default"].createClass({displayName:"Graph",getDefaultProps:function(){return{selectPage:function(){},width:300,height:150,margin:{top:25,right:25,bottom:25,left:50}}},getInitialState:function(){return{diagonal:s["default"].svg.diagonal().projection(function(e){return[e.y,e.x]})}},componentWillMount:function(){this._makeTreeLayout(this.props.width,this.props.height)},componentWillReceiveProps:function(e){var t=e.width,a=e.height;(t!==this.props.width||a!==this.props.height)&&this._makeTreeLayout(t,a)},_makeTreeLayout:function(e,t){var a=s["default"].layout.tree().size([t,e]);this.setState({tree:a})},_makeNodes:function(e){if(void 0===e)return null;var t=this.state,a=t.tree,n=t.diagonal,l=a.nodes(e),o=a.links(l),s=o.map(function(e,t){return u["default"].createElement("path",{className:"link",d:n(e)})}),c=l.map(function(e,t){return u["default"].createElement(i,r({key:t},e))});return u["default"].createElement("g",null,s,c)},render:function(){var e=this.props,t=e.page,a=e.width,n=e.height,r=e.margin,l=this._makeNodes(t);return u["default"].createElement("div",{className:"graph"},u["default"].createElement("svg",{width:r.left+a+r.right,height:r.top+n+r.bottom},u["default"].createElement("g",{transform:"translate("+r.left+","+r.top+")"},l)))}});var i=u["default"].createClass({displayName:"Node",handleClick:function(e){e.preventDefault(),console.log("You are selecting a selector")},specText:function(e,t){var a="";if(!e)return a;switch(e.type){case"single":a=t+"["+e.value+"]";break;case"all":a="["+t+"]"}return(0,c.abbreviate)(a,15)},render:function(){var e=this.props,t=e.selector,a=e.spec,n=e.rules,r=e.x,l=e.y,o=this.specText(a,t),s=n&&n.length?u["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):u["default"].createElement("circle",{r:"3"});return u["default"].createElement("g",{className:"node",onClick:this.handleClick,transform:"translate("+l+","+r+")"},u["default"].createElement("text",{y:"5",dx:"-5"},o),s)}})},function(e,t){e.exports=d3}]);