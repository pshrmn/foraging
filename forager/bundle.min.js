!function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),l=a(2),s=r(l),u=a(3),c=r(u),o=document.createElement("div");o.classList.add("forager-holder"),document.body.appendChild(o),(0,n.render)(c["default"].createElement(s["default"],null),o)},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),l=r(n),s=a(4),u=r(s),c=a(8),o=r(c),i=a(13),d=r(i);t["default"]=l["default"].createClass({displayName:"Forager",getInitialState:function(){return{pages:[void 0,{name:"example 1",selector:"body",spec:{type:"single",value:0},children:[],rules:[{name:"test",attr:"text",type:"string"}]},{name:"example 2",selector:"body",spec:{type:"single",value:0},children:[],rules:[]}],pageIndex:0}},loadPage:function(e){this.setState({pageIndex:e})},addPage:function(e){var t=this.state.pages;t.push(e),this.setState({pages:t,pageIndex:t.length-1})},removePage:function(){var e=this.state,t=e.pages,a=e.pageIndex;0!==a&&(t.splice(a,1),this.setState({pages:t,pageIndex:0}))},renamePage:function(e){var t=this.state,a=t.pages,r=t.pageIndex;a[r].name=e,this.setState({pages:a})},render:function(){var e=this.state,t=e.pages,a=e.pageIndex,r=t[a];return l["default"].createElement("div",{className:"forager no-select",ref:"app"},l["default"].createElement(u["default"],{pages:t,index:a,loadPage:this.loadPage,addPage:this.addPage,removePage:this.removePage,renamePage:this.renamePage}),l["default"].createElement("div",{className:"workspace"},l["default"].createElement(o["default"],{page:r}),l["default"].createElement(d["default"],{page:r})))},_makeNoSelect:function(){[].slice.call(this.refs.app.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})},componentDidMount:function(){this._makeNoSelect()},componentDidUpdate:function(){this._makeNoSelect()}})},function(e,t){e.exports=React},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),l=r(n),s=a(5),u=a(6),c=a(7);t["default"]=l["default"].createClass({displayName:"Controls",render:function(){var e=this.props,t=e.pages,a=e.index,r=e.loadPage,n=e.addPage,s=e.removePage,u=e.renamePage;return l["default"].createElement("div",{className:"controls"},l["default"].createElement(o,{pages:t,index:a,loadPage:r,addPage:n,removePage:s,renamePage:u}),l["default"].createElement(i,null))}});var o=l["default"].createClass({displayName:"PageControls",getName:function(){var e=window.prompt('Page Name:\nCannot contain the following characters: < > : "  / | ? * ');return(0,u.legalName)(e)?e:void console.error("bad name",e)},addHandler:function(e){e.preventDefault();var t=this.getName();if(void 0!==t){var a=(0,c.createPage)(t);this.props.addPage(a)}},renameHandler:function(e){e.preventDefault();var t=this.props.pages[this.props.index],a=this.getName();void 0!==a&&a!==t.name&&this.props.renamePage(a)},deleteHandler:function(e){e.preventDefault(),this.props.removePage()},uploadHandler:function(e){e.preventDefault(),console.error("not yet implemented")},previewHandler:function(e){e.preventDefault(),console.error("not yet implemented")},loadPage:function(e){this.props.loadPage(e.target.value)},render:function(){var e=this.props,t=e.pages,a=e.index,r=t.map(function(e,t){var a=void 0===e?"":e.name;return l["default"].createElement("option",{key:t,value:t},a)});return l["default"].createElement("div",{className:"page-controls"},"Page: ",l["default"].createElement("select",{value:a,onChange:this.loadPage},r),l["default"].createElement(s.PosButton,{click:this.addHandler,text:"Add"}),l["default"].createElement(s.PosButton,{click:this.renameHandler,text:"Rename"}),l["default"].createElement(s.NegButton,{click:this.deleteHandler,text:"Delete"}),l["default"].createElement(s.PosButton,{click:this.uploadHandler,text:"Upload"}),l["default"].createElement(s.PosButton,{click:this.previewHandler,text:"Preview"}))}}),i=l["default"].createClass({displayName:"GeneralControls",handle:function(e){e.preventDefault(),console.error("not yet implemented")},render:function(){return l["default"].createElement("div",{className:"app-controls"},l["default"].createElement(s.NeutralButton,{click:this.handle,text:"Sync"}),l["default"].createElement(s.NeutralButton,{click:this.handle,text:"Options"}),l["default"].createElement(s.NeutralButton,{click:this.handle,text:String.fromCharCode(215)}))}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PosButton=React.createClass({displayName:"PosButton",render:function(){var e=this.props,t=e.text,a=e.click;return React.createElement("button",{className:"pos",onClick:a},t)}}),t.NegButton=React.createClass({displayName:"NegButton",render:function(){var e=this.props,t=e.text,a=e.click;return React.createElement("button",{className:"neg",onClick:a},t)}}),t.NeutralButton=React.createClass({displayName:"NeutralButton",render:function(){var e=this.props,t=e.text,a=e.click;return React.createElement("button",{className:"neutral",onClick:a},t)}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.legalName=function(e){if(null===e||""===e)return!1;var t=/[<>:"\/\\\|\?\*]/;return null===e.match(t)},t.matchSelector=function(e,t){var a="single"===e.spec.type?e.spec.value:void 0,r="",n=t.children.some(function(t){if(e.spec.type!==t.spec.type)return!1;switch(t.spec.type){case"single":var n=t.spec.value;if(t.selector===e.selector&&n===a)return r="a selector with the same selector and index already exists",!0;break;case"all":if(t.spec.value===e.spec.value)return r='a selector with the name "'+e.spec.value+'" already exists',!0}return!1});return{error:n,msg:r}},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var a,r,n=t-3,l=n/2;n%2===0?(a=l,r=l):(a=Math.ceil(l),r=Math.floor(l));var s=e.slice(0,a),u=0===r?"":e.slice(-r);return s+"..."+u}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createPage=function(e){return{name:e,selector:"body",spec:{type:"single",value:0},children:[],rules:[]}}},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),l=r(n),s=a(9),u=r(s),c=a(10),o=(r(c),a(11)),i=(r(o),a(12));r(i);t["default"]=l["default"].createClass({displayName:"Frames",render:function(){var e=this.props,t=e.form,a=e.page,r=null;switch(t){case"selector":default:r=l["default"].createElement(u["default"],{page:a})}return l["default"].createElement("div",{className:"frames"},r)}})},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=a(3),s=r(l);a(5);t["default"]=s["default"].createClass({displayName:"ViewFrame",render:function(){var e=this.props.page;if(void 0===e)return null;var t=e.selector,a=(e.children,e.rules),r=e.spec,n=r.type,l=r.value,c="";"single"===n?c="Select element at index "+l:"all"===n&&(c='Select all elements, save as "'+l+'"');var o=a.length?s["default"].createElement(u,{rules:a}):s["default"].createElement("p",null,"No Rules");return s["default"].createElement("div",{className:"frame selector-form"},s["default"].createElement("div",null,s["default"].createElement("h2",null,t),s["default"].createElement("p",null,c),o))}});var u=s["default"].createClass({displayName:"RuleList",render:function(){var e=this.props.rules,t=e.map(function(e,t){return s["default"].createElement(c,n({key:t},e))});return s["default"].createElement("ul",null,t)}}),c=s["default"].createClass({displayName:"Rule",handleClick:function(e){console.error("not yet implemented")},render:function(){var e=this.props,t=e.name,a=e.attr,r=e.type;return s["default"].createElement("li",null,s["default"].createElement("span",{className:"name"},t)," <",a,"> (",r,")",s["default"].createElement("button",{onClick:this.handleClick},String.fromCharCode(215)))}})},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),l=r(n);t["default"]=l["default"].createClass({displayName:"ElementFrame",render:function(){return l["default"].createElement("div",{className:"frame element-form"},l["default"].createElement("h2",null,selector),l["default"].createElement("p",null,description))}})},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),l=r(n);t["default"]=l["default"].createClass({displayName:"SelectorFrame",render:function(){return l["default"].createElement("div",{className:"frame element-form"},l["default"].createElement("h2",null,selector),l["default"].createElement("p",null,description))}})},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),l=r(n);t["default"]=l["default"].createClass({displayName:"SpecFrame",render:function(){return l["default"].createElement("div",{className:"frame element-form"},l["default"].createElement("h2",null,selector),l["default"].createElement("p",null,description))}})},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=a(3),s=r(l),u=a(14),c=r(u),o=a(6);t["default"]=s["default"].createClass({displayName:"Graph",getDefaultProps:function(){return{selectPage:function(){},width:300,height:150,margin:{top:25,right:25,bottom:25,left:50}}},getInitialState:function(){return{diagonal:c["default"].svg.diagonal().projection(function(e){return[e.y,e.x]})}},componentWillMount:function(){this._makeTreeLayout(this.props.width,this.props.height)},componentWillReceiveProps:function(e){var t=e.width,a=e.height;(t!==this.props.width||a!==this.props.height)&&this._makeTreeLayout(t,a)},_makeTreeLayout:function(e,t){var a=c["default"].layout.tree().size([t,e]);this.setState({tree:a})},_makeNodes:function(e){if(void 0===e)return null;var t=this.state,a=t.tree,r=t.diagonal,l=a.nodes(e),u=a.links(l),c=u.map(function(e,t){return s["default"].createElement("path",{className:"link",d:r(e)})}),o=l.map(function(e,t){return s["default"].createElement(i,n({key:t},e))});return s["default"].createElement("g",null,c,o)},render:function(){var e=this.props,t=e.page,a=e.width,r=e.height,n=e.margin,l=this._makeNodes(t);return s["default"].createElement("div",{className:"graph"},s["default"].createElement("svg",{width:n.left+a+n.right,height:n.top+r+n.bottom},s["default"].createElement("g",{transform:"translate("+n.left+","+n.top+")"},l)))}});var i=s["default"].createClass({displayName:"Node",handleClick:function(e){e.preventDefault(),console.log("You are selecting a selector")},specText:function(e,t){var a="";if(!e)return a;switch(e.type){case"single":a=t+"["+e.value+"]";break;case"all":a="["+t+"]"}return(0,o.abbreviate)(a,15)},render:function(){var e=this.props,t=e.selector,a=e.spec,r=e.rules,n=e.x,l=e.y,u=this.specText(a,t),c=r&&r.length?s["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):s["default"].createElement("circle",{r:"3"});return s["default"].createElement("g",{className:"node",onClick:this.handleClick,transform:"translate("+l+","+n+")"},s["default"].createElement("text",{y:"5",dx:"-5"},u),c)}})},function(e,t){e.exports=d3}]);