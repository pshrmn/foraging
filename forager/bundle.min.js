!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=n(1),s=r(o),i=n(2),u=n(3),l=n(13),c=n(22),d=r(c),f=n(43),p=r(f),h=n(24),m=n(49),v=r(m),g=n(50),E=r(g),y=n(51),_=document.querySelector(".forager-holder");if(_){var b=store.getState();b.show||store.dispatch({type:h.SHOW_FORAGER})}else(0,y.chromeLoad)(function(e){var t={show:!0,selector:void 0,page:{pages:[void 0].concat(a(e)),pageIndex:0},frame:{name:"selector",data:{}},preview:{visible:!1}},n=(0,u.applyMiddleware)(v["default"],E["default"])(u.createStore)(p["default"],t),r={};n.subscribe(function(){var e=n.getState(),t=e.page.pages;t!==r&&((0,y.chromeSave)(t),r=t)});var o=document.createElement("div");o.classList.add("forager-holder"),o.classList.add("no-select"),document.body.appendChild(o),(0,i.render)(s["default"].createElement(l.Provider,{store:n},s["default"].createElement(d["default"],null)),o),window.store=n})},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(4),o=r(a),s=n(6),i=r(s),u=n(10),l=r(u),c=n(11),d=r(c),f=n(12),p=r(f);t.createStore=o["default"],t.combineReducers=i["default"],t.bindActionCreators=l["default"],t.applyMiddleware=d["default"],t.compose=p["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){function n(){return l}function r(e){c.push(e);var t=!0;return function(){if(t){t=!1;var n=c.indexOf(e);c.splice(n,1)}}}function a(e){if(!s["default"](e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,l=u(l,e)}finally{d=!1}return c.slice().forEach(function(e){return e()}),e}function o(e){u=e,a({type:i.INIT})}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],d=!1;return a({type:i.INIT}),{dispatch:a,subscribe:r,getState:n,replaceReducer:o}}t.__esModule=!0,t["default"]=a;var o=n(5),s=r(o),i={INIT:"@@redux/INIT"};t.ActionTypes=i},function(e,t){"use strict";function n(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&r(n)===r(Object)}t.__esModule=!0,t["default"]=n;var r=function(e){return Function.prototype.toString.call(e)};e.exports=t["default"]},function(e,t,n){(function(r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+r+". To ignore an action, you must explicitly return the previous state."}function s(e,t,n){var r=Object.keys(t),a=n&&n.type===l.ActionTypes.INIT?"initialState argument passed to createStore":"previous state received by the reducer";if(0===r.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!d["default"](e))return"The "+a+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+r.join('", "')+'"');var o=Object.keys(e).filter(function(e){return r.indexOf(e)<0});return o.length>0?"Unexpected "+(o.length>1?"keys":"key")+" "+('"'+o.join('", "')+'" found in '+a+". ")+"Expected to find one of the known reducer keys instead: "+('"'+r.join('", "')+'". Unexpected keys will be ignored.'):void 0}function i(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:l.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var a="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:a}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+l.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function u(e){var t,n=m["default"](e,function(e){return"function"==typeof e});try{i(n)}catch(a){t=a}var u=p["default"](n,function(){return void 0});return function(e,a){if(void 0===e&&(e=u),t)throw t;var i=!1,l=p["default"](n,function(t,n){var r=e[n],s=t(r,a);if("undefined"==typeof s){var u=o(n,a);throw new Error(u)}return i=i||s!==r,s});if("production"!==r.env.NODE_ENV){var c=s(e,l,a);c&&console.error(c)}return i?l:e}}t.__esModule=!0,t["default"]=u;var l=n(4),c=n(5),d=a(c),f=n(8),p=a(f),h=n(9),m=a(h);e.exports=t["default"]}).call(t,n(7))},function(e,t){function n(){l=!1,s.length?u=s.concat(u):c=-1,u.length&&r()}function r(){if(!l){var e=setTimeout(n);l=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,l=!1,clearTimeout(e)}}function a(e,t){this.fun=e,this.array=t}function o(){}var s,i=e.exports={},u=[],l=!1,c=-1;i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new a(e,t)),1!==u.length||l||setTimeout(r,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r),n},{})}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{})}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return function(){return t(e.apply(void 0,arguments))}}function o(e,t){if("function"==typeof e)return a(e,t);if("object"!=typeof e||null===e||void 0===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');return i["default"](e,function(e){return a(e,t)})}t.__esModule=!0,t["default"]=o;var s=n(8),i=r(s);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r){var a=e(n,r),s=a.dispatch,u=[],l={getState:a.getState,dispatch:function(e){return s(e)}};return u=t.map(function(e){return e(l)}),s=i["default"].apply(void 0,u)(a.dispatch),o({},a,{dispatch:s})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=a;var s=n(12),i=r(s);e.exports=t["default"]},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e["default"]:e}t.__esModule=!0;var a=n(14);t.Provider=r(a);var o=n(16);t.connect=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){c||(c=!0,console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0;var i=n(1),u=n(15),l=r(u),c=!1,d=function(e){function t(n,r){a(this,t),e.call(this,n,r),this.store=n.store}return o(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.componentWillReceiveProps=function(e){var t=this.store,n=e.store;t!==n&&s()},t.prototype.render=function(){var e=this.props.children;return i.Children.only(e)},t}(i.Component);t["default"]=d,d.propTypes={store:l["default"].isRequired,children:i.PropTypes.element.isRequired},d.childContextTypes={store:l["default"].isRequired},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1);t["default"]=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired}),e.exports=t["default"]},function(e,t,n){(function(r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.displayName||e.name||"Component"}function u(e,t,n){function a(e,t){var n=e.getState(),r=C?E(n,t):E(n);return S["default"](g["default"](r),"`mapStateToProps` must return an object. Instead received %s.",r),r}function u(e,t){var n=e.dispatch,r=A?_(n,t):_(n);return S["default"](g["default"](r),"`mapDispatchToProps` must return an object. Instead received %s.",r),r}function f(e,t,n){var r=O(e,t,n);return S["default"](g["default"](r),"`mergeProps` must return an object. Instead received %s.",r),r}var h=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],v=Boolean(e),E=e||P,_=g["default"](t)?y["default"](t):t||w,O=n||R,C=E.length>1,A=_.length>1,x=h.pure,j=void 0===x?!0:x,N=h.withRef,k=void 0===N?!1:N,L=M++;return function(e){var t=function(t){function n(e,r){o(this,n),t.call(this,e,r),this.version=L,this.store=e.store||r.store,S["default"](this.store,'Could not find "store" in either the context or '+('props of "'+this.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+this.constructor.displayName+'".')),this.stateProps=a(this.store,e),this.dispatchProps=u(this.store,e),this.state={storeState:null},this.updateState()}return s(n,t),n.prototype.shouldComponentUpdate=function(e,t){if(!j)return this.updateStateProps(e),this.updateDispatchProps(e),this.updateState(e),!0;var n=t.storeState!==this.state.storeState,r=!m["default"](e,this.props),a=!1,o=!1;return(n||r&&C)&&(a=this.updateStateProps(e)),r&&A&&(o=this.updateDispatchProps(e)),r||a||o?(this.updateState(e),!0):!1},n.prototype.computeNextState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];return f(this.stateProps,this.dispatchProps,e)},n.prototype.updateStateProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=a(this.store,e);return m["default"](t,this.stateProps)?!1:(this.stateProps=t,!0)},n.prototype.updateDispatchProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=u(this.store,e);return m["default"](t,this.dispatchProps)?!1:(this.dispatchProps=t,!0)},n.prototype.updateState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.nextState=this.computeNextState(e)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){v&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},n.prototype.handleChange=function(){this.unsubscribe&&this.setState({storeState:this.store.getState()})},n.prototype.getWrappedInstance=function(){return S["default"](k,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=k?"wrappedInstance":null;return d["default"].createElement(e,l({},this.nextState,{ref:t}))},n}(c.Component);return t.displayName="Connect("+i(e)+")",t.WrappedComponent=e,t.contextTypes={store:p["default"]},t.propTypes={store:p["default"]},"production"!==r.env.NODE_ENV&&(t.prototype.componentWillUpdate=function(){this.version!==L&&(this.version=L,this.trySubscribe(),this.updateStateProps(),this.updateDispatchProps(),this.updateState())}),b["default"](t,e)}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=u;var c=n(1),d=a(c),f=n(15),p=a(f),h=n(17),m=a(h),v=n(18),g=a(v),E=n(19),y=a(E),_=n(20),b=a(_),O=n(21),S=a(O),P=function(){return{}},w=function(e){return{dispatch:e}},R=function(e,t,n){return l({},n,e,t)},M=0;e.exports=t["default"]}).call(t,n(7))},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!a.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&r(n)===r(Object)}t.__esModule=!0,t["default"]=n;var r=function(e){return Function.prototype.toString.call(e)};e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return function(t){return a.bindActionCreators(e,t)}}t.__esModule=!0,t["default"]=r;var a=n(3);e.exports=t["default"]},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var a=Object.getOwnPropertyNames(t),o=0;o<a.length;++o)n[a[o]]||r[a[o]]||(e[a[o]]=t[a[o]]);return e}},function(e,t,n){(function(t){"use strict";var n=function(e,n,r,a,o,s,i,u){if("production"!==t.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===n)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,a,o,s,i,u],d=0;l=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return c[d++]}))}throw l.framesToPop=1,l}};e.exports=n}).call(t,n(7))},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{show:e.show,frame:e.frame,pages:e.page.pages,pageIndex:e.page.pageIndex,selector:e.selector,preview:e.preview}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),i=a(s),u=n(3),l=n(13),c=n(23),d=r(c),f=n(25),p=a(f),h=n(34),m=a(h),v=n(40),g=a(v),E=n(42),y=a(E),_=i["default"].createClass({displayName:"Forager",render:function(){var e=this.props,t=e.pages,n=e.pageIndex,r=e.show,a=e.dispatch,o=e.frame,s=e.selector,l=e.preview,c=t[n],f=(0,u.bindActionCreators)(d,a),h=["forager","no-select"];r||h.push("hidden");var v=l.visible?i["default"].createElement(y["default"],{page:c,close:f.hidePreview}):null,E="selector"===o.name?f.selectSelector:function(){};return i["default"].createElement("div",{className:h.join(" "),ref:"app"},i["default"].createElement(p["default"],{pages:t,index:n,actions:f}),i["default"].createElement("div",{className:"workspace"},i["default"].createElement(m["default"],{selector:s,frame:o,actions:f}),i["default"].createElement(g["default"],{page:c,selector:s,selectSelector:E})),v)},_makeNoSelect:function(){[].slice.call(this.refs.app.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})},componentDidMount:function(){this._makeNoSelect()},componentDidUpdate:function(){this._makeNoSelect()}});t["default"]=(0,l.connect)(o)(_)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.removeRule=t.saveRule=t.removeSelector=t.saveSelector=t.selectSelector=t.closeForager=t.showSpecFrame=t.showPartsFrame=t.showElementFrame=t.showRuleFrame=t.showSelectorFrame=t.hidePreview=t.showPreview=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.loadPage=void 0;var a=n(24),o=r(a);t.loadPage=function(e){return{type:o.LOAD_PAGE,index:e}},t.addPage=function(e){return{type:o.ADD_PAGE,page:e}},t.removePage=function(){return{type:o.REMOVE_PAGE}},t.renamePage=function(e){return{type:o.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:o.UPLOAD_PAGE}},t.showPreview=function(){return{type:o.SHOW_PREVIEW}},t.hidePreview=function(){return{type:o.HIDE_PREVIEW}},t.showSelectorFrame=function(){return{type:o.SHOW_SELECTOR_FRAME}},t.showRuleFrame=function(e){return{type:o.SHOW_RULE_FRAME,selector:e}},t.showElementFrame=function(){return{type:o.SHOW_ELEMENT_FRAME}},t.showPartsFrame=function(e){return{type:o.SHOW_PARTS_FRAME,parts:e}},t.showSpecFrame=function(e){return{type:o.SHOW_SPEC_FRAME,css:e}},t.closeForager=function(){return{type:o.CLOSE_FORAGER}},t.selectSelector=function(e){return{type:o.SELECT_SELECTOR,selectorID:e}},t.saveSelector=function(e,t){return{type:o.SAVE_SELECTOR,selector:e,parentID:t}},t.removeSelector=function(e){return{type:o.REMOVE_SELECTOR,selectorID:e}},t.saveRule=function(e){return{type:o.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:o.REMOVE_RULE,index:e}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOAD_PAGE="LOAD_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SHOW_PREVIEW="SHOW_PREVIEW",t.HIDE_PREVIEW="HIDE_PREVIEW",t.SHOW_SELECTOR_FRAME="SHOW_SELECTOR_FRAME",t.SHOW_RULE_FRAME="SHOW_RULE_FRAME",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_PARTS_FRAME="SHOW_PARTS_FRAME",t.SHOW_SPEC_FRAME="SHOW_SPEC_FRAME",t.CLOSE_FORAGER="CLOSE_FORAGER",t.SHOW_FORAGER="SHOW_FORAGER",t.SELECT_SELECTOR="SELECT_SELECTOR",t.SAVE_SELECTOR="SAVE_SELECTOR",t.REMOVE_SELECTOR="REMOVE_SELECTOR",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),i=n(27);t["default"]=o["default"].createClass({displayName:"Controls",render:function(){var e=this.props,t=e.pages,n=e.index,r=e.actions;return o["default"].createElement("div",{className:"controls"},o["default"].createElement(u,{pages:t,index:n,actions:r}),o["default"].createElement(l,{actions:r}))}});var u=o["default"].createClass({displayName:"PageControls",getName:function(){var e=window.prompt('Page Name:\nCannot contain the following characters: < > : "  / | ? * ');return(0,i.legalName)(e)?e:void console.error("bad name",e)},addHandler:function(e){e.preventDefault();var t=this.getName();if(void 0!==t){var n=(0,i.createPage)(t);(0,i.setupPage)(n),this.props.actions.addPage(n)}},renameHandler:function(e){e.preventDefault();var t=this.props.pages[this.props.index];if(void 0!==t){var n=this.getName();void 0!==n&&n!==t.name&&this.props.actions.renamePage(n)}},deleteHandler:function(e){e.preventDefault(),this.props.actions.removePage()},uploadHandler:function(e){e.preventDefault(),this.props.actions.uploadPage()},previewHandler:function(e){e.preventDefault(),this.props.actions.showPreview()},loadPage:function(e){this.props.actions.loadPage(e.target.value)},render:function(){var e=this.props,t=e.pages,n=e.index,r=t.map(function(e,t){var n=void 0===e?"":e.name;return o["default"].createElement("option",{key:t,value:t},n)});return o["default"].createElement("div",{className:"page-controls"},"Page: ",o["default"].createElement("select",{value:n,onChange:this.loadPage},r),o["default"].createElement(s.PosButton,{click:this.addHandler,text:"Add"}),o["default"].createElement(s.PosButton,{click:this.renameHandler,text:"Rename"}),o["default"].createElement(s.NegButton,{click:this.deleteHandler,text:"Delete"}),o["default"].createElement(s.PosButton,{click:this.uploadHandler,text:"Upload"}),o["default"].createElement(s.PosButton,{click:this.previewHandler,text:"Preview"}))}}),l=o["default"].createClass({displayName:"GeneralControls",handleClose:function(e){this.props.actions.closeForager()},render:function(){return o["default"].createElement("div",{className:"app-controls"},o["default"].createElement(s.NeutralButton,{click:this.handleClose,text:String.fromCharCode(215)}))}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PosButton=React.createClass({displayName:"PosButton",render:function(){var e=this.props,t=e.text,n=e.click;return React.createElement("button",{className:"pos",onClick:n},t)}}),t.NegButton=React.createClass({displayName:"NegButton",render:function(){var e=this.props,t=e.text,n=e.click;return React.createElement("button",{className:"neg",onClick:n},t)}}),t.NeutralButton=React.createClass({displayName:"NeutralButton",render:function(){var e=this.props,t=e.text,n=e.click;return React.createElement("button",{className:"neutral",onClick:n},t)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28);Object.defineProperty(t,"legalName",{enumerable:!0,get:function(){return r.legalName}}),Object.defineProperty(t,"abbreviate",{enumerable:!0,get:function(){return r.abbreviate}});var a=n(29);Object.defineProperty(t,"attributes",{enumerable:!0,get:function(){return a.attributes}});var o=n(30);Object.defineProperty(t,"highlight",{enumerable:!0,get:function(){return o.highlight}}),Object.defineProperty(t,"unhighlight",{enumerable:!0,get:function(){return o.unhighlight}}),Object.defineProperty(t,"iHighlight",{enumerable:!0,get:function(){return o.iHighlight}}),Object.defineProperty(t,"iUnhighlight",{enumerable:!0,get:function(){return o.iUnhighlight}});var s=n(31);Object.defineProperty(t,"createPage",{enumerable:!0,get:function(){return s.createPage}}),Object.defineProperty(t,"createSelector",{enumerable:!0,get:function(){return s.createSelector}}),Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return s.clone}}),Object.defineProperty(t,"clean",{enumerable:!0,get:function(){return s.clean}}),Object.defineProperty(t,"setupPage",{enumerable:!0,get:function(){return s.setupPage}});var i=n(32);Object.defineProperty(t,"select",{enumerable:!0,get:function(){return i.select}}),Object.defineProperty(t,"count",{enumerable:!0,get:function(){return i.count}}),Object.defineProperty(t,"parts",{enumerable:!0,get:function(){return i.parts}}),Object.defineProperty(t,"allSelect",{enumerable:!0,get:function(){return i.allSelect}});var u=n(33);Object.defineProperty(t,"preview",{enumerable:!0,get:function(){return u.preview}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.legalName=function(e){if(null===e||""===e)return!1;var t=/[<>:"\/\\\|\?\*]/;return null===e.match(t)},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var n,r,a=t-3,o=a/2;a%2===0?(n=o,r=o):(n=Math.ceil(o),r=Math.floor(o));var s=e.slice(0,n),i=0===r?"":e.slice(-r);return s+"..."+i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.attributes=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=Array.from(e.attributes).reduce(function(e,n){return t[n.name]?e:("class"===n.name&&(n.value=n.value.replace("current-selector","").trim()),""!==n.value&&e.push({name:n.name,value:n.value}),e)},[]),r=e.textContent.trim();return""!==r&&n.push({name:"text",value:r}),n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){[].slice.call(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){[].slice.call(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,n,r,a){[].slice.call(e).forEach(function(e){e.classList.add(t),e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",r,!1),e.addEventListener("click",a,!1)})},t.iUnhighlight=function(e,t,n,r){[].slice.call(document.getElementsByClassName(e)).forEach(function(a){a.classList.remove(e),a.removeEventListener("mouseover",t,!1),a.removeEventListener("mouseout",n,!1),a.removeEventListener("click",r,!1)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupPage=t.addChild=t.clean=t.clone=t.createSelector=t.createPage=void 0;var r=n(32),a=(t.createPage=function(e){return{name:e,selector:"body",spec:{type:"single",value:0},children:[],rules:[]}},t.createSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?"single":arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return{selector:e,spec:{type:t,value:n},children:[],rules:[],optional:r}},t.clone=function o(e){return Object.assign({},{id:e.id,selector:e.selector,spec:Object.assign({},e.spec),optional:e.optional,children:e.children.map(function(e){return o(e)}),rules:e.rules.map(function(e){return Object.assign({},e)}),elements:e.elements||[]})},t.clean=function(e){return Object.assign({},{name:e.name},a(e))},function s(e){return Object.assign({},{selector:e.selector,spec:Object.assign({},e.spec),children:e.children.map(function(e){return s(e)}),rules:e.rules.map(function(e){return Object.assign({},e)}),optional:e.optional})});t.addChild=function i(e,t,n){if(e.id===t)return e.children.push(n),!0;var r=e.children.some(function(e){i(e,t,n)});return r},t.setupPage=function(e){if(void 0!==e){var t=0,n=function a(e,n){e.id=t++,e.elements=(0,r.select)(n,e.selector,e.spec),e.children.forEach(function(t){a(t,e.elements)})};n(e,[document]),e.nextID=t}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.select=function(e,t,n){var r=(t||"*")+":not(.no-select)",a=n&&"single"===n.type?n.value:void 0,o=function(e){return void 0!==a?void 0!==e[a]?[e[a]]:[]:[].slice.call(e)};return[].slice.call(e).reduce(function(e,t){var n=t.querySelectorAll(r);return e.concat(o(n))},[])},t.count=function(e,t,n){var r=(t||"*")+":not(.no-select)",a=n&&"single"===n.type?n.value:void 0,o=function(e){return void 0!==a?void 0!==e[a]?1:0:e.length};return[].slice.call(e).reduce(function(e,t){var n=t.querySelectorAll(r),a=o(n);return e>a?e:a},0)},t.parts=function(e){var t=[],n=["forager-highlight","query-check","selectable-element","current-selector"],r=function(e){return!t.some(function(t){return t===e})},a=function(e){return!n.some(function(t){return t===e})},o=[],s=e.tagName.toLowerCase();return r(s)?(o.push(s),""!==e.id&&o.push("#"+e.id),[].slice.call(e.classList).forEach(function(e){a(e)&&o.push("."+e)}),o):[]},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.preview=function(e){var t=function(e,t){var r=t.querySelectorAll(e.selector),a=e.spec.value;switch(e.spec.type){case"single":var o=r[a];if(!o)return;return n(e,o);case"all":var s=Array.from(r).map(function(t){return n(e,t)}).filter(function(e){return void 0!==e}),i={};return i[a]=s,i}},n=function(e,t){var n=s(e.rules,t),a=r(e.children,t);if(a){for(var o in a)n[o]=a[o];return n}},r=function(e,n){var r={};return e.some(function(e){var a=t(e,n);if(!a&&!e.optional)return r=void 0,!0;for(var o in a)r[o]=a[o];return!1}),r},a=/\d+/,o=/\d+(\.\d+)?/,s=function(e,t){var n={};return e.forEach(function(e){var r,s;if("text"===e.attr)r=t.textContent.replace(/\s+/g," ");else{var i=t.getAttribute(e.attr);r=i||""}switch(e.type){case"int":s=r.match(a),r=null!==s?parseInt(s[0],10):-1;break;case"float":s=r.match(o),r=null!==s?parseFloat(s[0]):-1}n[e.name]=r}),n};return void 0===e?"":t(e,document)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(35),i=r(s),u=n(36),l=r(u),c=n(37),d=r(c),f=n(38),p=r(f),h=n(39),m=r(h),v=n(27);t["default"]=o["default"].createClass({displayName:"Frames",cssSelector:"current-selector",_selectFrame:function(){var e=this.props,t=e.frame,n=e.selector,r=e.actions;switch(t.name){case"selector":return o["default"].createElement(i["default"],{selector:n,data:t.data,actions:r});case"rule":return o["default"].createElement(l["default"],{selector:n,data:t.data,actions:r});case"element":return o["default"].createElement(d["default"],{selector:n,data:t.data,actions:r});case"parts":return o["default"].createElement(p["default"],{selector:n,data:t.data,actions:r});case"spec":return o["default"].createElement(m["default"],{selector:n,data:t.data,actions:r});default:return null}},componentWillMount:function(){this.props.selector&&this._highlightParents(this.props.selector.elements)},componentWillReceiveProps:function(e){void 0!==e.selector&&e.selector!==this.props.selector&&this._highlightParents(e.selector.elements)},componentWillUnmount:function(){(0,v.unhighlight)(this.cssSelector)},_highlightParents:function(e){(0,v.unhighlight)(this.cssSelector),(0,v.highlight)(e,this.cssSelector)},render:function(){return o["default"].createElement("div",{className:"frames"},this._selectFrame())}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o),i=n(26);t["default"]=s["default"].createClass({displayName:"SelectorFrame",addChild:function(e){this.props.actions.showElementFrame()},addRule:function(e){this.props.actions.showRuleFrame()},remove:function(e){this.props.actions.removeSelector(this.props.selector.id)},render:function(){if(void 0===this.props.selector)return null;var e=this.props.selector,t=e.selector,n=(e.children,e.rules),r=e.spec,a=r.type,o=r.value,l="";"single"===a?l="Select element at index "+o:"all"===a&&(l='Select all elements, save as "'+o+'"');var c=n.length?s["default"].createElement(u,{
rules:n,actions:this.props.actions}):s["default"].createElement("p",null,"No Rules");return s["default"].createElement("div",{className:"frame"},"Selector Frame",s["default"].createElement("div",null,s["default"].createElement("h2",null,t),s["default"].createElement("p",null,l),c,s["default"].createElement(i.PosButton,{text:"Add Child",click:this.addChild}),s["default"].createElement(i.PosButton,{text:"Add Rule",click:this.addRule}),s["default"].createElement(i.NegButton,{text:"Remove",click:this.remove})))}});var u=s["default"].createClass({displayName:"RuleList",render:function(){var e=this.props,t=e.rules,n=e.actions,r=n.removeRule,o=t.map(function(e,t){return s["default"].createElement(l,a({key:t,index:t,remove:r},e))});return s["default"].createElement("ul",null,o)}}),l=s["default"].createClass({displayName:"Rule",handleClick:function(e){e.preventDefault(),this.props.remove(this.props.index)},render:function(){var e=this.props,t=e.name,n=e.attr,r=e.type;return s["default"].createElement("li",null,s["default"].createElement("span",{className:"name"},t)," <",n,"> (",r,")",s["default"].createElement("button",{onClick:this.handleClick},String.fromCharCode(215)))}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),i=n(27);t["default"]=o["default"].createClass({displayName:"RuleFrame",getInitialState:function(){return{name:"",type:"string",attr:"",elementIndex:0}},setName:function(e){this.setState({name:e.target.value})},setType:function(e){this.setState({type:e.target.value})},setAttr:function(e){this.setState({attr:e})},saveHandler:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.type,a=t.attr;""!==n&&""!==a&&this.props.actions.saveRule({name:n,type:r,attr:a})},cancelHandler:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},render:function(){var e=this,t=this.props,n=t.selector,r=(t.actions,["string","int","float"].map(function(t,n){return o["default"].createElement("label",{key:n},t,": ",o["default"].createElement("input",{type:"radio",name:"rule-type",value:t,checked:t===e.state.type,onChange:e.setType}))}));return o["default"].createElement("div",{className:"frame rule-form"},o["default"].createElement("div",null,o["default"].createElement("label",null,"Name: ",o["default"].createElement("input",{type:"text",value:this.state.name,onChange:this.setName}))),o["default"].createElement("div",null,"Type: ",r),o["default"].createElement(u,{elements:n.elements,attr:this.state.attr,setAttr:this.setAttr}),o["default"].createElement("div",{className:"button"},o["default"].createElement(s.PosButton,{text:"Save",click:this.saveHandler}),o["default"].createElement(s.NegButton,{text:"Cancel",click:this.cancelHandler})))}});var u=o["default"].createClass({displayName:"AttrChoices",getInitialState:function(){return{index:0}},selectAttr:function(e){this.props.setAttr(e.target.value)},elementAttributes:function(e){var t=this,n=this.props.attr;return(0,i.attributes)(e).map(function(e,r){return o["default"].createElement("li",{key:r},o["default"].createElement("label",null,o["default"].createElement("input",{type:"radio",name:"rule-attr",value:e.name,checked:e.name===n,onChange:t.selectAttr}),e.name," - ",e.value))})},render:function(){var e=this.props,t=e.elements,n=(e.attr,this.elementAttributes(t[this.state.index]));return o["default"].createElement("ul",null,n)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),i=n(27);t["default"]=o["default"].createClass({displayName:"ElementFrame",potentialSelector:"selectable-element",currentSelector:"query-check",events:{over:function(e){e.target.classList.add("forager-highlight")},out:function(e){e.target.classList.remove("forager-highlight")},click:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.path).filter(function(e){return e.classList&&e.classList.contains("selectable-element")}).reverse().map(function(e){return(0,i.parts)(e)});this.setState({selectors:t})}},getInitialState:function(){return{checked:void 0,selectors:[]}},setRadio:function(e){this.setState({checked:e})},saveHandler:function(e){e.preventDefault();var t=this.state.selectors[this.state.checked];this.props.actions.showPartsFrame(t)},cancelHandler:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},render:function(){var e=this,t=this.props,n=(t.selector,t.data,this.state),r=n.selectors,a=n.checked,i=r.map(function(t,n){return o["default"].createElement(u,{key:n,selector:t,index:n,checked:n===a,select:e.setRadio})});return o["default"].createElement("div",{className:"frame element-form"},o["default"].createElement("div",{className:"radios"},i),o["default"].createElement("div",{className:"buttons"},o["default"].createElement(s.PosButton,{text:"Save",click:this.saveHandler}),o["default"].createElement(s.NegButton,{text:"Cancel",click:this.cancelHandler})))},componentWillMount:function(){this._setupPageEvents(this.props.selector.elements)},componentWillReceiveNewProps:function(e){this._setupPageEvents(e.selector.elements)},componentWillUpdate:function(e,t){(0,i.unhighlight)(this.currentSelector);var n=t.selectors[t.checked];if(void 0!==n){var r=n.join(""),a=(0,i.select)(e.selector.elements,r);(0,i.highlight)(a,this.currentSelector)}},componentWillUnmount:function(){(0,i.unhighlight)(this.currentSelector),(0,i.iUnhighlight)(this.potentialSelector,this.events.over,this.events.out,this.boundClick),delete this.boundClick},_setupPageEvents:function(e){var t=(0,i.select)(e);this.boundClick=this.events.click.bind(this),(0,i.iHighlight)(t,this.potentialSelector,this.events.over,this.events.out,this.boundClick)}});var u=o["default"].createClass({displayName:"SelectorRadio",setRadio:function(e){this.props.select(this.props.index)},render:function(){var e=this.props,t=e.selector,n=e.checked,r=n?"selected":"";return o["default"].createElement("label",{className:r},o["default"].createElement("input",{type:"radio",name:"css-selector",checked:n,onChange:this.setRadio}),t)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),i=n(27);t["default"]=o["default"].createClass({displayName:"PartsFrame",previewClass:"query-check",getInitialState:function(){return{parts:[],selector:""}},saveHandler:function(e){e.preventDefault();var t=this.state.selector;""!==t&&this.props.actions.showSpecFrame(t)},cancelHander:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},toggleRadio:function(e){var t=e.target.value,n=this.state.parts;n[t].checked=!n[t].checked;var r=n.reduce(function(e,t){return t.checked&&(e+=t.name),e},"");this._setupHighlights(r),this.setState({parts:n,selector:r})},componentWillMount:function(){this._partsArray(this.props.data.parts)},componentWillReceiveProps:function(e){this._partsArray(e.data.parts)},componentWillUnmount:function(){this._removeHighlights()},_partsArray:function(e){var t=e.map(function(e){return{name:e,checked:!0}}),n=e.join("");this._setupHighlights(n),this.setState({parts:t,selector:n})},render:function(){var e=this,t=this.state.parts.map(function(t,n){var r=t.name,a=t.checked;return o["default"].createElement("label",{key:n},r,o["default"].createElement("input",{type:"checkbox",name:"selector-part",value:n,checked:a,onChange:e.toggleRadio}))});return o["default"].createElement("div",{className:"frame parts-form"},t,o["default"].createElement("div",{className:"buttons"},o["default"].createElement(s.PosButton,{text:"Save",click:this.saveHandler}),o["default"].createElement(s.NegButton,{text:"Cancel",click:this.cancelHander})))},_setupHighlights:function(e){if((0,i.unhighlight)(this.previewClass),""!==e){var t=(0,i.select)(this.props.selector.elements,e);(0,i.highlight)(t,this.previewClass)}},_removeHighlights:function(){(0,i.unhighlight)(this.previewClass)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),i=n(27);t["default"]=o["default"].createClass({displayName:"SpecFrame",highlight:"query-check",getInitialState:function(){return{type:"single",value:0,optional:!1}},saveHandler:function(e){e.preventDefault();var t=this.state,n=t.type,r=t.value,a=t.optional;if("all"!==n||""!==r){var o=(0,i.createSelector)(this.props.data.css,n,r,a);if(o.elements=(0,i.select)(this.props.selector.elements,o.selector,o.spec),(0,i.allSelect)(o.elements)){var s=(0,i.createSelector)("option","all","option",!1);s.elements=(0,i.select)(o.elements,s.selector,s.spec),o.children.push(s)}this.props.actions.saveSelector(o,this.props.selector.id)}},cancelHandler:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},setSpec:function(e,t){this.setState({type:e,value:t})},toggleOptional:function(e){this.setState({optional:e.target.checked})},render:function(){var e=this.props,t=e.selector,n=e.data,r=n.css,a=(0,i.count)(t.elements,r);return o["default"].createElement("div",{className:"frame spec-form"},r,o["default"].createElement(u,{count:a,setSpec:this.setSpec}),o["default"].createElement("div",null,o["default"].createElement("label",null,"Optional: ",o["default"].createElement("input",{type:"checkbox",checked:this.state.optional,onChange:this.toggleOptional}))),o["default"].createElement("div",{className:"buttons"},o["default"].createElement(s.PosButton,{text:"Save",click:this.saveHandler}),o["default"].createElement(s.NegButton,{text:"Cancel",click:this.cancelHandler})))},componentWillMount:function(){var e=this.props.selector.elements,t=this.props.data.css,n={type:this.state.type,value:this.state.value},r=(0,i.select)(e,t,n);(0,i.highlight)(r,this.highlight)},componentWillUpdate:function(e,t){var n=e.selector.elements,r=e.data.css,a={type:t.type,value:t.value};(0,i.unhighlight)(this.highlight);var o=(0,i.select)(n,r,a);(0,i.highlight)(o,this.highlight)},componentWillUnmount:function(){(0,i.unhighlight)(this.highlight)}});var u=o["default"].createClass({displayName:"SpecForm",getInitialState:function(){return{type:"single",value:0}},setType:function(e){var t=e.target.value,n=void 0;"single"===t?n=0:"all"===t&&(n=""),this.props.setSpec(t,n),this.setState({type:t,value:n})},setValue:function(e){var t=e.target.value;"single"===this.state.type&&(t=parseInt(t,10)),this.setSpec(this.state.type,t),this.setState({value:t})},setSpec:function(e,t){this.props.setSpec(e,t)},_singleValue:function(){for(var e=this.state.value,t=[],n=0;n<this.props.count;n++)t.push(o["default"].createElement("option",{key:n,value:n},n));return o["default"].createElement("select",{value:e,onChange:this.setValue},t)},_allValue:function(){return o["default"].createElement("div",null,"Name: ",o["default"].createElement("input",{type:"text",value:this.state.value,onChange:this.setValue}))},render:function(){var e="single"===this.state.type?this._singleValue():this._allValue();return o["default"].createElement("div",null,o["default"].createElement("div",null,"Choose Type:",o["default"].createElement("label",null,"single ",o["default"].createElement("input",{type:"radio",name:"type",value:"single",checked:"single"===this.state.type,onChange:this.setType})),o["default"].createElement("label",null,"all ",o["default"].createElement("input",{type:"radio",name:"type",value:"all",checked:"all"===this.state.type,onChange:this.setType}))),e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o),i=n(41),u=r(i),l=n(27);t["default"]=s["default"].createClass({displayName:"Graph",getDefaultProps:function(){return{selectPage:function(){},width:300,height:150,margin:{top:25,right:25,bottom:25,left:50}}},getInitialState:function(){return{diagonal:u["default"].svg.diagonal().projection(function(e){return[e.y,e.x]})}},componentWillMount:function(){this._makeTreeLayout(this.props.width,this.props.height)},componentWillReceiveProps:function(e){var t=e.width,n=e.height;(t!==this.props.width||n!==this.props.height)&&this._makeTreeLayout(t,n)},_makeTreeLayout:function(e,t){var n=u["default"].layout.tree().size([t,e]);this.setState({tree:n})},_makeNodes:function(){var e=this.props,t=e.page,n=e.selector,r=e.selectSelector;if(void 0===t)return null;var o=this.state,i=o.tree,u=o.diagonal,d=(0,l.clone)(t),f=i.nodes(d),p=i.links(f),h=p.map(function(e,t){return s["default"].createElement("path",{key:t,className:"link",d:u(e)})}),m=f.map(function(e,t){var o=!1;return n&&e.id===n.id&&(o=!0),s["default"].createElement(c,a({key:t,current:o,select:r},e))});return s["default"].createElement("g",null,h,m)},render:function(){var e=this.props,t=e.width,n=e.height,r=e.margin,a=this._makeNodes();return s["default"].createElement("div",{className:"graph"},s["default"].createElement("svg",{width:r.left+t+r.right,height:r.top+n+r.bottom},s["default"].createElement("g",{transform:"translate("+r.left+","+r.top+")"},a)))}});var c=s["default"].createClass({displayName:"Node",hoverClass:"saved-preview",handleClick:function(e){e.preventDefault(),this.props.select(this.props.id)},handleMouseover:function(e){(0,l.highlight)(this.props.elements,this.hoverClass)},handleMouseout:function(e){(0,l.unhighlight)(this.hoverClass)},specText:function(){var e=this.props,t=e.selector,n=e.spec,r="";if(!n)return r;switch(n.type){case"single":r=t+"["+n.value+"]";break;case"all":r="["+t+"]"}return(0,l.abbreviate)(r,15)},render:function(){var e=this.props,t=e.rules,n=e.children,r=n&&n.length,a=t&&t.length,o=this.specText(),i=t&&t.length?s["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):s["default"].createElement("circle",{r:"3"}),u=["node"];return this.props.current&&u.push("current"),a||r||u.push("empty"),s["default"].createElement("g",{className:u.join(" "),transform:"translate("+this.props.y+","+this.props.x+")",onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout},s["default"].createElement("text",{y:"5",dx:"-5"},o),i)}})},function(e,t){e.exports=d3},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),i=n(27);t["default"]=o["default"].createClass({displayName:"Preview",clickHandler:function(e){e.preventDefault(),this.props.close()},render:function(){var e=this.props.page,t=JSON.stringify((0,i.preview)(e),null,2);return o["default"].createElement("div",{className:"preview-holder"},o["default"].createElement("div",{className:"preview-bg",onClick:this.clickHandler}),o["default"].createElement("div",{className:"preview"},o["default"].createElement("pre",null,t),o["default"].createElement(s.NeutralButton,{text:"Close",click:this.clickHandler})))}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=arguments.length<=0||void 0===arguments[0]?m:arguments[0],t=arguments[1];switch(t.type){default:return{frame:(0,s["default"])(e.frame,t),show:(0,u["default"])(e.show,t),page:(0,c["default"])(e.page,t),selector:(0,f["default"])(e.selector,t),preview:(0,h["default"])(e.preview,t)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),s=r(o),i=n(45),u=r(i),l=n(46),c=r(l),d=n(47),f=r(d),p=n(48),h=r(p),m={show:!0,page:{pages:[void 0],pageIndex:0},frame:{name:"selector",data:{}},preview:{visible:!1},selector:void 0};t["default"]=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments[1];switch(t.type){case s.LOAD_PAGE:case s.REMOVE_SELECTOR:case s.SAVE_SELECTOR:case s.SAVE_RULE:case s.REMOVE_RULE:case s.SHOW_SELECTOR_FRAME:return Object.assign({},e,{name:"selector",data:{}});case s.SHOW_RULE_FRAME:return Object.assign({},e,{name:"rule",data:{}});case s.SHOW_ELEMENT_FRAME:return Object.assign({},e,{name:"element",data:{}});case s.SHOW_PARTS_FRAME:return Object.assign({},e,{name:"parts",data:{parts:t.parts}});case s.SHOW_SPEC_FRAME:return Object.assign({},e,{name:"spec",data:{css:t.css}});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(24),s=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments[1];switch(t.type){case s.CLOSE_FORAGER:return!1;case s.SHOW_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(24),s=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case i.LOAD_PAGE:var n=e.pages.length,r=parseInt(t.index,10);return(0>r||r>=n)&&(r=0),Object.assign({},e,{pageIndex:r});case i.ADD_PAGE:var o=e.pages,s=[].concat(a(o),[t.page]);return Object.assign({},e,{pages:s,pageIndex:s.length-1});case i.REMOVE_PAGE:var o=e.pages,u=e.pageIndex;return 0===u?e:Object.assign({},e,{pages:[].concat(a(o.slice(0,u)),a(o.slice(u+1))),pageIndex:0});case i.RENAME_PAGE:var o=e.pages,u=e.pageIndex;if(0===u)return e;var s=o.slice();return s[u]=Object.assign({},s[u],{name:t.name}),Object.assign({},e,{pages:s});case i.SAVE_SELECTOR:var o=e.pages,u=e.pageIndex,l=o[u],c=t.selector,d=t.parentID;c.id=l.nextID++,l.nextID++,0!==c.children.length&&c.children.forEach(function(e){e.id=l.nextID++});var f=function p(e){if(e.id===d)return e.children.push(c),!0;var t=e.children.some(function(e){return p(e)});return t};return f(l),Object.assign({},e,{pages:[].concat(a(o.slice(0,u)),[l],a(o.slice(u+1)))});case i.REMOVE_SELECTOR:var o=e.pages,u=e.pageIndex,l=o[u],f=function h(e){var n=e.children.length;return e.children=e.children.filter(function(e){return e.id!==t.selectorID}),e.children.length<n?!0:e.children.some(function(e){return h(e)})};return 0===t.selectorID?(l.children=[],l.rules=[]):f(l),Object.assign({},e,{pages:[].concat(a(o.slice(0,u)),[l],a(o.slice(u+1)))});case i.SAVE_RULE:case i.REMOVE_RULE:var o=e.pages,u=e.pageIndex,l=o[u];return Object.assign({},e,{pages:[].concat(a(o.slice(0,u)),[l],a(o.slice(u+1)))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var s=n(24),i=r(s)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){switch(t.type){case s.SELECT_SELECTOR:case s.SAVE_SELECTOR:return t.selector;case s.REMOVE_SELECTOR:case s.LOAD_PAGE:case s.ADD_PAGE:case s.REMOVE_PAGE:return void 0;case s.SAVE_RULE:return e.rules.push(t.rule),e;case s.REMOVE_RULE:e.rules;return e.rules.splice(t.index,1),e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(24),s=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case s.SHOW_PREVIEW:return Object.assign({},{visible:!0});case s.HIDE_PREVIEW:return Object.assign({},{visible:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(24),s=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),o=r(a);t["default"]=function(e){return function(t){return function(n){switch(n.type){case o.SELECT_SELECTOR:var r=e.getState(),a=n.selectorID,i=r.page.pages[r.page.pageIndex],u=s(i,a);n.selector=u}return t(n)}}};var s=function(e,t){var n=void 0,r=function a(e){return e.id===t?(n=e,!0):e.children.some(function(e){return a(e)})};return r(e),n}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),o=r(a),s=n(27);t["default"]=function(e){return function(t){return function(n){switch(n.type){case o.UPLOAD_PAGE:var r=e.getState(),a=r.page,i=a.pages,u=a.pageIndex,l=i[u],c={name:l.name,site:window.location.hostname,page:JSON.stringify((0,s.clean)(l))};chrome.runtime.sendMessage({type:"upload",data:c})}return t(n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chromeLoad=t.chromeSave=void 0;var r=n(27),a=(t.chromeSave=function(e){var t=a(e);chrome.storage.local.get("sites",function(e){var n=window.location.hostname;e.sites[n]=t,chrome.storage.local.set({sites:e.sites})})},function(e){return e.filter(function(e){return void 0!==e}).map(function(e){return(0,r.clean)(e)})});t.chromeLoad=function(e){chrome.storage.local.get("sites",function(t){var n=window.location.hostname,a=t.sites[n]||[];a.forEach(function(e){return(0,r.setupPage)(e)}),e(a)})}}]);