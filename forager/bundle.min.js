!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var s=r(1),o=n(s),i=r(2),u=r(3),l=r(13),c=r(22),d=n(c),f=r(43),p=n(f),h=r(24),m=r(49),v=n(m),g=r(50),E=n(g),y=r(51),_=document.querySelector(".forager-holder");if(_){var b=store.getState();b.show||store.dispatch({type:h.SHOW_FORAGER})}else(0,y.chromeLoad)(function(e){var t={show:!0,selector:void 0,page:{pages:[void 0].concat(a(e)),pageIndex:0},frame:{name:"selector",data:{}},preview:{visible:!1}},r=(0,u.applyMiddleware)(v["default"],E["default"])(u.createStore)(p["default"],t),n={};r.subscribe(function(){var e=r.getState(),t=e.page.pages;t!==n&&((0,y.chromeSave)(t),n=t)});var s=document.createElement("div");s.classList.add("forager-holder"),s.classList.add("no-select"),document.body.appendChild(s),(0,i.render)(o["default"].createElement(l.Provider,{store:r},o["default"].createElement(d["default"],null)),s),window.store=r})},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(4),s=n(a),o=r(6),i=n(o),u=r(10),l=n(u),c=r(11),d=n(c),f=r(12),p=n(f);t.createStore=s["default"],t.combineReducers=i["default"],t.bindActionCreators=l["default"],t.applyMiddleware=d["default"],t.compose=p["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){function r(){return l}function n(e){c.push(e);var t=!0;return function(){if(t){t=!1;var r=c.indexOf(e);c.splice(r,1)}}}function a(e){if(!o["default"](e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,l=u(l,e)}finally{d=!1}return c.slice().forEach(function(e){return e()}),e}function s(e){u=e,a({type:i.INIT})}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],d=!1;return a({type:i.INIT}),{dispatch:a,subscribe:n,getState:r,replaceReducer:s}}t.__esModule=!0,t["default"]=a;var s=r(5),o=n(s),i={INIT:"@@redux/INIT"};t.ActionTypes=i},function(e,t){"use strict";function r(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&n(r)===n(Object)}t.__esModule=!0,t["default"]=r;var n=function(e){return Function.prototype.toString.call(e)};e.exports=t["default"]},function(e,t,r){(function(n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){var r=t&&t.type,n=r&&'"'+r.toString()+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+n+". To ignore an action, you must explicitly return the previous state."}function o(e,t,r){var n=Object.keys(t),a=r&&r.type===l.ActionTypes.INIT?"initialState argument passed to createStore":"previous state received by the reducer";if(0===n.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!d["default"](e))return"The "+a+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+n.join('", "')+'"');var s=Object.keys(e).filter(function(e){return n.indexOf(e)<0});return s.length>0?"Unexpected "+(s.length>1?"keys":"key")+" "+('"'+s.join('", "')+'" found in '+a+". ")+"Expected to find one of the known reducer keys instead: "+('"'+n.join('", "')+'". Unexpected keys will be ignored.'):void 0}function i(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:l.ActionTypes.INIT});if("undefined"==typeof n)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var a="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof r(void 0,{type:a}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+l.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function u(e){var t,r=m["default"](e,function(e){return"function"==typeof e});try{i(r)}catch(a){t=a}var u=p["default"](r,function(){return void 0});return function(e,a){if(void 0===e&&(e=u),t)throw t;var i=!1,l=p["default"](r,function(t,r){var n=e[r],o=t(n,a);if("undefined"==typeof o){var u=s(r,a);throw new Error(u)}return i=i||o!==n,o});if("production"!==n.env.NODE_ENV){var c=o(e,l,a);c&&console.error(c)}return i?l:e}}t.__esModule=!0,t["default"]=u;var l=r(4),c=r(5),d=a(c),f=r(8),p=a(f),h=r(9),m=a(h);e.exports=t["default"]}).call(t,r(7))},function(e,t){function r(){l=!1,o.length?u=o.concat(u):c=-1,u.length&&n()}function n(){if(!l){var e=setTimeout(r);l=!0;for(var t=u.length;t;){for(o=u,u=[];++c<t;)o&&o[c].run();c=-1,t=u.length}o=null,l=!1,clearTimeout(e)}}function a(e,t){this.fun=e,this.array=t}function s(){}var o,i=e.exports={},u=[],l=!1,c=-1;i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new a(e,t)),1!==u.length||l||setTimeout(n,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=s,i.addListener=s,i.once=s,i.off=s,i.removeListener=s,i.removeAllListeners=s,i.emit=s,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){"use strict";function r(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(e[n],n),r},{})}t.__esModule=!0,t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";function r(e,t){return Object.keys(e).reduce(function(r,n){return t(e[n])&&(r[n]=e[n]),r},{})}t.__esModule=!0,t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return function(){return t(e.apply(void 0,arguments))}}function s(e,t){if("function"==typeof e)return a(e,t);if("object"!=typeof e||null===e||void 0===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');return i["default"](e,function(e){return a(e,t)})}t.__esModule=!0,t["default"]=s;var o=r(8),i=n(o);e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return function(e){return function(r,n){var a=e(r,n),o=a.dispatch,u=[],l={getState:a.getState,dispatch:function(e){return o(e)}};return u=t.map(function(e){return e(l)}),o=i["default"].apply(void 0,u)(a.dispatch),s({},a,{dispatch:o})}}}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t["default"]=a;var o=r(12),i=n(o);e.exports=t["default"]},function(e,t){"use strict";function r(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}t.__esModule=!0,t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e["default"]:e}t.__esModule=!0;var a=r(14);t.Provider=n(a);var s=r(16);t.connect=n(s)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(){c||(c=!0,console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0;var i=r(1),u=r(15),l=n(u),c=!1,d=function(e){function t(r,n){a(this,t),e.call(this,r,n),this.store=r.store}return s(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.componentWillReceiveProps=function(e){var t=this.store,r=e.store;t!==r&&o()},t.prototype.render=function(){var e=this.props.children;return i.Children.only(e)},t}(i.Component);t["default"]=d,d.propTypes={store:l["default"].isRequired,children:i.PropTypes.element.isRequired},d.childContextTypes={store:l["default"].isRequired},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(1);t["default"]=n.PropTypes.shape({subscribe:n.PropTypes.func.isRequired,dispatch:n.PropTypes.func.isRequired,getState:n.PropTypes.func.isRequired}),e.exports=t["default"]},function(e,t,r){(function(n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.displayName||e.name||"Component"}function u(e,t,r){function a(e,t){var r=e.getState(),n=C?E(r,t):E(r);return P["default"](g["default"](n),"`mapStateToProps` must return an object. Instead received %s.",n),n}function u(e,t){var r=e.dispatch,n=A?_(r,t):_(r);return P["default"](g["default"](n),"`mapDispatchToProps` must return an object. Instead received %s.",n),n}function f(e,t,r){var n=O(e,t,r);return P["default"](g["default"](n),"`mergeProps` must return an object. Instead received %s.",n),n}var h=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],v=Boolean(e),E=e||S,_=g["default"](t)?y["default"](t):t||w,O=r||R,C=E.length>1,A=_.length>1,x=h.pure,j=void 0===x?!0:x,N=h.withRef,k=void 0===N?!1:N,L=M++;return function(e){var t=function(t){function r(e,n){s(this,r),t.call(this,e,n),this.version=L,this.store=e.store||n.store,P["default"](this.store,'Could not find "store" in either the context or '+('props of "'+this.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+this.constructor.displayName+'".')),this.stateProps=a(this.store,e),this.dispatchProps=u(this.store,e),this.state={storeState:null},this.updateState()}return o(r,t),r.prototype.shouldComponentUpdate=function(e,t){if(!j)return this.updateStateProps(e),this.updateDispatchProps(e),this.updateState(e),!0;var r=t.storeState!==this.state.storeState,n=!m["default"](e,this.props),a=!1,s=!1;return(r||n&&C)&&(a=this.updateStateProps(e)),n&&A&&(s=this.updateDispatchProps(e)),n||a||s?(this.updateState(e),!0):!1},r.prototype.computeNextState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];return f(this.stateProps,this.dispatchProps,e)},r.prototype.updateStateProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=a(this.store,e);return m["default"](t,this.stateProps)?!1:(this.stateProps=t,!0)},r.prototype.updateDispatchProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=u(this.store,e);return m["default"](t,this.dispatchProps)?!1:(this.dispatchProps=t,!0)},r.prototype.updateState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.nextState=this.computeNextState(e)},r.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},r.prototype.trySubscribe=function(){v&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},r.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},r.prototype.componentDidMount=function(){this.trySubscribe()},r.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},r.prototype.handleChange=function(){this.unsubscribe&&this.setState({storeState:this.store.getState()})},r.prototype.getWrappedInstance=function(){return P["default"](k,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},r.prototype.render=function(){var t=k?"wrappedInstance":null;return d["default"].createElement(e,l({},this.nextState,{ref:t}))},r}(c.Component);return t.displayName="Connect("+i(e)+")",t.WrappedComponent=e,t.contextTypes={store:p["default"]},t.propTypes={store:p["default"]},"production"!==n.env.NODE_ENV&&(t.prototype.componentWillUpdate=function(){this.version!==L&&(this.version=L,this.trySubscribe(),this.updateStateProps(),this.updateDispatchProps(),this.updateState())}),b["default"](t,e)}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t["default"]=u;var c=r(1),d=a(c),f=r(15),p=a(f),h=r(17),m=a(h),v=r(18),g=a(v),E=r(19),y=a(E),_=r(20),b=a(_),O=r(21),P=a(O),S=function(){return{}},w=function(e){return{dispatch:e}},R=function(e,t,r){return l({},r,e,t)},M=0;e.exports=t["default"]}).call(t,r(7))},function(e,t){"use strict";function r(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=Object.prototype.hasOwnProperty,s=0;s<r.length;s++)if(!a.call(t,r[s])||e[r[s]]!==t[r[s]])return!1;return!0}t.__esModule=!0,t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";function r(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&n(r)===n(Object)}t.__esModule=!0,t["default"]=r;var n=function(e){return Function.prototype.toString.call(e)};e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return function(t){return a.bindActionCreators(e,t)}}t.__esModule=!0,t["default"]=n;var a=r(3);e.exports=t["default"]},function(e,t){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var a=Object.getOwnPropertyNames(t),s=0;s<a.length;++s)r[a[s]]||n[a[s]]||(e[a[s]]=t[a[s]]);return e}},function(e,t,r){(function(t){"use strict";var r=function(e,r,n,a,s,o,i,u){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===r)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,a,s,o,i,u],d=0;l=new Error("Invariant Violation: "+r.replace(/%s/g,function(){return c[d++]}))}throw l.framesToPop=1,l}};e.exports=r}).call(t,r(7))},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function s(e){return{show:e.show,frame:e.frame,pages:e.page.pages,pageIndex:e.page.pageIndex,selector:e.selector,preview:e.preview}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=a(o),u=r(3),l=r(13),c=r(23),d=n(c),f=r(25),p=a(f),h=r(34),m=a(h),v=r(40),g=a(v),E=r(42),y=a(E),_=i["default"].createClass({displayName:"Forager",render:function(){var e=this.props,t=e.pages,r=e.pageIndex,n=e.show,a=e.dispatch,s=e.frame,o=e.selector,l=e.preview,c=t[r],f=(0,u.bindActionCreators)(d,a),h=["forager","no-select"];n||h.push("hidden");var v=l.visible?i["default"].createElement(y["default"],{page:c,close:f.hidePreview}):null,E="selector"===s.name?f.selectSelector:function(){};return i["default"].createElement("div",{className:h.join(" "),ref:"app"},i["default"].createElement(p["default"],{pages:t,index:r,actions:f}),i["default"].createElement("div",{className:"workspace"},i["default"].createElement(m["default"],{selector:o,frame:s,actions:f}),i["default"].createElement(g["default"],{page:c,selector:o,selectSelector:E})),v)},_makeNoSelect:function(){[].slice.call(this.refs.app.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})},componentDidMount:function(){this._makeNoSelect()},componentDidUpdate:function(){this._makeNoSelect()}});t["default"]=(0,l.connect)(s)(_)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.removeRule=t.saveRule=t.removeSelector=t.saveSelector=t.selectSelector=t.closeForager=t.showSpecFrame=t.showPartsFrame=t.showElementFrame=t.showRuleFrame=t.showSelectorFrame=t.hidePreview=t.showPreview=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.loadPage=void 0;var a=r(24),s=n(a);t.loadPage=function(e){return{type:s.LOAD_PAGE,index:e}},t.addPage=function(e){return{type:s.ADD_PAGE,page:e}},t.removePage=function(){return{type:s.REMOVE_PAGE}},t.renamePage=function(e){return{type:s.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:s.UPLOAD_PAGE}},t.showPreview=function(){return{type:s.SHOW_PREVIEW}},t.hidePreview=function(){return{type:s.HIDE_PREVIEW}},t.showSelectorFrame=function(){return{type:s.SHOW_SELECTOR_FRAME}},t.showRuleFrame=function(e){return{type:s.SHOW_RULE_FRAME,selector:e}},t.showElementFrame=function(){return{type:s.SHOW_ELEMENT_FRAME}},t.showPartsFrame=function(e){return{type:s.SHOW_PARTS_FRAME,parts:e}},t.showSpecFrame=function(e){return{type:s.SHOW_SPEC_FRAME,css:e}},t.closeForager=function(){return{type:s.CLOSE_FORAGER}},t.selectSelector=function(e){return{type:s.SELECT_SELECTOR,selectorID:e}},t.saveSelector=function(e,t){return{type:s.SAVE_SELECTOR,selector:e,parentID:t}},t.removeSelector=function(e){return{type:s.REMOVE_SELECTOR,selectorID:e}},t.saveRule=function(e){return{type:s.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:s.REMOVE_RULE,index:e}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOAD_PAGE="LOAD_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SHOW_PREVIEW="SHOW_PREVIEW",t.HIDE_PREVIEW="HIDE_PREVIEW",t.SHOW_SELECTOR_FRAME="SHOW_SELECTOR_FRAME",t.SHOW_RULE_FRAME="SHOW_RULE_FRAME",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_PARTS_FRAME="SHOW_PARTS_FRAME",t.SHOW_SPEC_FRAME="SHOW_SPEC_FRAME",t.CLOSE_FORAGER="CLOSE_FORAGER",t.SHOW_FORAGER="SHOW_FORAGER",t.SELECT_SELECTOR="SELECT_SELECTOR",t.SAVE_SELECTOR="SAVE_SELECTOR",t.REMOVE_SELECTOR="REMOVE_SELECTOR",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(26),i=r(27);t["default"]=s["default"].createClass({displayName:"Controls",render:function(){var e=this.props,t=e.pages,r=e.index,n=e.actions;return s["default"].createElement("div",{className:"controls"},s["default"].createElement(u,{pages:t,index:r,actions:n}),s["default"].createElement(l,{actions:n}))}});var u=s["default"].createClass({displayName:"PageControls",getName:function(){var e=window.prompt('Page Name:\nCannot contain the following characters: < > : "  / | ? * ');return(0,i.legalName)(e)?e:void console.error("bad name",e)},addHandler:function(e){e.preventDefault();var t=this.getName();if(void 0!==t){var r=(0,i.createPage)(t);(0,i.setupPage)(r),this.props.actions.addPage(r)}},renameHandler:function(e){e.preventDefault();var t=this.props.pages[this.props.index];if(void 0!==t){var r=this.getName();void 0!==r&&r!==t.name&&this.props.actions.renamePage(r)}},deleteHandler:function(e){e.preventDefault(),this.props.actions.removePage()},uploadHandler:function(e){e.preventDefault(),this.props.actions.uploadPage()},previewHandler:function(e){e.preventDefault(),this.props.actions.showPreview()},loadPage:function(e){this.props.actions.loadPage(e.target.value)},render:function(){var e=this.props,t=e.pages,r=e.index,n=t.map(function(e,t){var r=void 0===e?"":e.name;return s["default"].createElement("option",{key:t,value:t},r)});return s["default"].createElement("div",{className:"page-controls"},"Page: ",s["default"].createElement("select",{value:r,onChange:this.loadPage},n),s["default"].createElement(o.PosButton,{click:this.addHandler,text:"Add"}),s["default"].createElement(o.PosButton,{click:this.renameHandler,text:"Rename"}),s["default"].createElement(o.NegButton,{click:this.deleteHandler,text:"Delete"}),s["default"].createElement(o.PosButton,{click:this.uploadHandler,text:"Upload"}),s["default"].createElement(o.PosButton,{click:this.previewHandler,text:"Preview"}))}}),l=s["default"].createClass({displayName:"GeneralControls",handleClose:function(e){this.props.actions.closeForager()},render:function(){return s["default"].createElement("div",{className:"app-controls"},s["default"].createElement(o.NeutralButton,{click:this.handleClose,text:String.fromCharCode(215)}))}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PosButton=React.createClass({displayName:"PosButton",render:function(){var e=this.props,t=e.text,r=e.click;return React.createElement("button",{className:"pos",onClick:r},t)}}),t.NegButton=React.createClass({displayName:"NegButton",render:function(){var e=this.props,t=e.text,r=e.click;return React.createElement("button",{className:"neg",onClick:r},t)}}),t.NeutralButton=React.createClass({displayName:"NeutralButton",render:function(){var e=this.props,t=e.text,r=e.click;return React.createElement("button",{className:"neutral",onClick:r},t)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);Object.defineProperty(t,"legalName",{enumerable:!0,get:function(){return n.legalName}}),Object.defineProperty(t,"abbreviate",{enumerable:!0,get:function(){return n.abbreviate}});var a=r(29);Object.defineProperty(t,"attributes",{enumerable:!0,get:function(){return a.attributes}});var s=r(30);Object.defineProperty(t,"highlight",{enumerable:!0,get:function(){return s.highlight}}),Object.defineProperty(t,"unhighlight",{enumerable:!0,get:function(){return s.unhighlight}}),Object.defineProperty(t,"iHighlight",{enumerable:!0,get:function(){return s.iHighlight}}),Object.defineProperty(t,"iUnhighlight",{enumerable:!0,get:function(){return s.iUnhighlight}});var o=r(31);Object.defineProperty(t,"createPage",{enumerable:!0,get:function(){return o.createPage}}),Object.defineProperty(t,"createSelector",{enumerable:!0,get:function(){return o.createSelector}}),Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return o.clone}}),Object.defineProperty(t,"clean",{enumerable:!0,get:function(){return o.clean}}),Object.defineProperty(t,"setupPage",{enumerable:!0,get:function(){return o.setupPage}});var i=r(32);Object.defineProperty(t,"select",{enumerable:!0,get:function(){return i.select}}),Object.defineProperty(t,"count",{enumerable:!0,get:function(){return i.count}}),Object.defineProperty(t,"parts",{enumerable:!0,get:function(){return i.parts}}),Object.defineProperty(t,"allSelect",{enumerable:!0,get:function(){return i.allSelect}});var u=r(33);Object.defineProperty(t,"preview",{enumerable:!0,get:function(){return u.preview}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.legalName=function(e){if(null===e||""===e)return!1;var t=/[<>:"\/\\\|\?\*]/;return null===e.match(t)},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var r,n,a=t-3,s=a/2;a%2===0?(r=s,n=s):(r=Math.ceil(s),n=Math.floor(s));var o=e.slice(0,r),i=0===n?"":e.slice(-n);return o+"..."+i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.attributes=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=Array.from(e.attributes).reduce(function(e,r){return t[r.name]?e:("class"===r.name&&(r.value=r.value.replace("current-selector","").trim()),""!==r.value&&e.push({name:r.name,value:r.value}),e)},[]),n=e.textContent.trim();return""!==n&&r.push({name:"text",value:n}),r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){[].slice.call(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){[].slice.call(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,r,n,a){[].slice.call(e).forEach(function(e){e.classList.add(t),e.addEventListener("mouseover",r,!1),e.addEventListener("mouseout",n,!1),e.addEventListener("click",a,!1)})},t.iUnhighlight=function(e,t,r,n){[].slice.call(document.getElementsByClassName(e)).forEach(function(a){a.classList.remove(e),a.removeEventListener("mouseover",t,!1),a.removeEventListener("mouseout",r,!1),a.removeEventListener("click",n,!1)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupPage=t.addChild=t.clean=t.clone=t.createSelector=t.createPage=void 0;var n=r(32),a=(t.createPage=function(e){return{name:e,selector:"body",spec:{type:"single",value:0},children:[],rules:[]}},t.createSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?"single":arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return{selector:e,spec:{type:t,value:r},children:[],rules:[],optional:n}},t.clone=function s(e){return Object.assign({},{id:e.id,selector:e.selector,spec:Object.assign({},e.spec),children:e.children.map(function(e){return s(e)}),rules:e.rules.map(function(e){return Object.assign({},e)}),elements:e.elements||[]})},t.clean=function(e){return Object.assign({},{name:e.name},a(e))},function o(e){return Object.assign({},{selector:e.selector,spec:Object.assign({},e.spec),children:e.children.map(function(e){return o(e)}),rules:e.rules.map(function(e){return Object.assign({},e)})})});t.addChild=function i(e,t,r){if(e.id===t)return e.children.push(r),!0;var n=e.children.some(function(e){i(e,t,r)});return n},t.setupPage=function(e){if(void 0!==e){var t=0,r=function a(e,r){e.id=t++,e.elements=(0,n.select)(r,e.selector,e.spec),e.children.forEach(function(t){a(t,e.elements)})};r(e,[document]),e.nextID=t}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.select=function(e,t,r){var n=(t||"*")+":not(.no-select)",a=r&&"single"===r.type?r.value:void 0,s=function(e){return void 0!==a?void 0!==e[a]?[e[a]]:[]:[].slice.call(e)};return[].slice.call(e).reduce(function(e,t){var r=t.querySelectorAll(n);return e.concat(s(r))},[])},t.count=function(e,t,r){var n=(t||"*")+":not(.no-select)",a=r&&"single"===r.type?r.value:void 0,s=function(e){return void 0!==a?void 0!==e[a]?1:0:e.length};return[].slice.call(e).reduce(function(e,t){var r=t.querySelectorAll(n),a=s(r);return e>a?e:a},0)},t.parts=function(e){var t=[],r=["forager-highlight","query-check","selectable-element","current-selector"],n=function(e){return!t.some(function(t){return t===e})},a=function(e){return!r.some(function(t){return t===e})},s=[],o=e.tagName.toLowerCase();return n(o)?(s.push(o),""!==e.id&&s.push("#"+e.id),[].slice.call(e.classList).forEach(function(e){a(e)&&s.push("."+e)}),s):[]},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.preview=function(e){var t=function(e,t){var n=t.querySelectorAll(e.selector),a=e.spec.value;switch(e.spec.type){case"single":var s=n[a];if(!s)return;return r(e,s);case"all":var o=Array.from(n).map(function(t){return r(e,t)}).filter(function(e){return void 0!==e}),i={};return i[a]=o,i}},r=function(e,t){var r=o(e.rules,t),a=n(e.children,t);if(a){for(var s in a)r[s]=a[s];return r}},n=function(e,r){var n={};return e.some(function(e){var a=t(e,r);if(!a&&!e.optional)return n=void 0,!0;for(var s in a)n[s]=a[s];return!1}),n},a=/\d+/,s=/\d+(\.\d+)?/,o=function(e,t){var r={};return e.forEach(function(e){var n,o;if("text"===e.attr)n=t.textContent.replace(/\s+/g," ");else{var i=t.getAttribute(e.attr);n=i||""}switch(e.type){case"int":o=n.match(a),n=null!==o?parseInt(o[0],10):-1;break;case"float":o=n.match(s),n=null!==o?parseFloat(o[0]):-1}r[e.name]=n}),r};return void 0===e?"":t(e,document)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(35),i=n(o),u=r(36),l=n(u),c=r(37),d=n(c),f=r(38),p=n(f),h=r(39),m=n(h),v=r(27);t["default"]=s["default"].createClass({displayName:"Frames",cssSelector:"current-selector",_selectFrame:function(){var e=this.props,t=e.frame,r=e.selector,n=e.actions;switch(t.name){case"selector":return s["default"].createElement(i["default"],{selector:r,data:t.data,actions:n});case"rule":return s["default"].createElement(l["default"],{selector:r,data:t.data,actions:n});case"element":return s["default"].createElement(d["default"],{selector:r,data:t.data,actions:n});case"parts":return s["default"].createElement(p["default"],{selector:r,data:t.data,actions:n});case"spec":return s["default"].createElement(m["default"],{selector:r,data:t.data,actions:n});default:return null}},componentWillMount:function(){this.props.selector&&this._highlightParents(this.props.selector.elements)},componentWillReceiveProps:function(e){void 0!==e.selector&&e.selector!==this.props.selector&&this._highlightParents(e.selector.elements)},componentWillUnmount:function(){(0,v.unhighlight)(this.cssSelector)},_highlightParents:function(e){(0,v.unhighlight)(this.cssSelector),(0,v.highlight)(e,this.cssSelector)},render:function(){return s["default"].createElement("div",{className:"frames"},this._selectFrame())}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),o=n(s),i=r(26);t["default"]=o["default"].createClass({displayName:"SelectorFrame",addChild:function(e){this.props.actions.showElementFrame()},addRule:function(e){this.props.actions.showRuleFrame()},remove:function(e){this.props.actions.removeSelector(this.props.selector.id)},render:function(){if(void 0===this.props.selector)return null;var e=this.props.selector,t=e.selector,r=(e.children,e.rules),n=e.spec,a=n.type,s=n.value,l="";"single"===a?l="Select element at index "+s:"all"===a&&(l='Select all elements, save as "'+s+'"');var c=r.length?o["default"].createElement(u,{rules:r,actions:this.props.actions
}):o["default"].createElement("p",null,"No Rules");return o["default"].createElement("div",{className:"frame"},"Selector Frame",o["default"].createElement("div",null,o["default"].createElement("h2",null,t),o["default"].createElement("p",null,l),c,o["default"].createElement(i.PosButton,{text:"Add Child",click:this.addChild}),o["default"].createElement(i.PosButton,{text:"Add Rule",click:this.addRule}),o["default"].createElement(i.NegButton,{text:"Remove",click:this.remove})))}});var u=o["default"].createClass({displayName:"RuleList",render:function(){var e=this.props,t=e.rules,r=e.actions,n=r.removeRule,s=t.map(function(e,t){return o["default"].createElement(l,a({key:t,index:t,remove:n},e))});return o["default"].createElement("ul",null,s)}}),l=o["default"].createClass({displayName:"Rule",handleClick:function(e){e.preventDefault(),this.props.remove(this.props.index)},render:function(){var e=this.props,t=e.name,r=e.attr,n=e.type;return o["default"].createElement("li",null,o["default"].createElement("span",{className:"name"},t)," <",r,"> (",n,")",o["default"].createElement("button",{onClick:this.handleClick},String.fromCharCode(215)))}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(26),i=r(27);t["default"]=s["default"].createClass({displayName:"RuleFrame",getInitialState:function(){return{name:"",type:"string",attr:"",elementIndex:0}},setName:function(e){this.setState({name:e.target.value})},setType:function(e){this.setState({type:e.target.value})},setAttr:function(e){this.setState({attr:e})},saveHandler:function(e){e.preventDefault();var t=this.state,r=t.name,n=t.type,a=t.attr;""!==r&&""!==a&&this.props.actions.saveRule({name:r,type:n,attr:a})},cancelHandler:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},render:function(){var e=this,t=this.props,r=t.selector,n=(t.actions,["string","int","float"].map(function(t,r){return s["default"].createElement("label",{key:r},t,": ",s["default"].createElement("input",{type:"radio",name:"rule-type",value:t,checked:t===e.state.type,onChange:e.setType}))}));return s["default"].createElement("div",{className:"frame rule-form"},s["default"].createElement("div",null,s["default"].createElement("label",null,"Name: ",s["default"].createElement("input",{type:"text",value:this.state.name,onChange:this.setName}))),s["default"].createElement("div",null,"Type: ",n),s["default"].createElement(u,{elements:r.elements,attr:this.state.attr,setAttr:this.setAttr}),s["default"].createElement("div",{className:"button"},s["default"].createElement(o.PosButton,{text:"Save",click:this.saveHandler}),s["default"].createElement(o.NegButton,{text:"Cancel",click:this.cancelHandler})))}});var u=s["default"].createClass({displayName:"AttrChoices",getInitialState:function(){return{index:0}},selectAttr:function(e){this.props.setAttr(e.target.value)},elementAttributes:function(e){var t=this,r=this.props.attr;return(0,i.attributes)(e).map(function(e,n){return s["default"].createElement("li",{key:n},s["default"].createElement("label",null,s["default"].createElement("input",{type:"radio",name:"rule-attr",value:e.name,checked:e.name===r,onChange:t.selectAttr}),e.name," - ",e.value))})},render:function(){var e=this.props,t=e.elements,r=(e.attr,this.elementAttributes(t[this.state.index]));return s["default"].createElement("ul",null,r)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(26),i=r(27);t["default"]=s["default"].createClass({displayName:"ElementFrame",highlight:"selectable-element",events:{over:function(e){e.target.classList.add("forager-highlight")},out:function(e){e.target.classList.remove("forager-highlight")},click:function(e){e.preventDefault(),e.stopPropagation();var t=[].slice.call(e.path).filter(function(e){return e.classList&&e.classList.contains("selectable-element")}).reverse().map(function(e){return(0,i.parts)(e)});this.setState({selectors:t})}},getInitialState:function(){return{checked:void 0,selectors:[]}},setRadio:function(e){this.setState({checked:e})},saveHandler:function(e){e.preventDefault();var t=this.state.selectors[this.state.checked];this.props.actions.showPartsFrame(t)},cancelHandler:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},render:function(){var e=this,t=this.props,r=(t.selector,t.data,this.state),n=r.selectors,a=r.checked,i=n.map(function(t,r){return s["default"].createElement(u,{key:r,selector:t,index:r,checked:r===a,select:e.setRadio})});return s["default"].createElement("div",{className:"frame element-form"},s["default"].createElement("div",{className:"element-selectors"},i),s["default"].createElement("div",{className:"buttons"},s["default"].createElement(o.PosButton,{text:"Save",click:this.saveHandler}),s["default"].createElement(o.NegButton,{text:"Cancel",click:this.cancelHandler})))},componentWillMount:function(){var e=this.props.selector;this._setupPageEvents(e.elements)},componentWillReceiveNewProps:function(e){var t=e.selector;this._setupPageEvents(t.elements)},componentWillUnmount:function(){this._removePageEvents()},_setupPageEvents:function(e){var t=(0,i.select)(e),r=this.events.click.bind(this);this.boundClick=r,(0,i.iHighlight)(t,this.highlight,this.events.over,this.events.out,r)},_removePageEvents:function(){(0,i.iUnhighlight)(this.highlight,this.events.over,this.events.out,this.boundClick),delete this.boundClick}});var u=s["default"].createClass({displayName:"SelectorRadio",setRadio:function(e){this.props.select(this.props.index)},render:function(){var e=this.props,t=e.selector,r=e.checked,n=r?"selected":"";return s["default"].createElement("label",{className:n},t,s["default"].createElement("input",{type:"radio",name:"css-selector",checked:r,onChange:this.setRadio}))}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(26),i=r(27);t["default"]=s["default"].createClass({displayName:"PartsFrame",previewClass:"query-check",getInitialState:function(){return{parts:[],selector:""}},saveHandler:function(e){e.preventDefault();var t=this.state.selector;""!==t&&this.props.actions.showSpecFrame(t)},cancelHander:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},toggleRadio:function(e){var t=e.target.value,r=this.state.parts;r[t].checked=!r[t].checked;var n=r.reduce(function(e,t){return t.checked&&(e+=t.name),e},"");this._setupHighlights(n),this.setState({parts:r,selector:n})},componentWillMount:function(){this._partsArray(this.props.data.parts)},componentWillReceiveProps:function(e){this._partsArray(e.data.parts)},componentWillUnmount:function(){this._removeHighlights()},_partsArray:function(e){var t=e.map(function(e){return{name:e,checked:!0}}),r=e.join("");this._setupHighlights(r),this.setState({parts:t,selector:r})},render:function(){var e=this,t=this.state.parts.map(function(t,r){var n=t.name,a=t.checked;return s["default"].createElement("label",{key:r},n,s["default"].createElement("input",{type:"checkbox",name:"selector-part",value:r,checked:a,onChange:e.toggleRadio}))});return s["default"].createElement("div",{className:"frame parts-form"},t,s["default"].createElement("div",{className:"buttons"},s["default"].createElement(o.PosButton,{text:"Save",click:this.saveHandler}),s["default"].createElement(o.NegButton,{text:"Cancel",click:this.cancelHander})))},_setupHighlights:function(e){if((0,i.unhighlight)(this.previewClass),""!==e){var t=(0,i.select)(this.props.selector.elements,e);(0,i.highlight)(t,this.previewClass)}},_removeHighlights:function(){(0,i.unhighlight)(this.previewClass)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(26),i=r(27);t["default"]=s["default"].createClass({displayName:"SpecFrame",getInitialState:function(){return{type:"single",value:0,optional:!1}},saveHandler:function(e){e.preventDefault();var t=this.state,r=t.type,n=t.value,a=t.optional,s=(0,i.createSelector)(this.props.data.css,r,n,a);if(s.elements=(0,i.select)(this.props.selector.elements,s.selector,s.spec),(0,i.allSelect)(s.elements)){var o=(0,i.createSelector)("option","all","option",!1);o.elements=(0,i.select)(s.elements,o.selector,o.spec),s.children.push(o)}this.props.actions.saveSelector(s,this.props.selector.id)},cancelHandler:function(e){e.preventDefault(),this.props.actions.showSelectorFrame()},setSpec:function(e,t){this.setState({type:e,value:t})},toggleOptional:function(e){this.setState({optional:e.target.checked})},render:function(){var e=this.props,t=e.selector,r=e.data,n=r.css,a=(0,i.count)(t.elements,n);return s["default"].createElement("div",{className:"frame spec-form"},n,s["default"].createElement(u,{count:a,setSpec:this.setSpec}),s["default"].createElement("div",null,s["default"].createElement("label",null,"Optional: ",s["default"].createElement("input",{type:"checkbox",checked:this.state.optional,onChange:this.toggleOptional}))),s["default"].createElement("div",{className:"buttons"},s["default"].createElement(o.PosButton,{text:"Save",click:this.saveHandler}),s["default"].createElement(o.NegButton,{text:"Cancel",click:this.cancelHandler})))}});var u=s["default"].createClass({displayName:"SpecForm",getInitialState:function(){return{type:"single",value:0}},setType:function(e){var t=e.target.value,r=void 0;"single"===t?r=0:"all"===t&&(r=""),this.props.setSpec(t,r),this.setState({type:t,value:r})},setValue:function(e){var t=e.target.value;"single"===this.state.type&&(t=parseInt(t,10)),this.setSpec(this.state.type,t),this.setState({value:t})},setSpec:function(e,t){this.props.setSpec(e,t)},_singleValue:function(){for(var e=this.state.value,t=[],r=0;r<this.props.count;r++)t.push(s["default"].createElement("option",{key:r,value:r},r));return s["default"].createElement("select",{value:e,onChange:this.setValue},t)},_allValue:function(){return s["default"].createElement("div",null,"Name: ",s["default"].createElement("input",{type:"text",value:this.state.value,onChange:this.setValue}))},render:function(){var e="single"===this.state.type?this._singleValue():this._allValue();return s["default"].createElement("div",null,s["default"].createElement("div",null,"Choose Type:",s["default"].createElement("label",null,"single ",s["default"].createElement("input",{type:"radio",name:"type",value:"single",checked:"single"===this.state.type,onChange:this.setType})),s["default"].createElement("label",null,"all ",s["default"].createElement("input",{type:"radio",name:"type",value:"all",checked:"all"===this.state.type,onChange:this.setType}))),e)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),o=n(s),i=r(41),u=n(i),l=r(27);t["default"]=o["default"].createClass({displayName:"Graph",getDefaultProps:function(){return{selectPage:function(){},width:300,height:150,margin:{top:25,right:25,bottom:25,left:50}}},getInitialState:function(){return{diagonal:u["default"].svg.diagonal().projection(function(e){return[e.y,e.x]})}},componentWillMount:function(){this._makeTreeLayout(this.props.width,this.props.height)},componentWillReceiveProps:function(e){var t=e.width,r=e.height;(t!==this.props.width||r!==this.props.height)&&this._makeTreeLayout(t,r)},_makeTreeLayout:function(e,t){var r=u["default"].layout.tree().size([t,e]);this.setState({tree:r})},_makeNodes:function(){var e=this.props,t=e.page,r=e.selector,n=e.selectSelector;if(void 0===t)return null;var s=this.state,i=s.tree,u=s.diagonal,d=(0,l.clone)(t),f=i.nodes(d),p=i.links(f),h=p.map(function(e,t){return o["default"].createElement("path",{key:t,className:"link",d:u(e)})}),m=f.map(function(e,t){var s=!1;return r&&e.id===r.id&&(s=!0),o["default"].createElement(c,a({key:t,current:s,select:n},e))});return o["default"].createElement("g",null,h,m)},render:function(){var e=this.props,t=e.width,r=e.height,n=e.margin,a=this._makeNodes();return o["default"].createElement("div",{className:"graph"},o["default"].createElement("svg",{width:n.left+t+n.right,height:n.top+r+n.bottom},o["default"].createElement("g",{transform:"translate("+n.left+","+n.top+")"},a)))}});var c=o["default"].createClass({displayName:"Node",hoverClass:"saved-preview",handleClick:function(e){e.preventDefault(),this.props.select(this.props.id)},handleMouseover:function(e){(0,l.highlight)(this.props.elements,this.hoverClass)},handleMouseout:function(e){(0,l.unhighlight)(this.hoverClass)},specText:function(){var e=this.props,t=e.selector,r=e.spec,n="";if(!r)return n;switch(r.type){case"single":n=t+"["+r.value+"]";break;case"all":n="["+t+"]"}return(0,l.abbreviate)(n,15)},render:function(){var e=this.props,t=e.rules,r=e.children,n=r&&r.length,a=t&&t.length,s=this.specText(),i=t&&t.length?o["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):o["default"].createElement("circle",{r:"3"}),u=["node"];return this.props.current&&u.push("current"),a||n||u.push("empty"),o["default"].createElement("g",{className:u.join(" "),transform:"translate("+this.props.y+","+this.props.x+")",onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout},o["default"].createElement("text",{y:"5",dx:"-5"},s),i)}})},function(e,t){e.exports=d3},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=n(a),o=r(26),i=r(27);t["default"]=s["default"].createClass({displayName:"Preview",clickHandler:function(e){e.preventDefault(),this.props.close()},render:function(){var e=this.props.page,t=JSON.stringify((0,i.preview)(e),null,2);return s["default"].createElement("div",{className:"preview-holder"},s["default"].createElement("div",{className:"preview-bg",onClick:this.clickHandler}),s["default"].createElement("div",{className:"preview"},s["default"].createElement("pre",null,t),s["default"].createElement(o.NeutralButton,{text:"Close",click:this.clickHandler})))}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=arguments.length<=0||void 0===arguments[0]?m:arguments[0],t=arguments[1];switch(t.type){default:return{frame:(0,o["default"])(e.frame,t),show:(0,u["default"])(e.show,t),page:(0,c["default"])(e.page,t),selector:(0,f["default"])(e.selector,t),preview:(0,h["default"])(e.preview,t)}}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(44),o=n(s),i=r(45),u=n(i),l=r(46),c=n(l),d=r(47),f=n(d),p=r(48),h=n(p),m={show:!0,page:{pages:[void 0],pageIndex:0},frame:{name:"selector",data:{}},preview:{visible:!1},selector:void 0};t["default"]=a},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments[1];switch(t.type){case o.LOAD_PAGE:case o.REMOVE_SELECTOR:case o.SAVE_SELECTOR:case o.SAVE_RULE:case o.REMOVE_RULE:case o.SHOW_SELECTOR_FRAME:return Object.assign({},e,{name:"selector",data:{}});case o.SHOW_RULE_FRAME:return Object.assign({},e,{name:"rule",data:{}});case o.SHOW_ELEMENT_FRAME:return Object.assign({},e,{name:"element",data:{}});case o.SHOW_PARTS_FRAME:return Object.assign({},e,{name:"parts",data:{parts:t.parts}});case o.SHOW_SPEC_FRAME:return Object.assign({},e,{name:"spec",data:{css:t.css}});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=r(24),o=n(s)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments[1];switch(t.type){case o.CLOSE_FORAGER:return!1;case o.SHOW_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=r(24),o=n(s)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case i.LOAD_PAGE:var r=e.pages.length,n=parseInt(t.index,10);return(0>n||n>=r)&&(n=0),Object.assign({},e,{pageIndex:n});case i.ADD_PAGE:var s=e.pages,o=[].concat(a(s),[t.page]);return Object.assign({},e,{pages:o,pageIndex:o.length-1});case i.REMOVE_PAGE:var s=e.pages,u=e.pageIndex;return 0===u?e:Object.assign({},e,{pages:[].concat(a(s.slice(0,u)),a(s.slice(u+1))),pageIndex:0});case i.RENAME_PAGE:var s=e.pages,u=e.pageIndex;if(0===u)return e;var o=s.slice();return o[u]=Object.assign({},o[u],{name:t.name}),Object.assign({},e,{pages:o});case i.SAVE_SELECTOR:var s=e.pages,u=e.pageIndex,l=s[u],c=t.selector,d=t.parentID;c.id=l.nextID++,l.nextID++,0!==c.children.length&&c.children.forEach(function(e){e.id=l.nextID++});var f=function p(e){if(e.id===d)return e.children.push(c),!0;var t=e.children.some(function(e){return p(e)});return t};return f(l),Object.assign({},e,{pages:[].concat(a(s.slice(0,u)),[l],a(s.slice(u+1)))});case i.REMOVE_SELECTOR:var s=e.pages,u=e.pageIndex,l=s[u],f=function h(e){var r=e.children.length;return e.children=e.children.filter(function(e){return e.id!==t.selectorID}),e.children.length<r?!0:e.children.some(function(e){return h(e)})};return 0===t.selectorID?(l.children=[],l.rules=[]):f(l),Object.assign({},e,{pages:[].concat(a(s.slice(0,u)),[l],a(s.slice(u+1)))});case i.SAVE_RULE:case i.REMOVE_RULE:var s=e.pages,u=e.pageIndex,l=s[u];return Object.assign({},e,{pages:[].concat(a(s.slice(0,u)),[l],a(s.slice(u+1)))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s;var o=r(24),i=n(o)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){switch(t.type){case o.SELECT_SELECTOR:case o.SAVE_SELECTOR:return t.selector;case o.REMOVE_SELECTOR:case o.LOAD_PAGE:case o.ADD_PAGE:case o.REMOVE_PAGE:return void 0;case o.SAVE_RULE:return e.rules.push(t.rule),e;case o.REMOVE_RULE:e.rules;return e.rules.splice(t.index,1),e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=r(24),o=n(s)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case o.SHOW_PREVIEW:return Object.assign({},{visible:!0});case o.HIDE_PREVIEW:return Object.assign({},{visible:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=r(24),o=n(s)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(24),s=n(a);t["default"]=function(e){return function(t){return function(r){switch(r.type){case s.SELECT_SELECTOR:var n=e.getState(),a=r.selectorID,i=n.page.pages[n.page.pageIndex],u=o(i,a);r.selector=u}return t(r)}}};var o=function(e,t){var r=void 0,n=function a(e){return e.id===t?(r=e,!0):e.children.some(function(e){return a(e)})};return n(e),r}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(24),s=n(a),o=r(27);t["default"]=function(e){return function(t){return function(r){switch(r.type){case s.UPLOAD_PAGE:var n=e.getState(),a=n.page,i=a.pages,u=a.pageIndex,l=i[u],c={name:l.name,site:window.location.hostname,page:JSON.stringify((0,o.clean)(l))};chrome.runtime.sendMessage({type:"upload",data:c})}return t(r)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chromeLoad=t.chromeSave=void 0;var n=r(27),a=(t.chromeSave=function(e){var t=a(e);chrome.storage.local.get("sites",function(e){var r=window.location.hostname;e.sites[r]=t,chrome.storage.local.set({sites:e.sites})})},function(e){return e.filter(function(e){return void 0!==e}).map(function(e){return(0,n.clean)(e)})});t.chromeLoad=function(e){chrome.storage.local.get("sites",function(t){var r=window.location.hostname,a=t.sites[r]||[];a.forEach(function(e){return(0,n.setupPage)(e)}),e(a)})}}]);