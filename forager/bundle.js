webpackJsonp([0],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),l=r(a),o=n(30),i=r(o),u=n(163),c=n(187),s=r(c),f=n(201),d=n(249),p=n(239),h=n(250),v=r(h);document.body.classList.add("foraging"),(0,p.stripEvents)(document.body),Array.from(document.querySelectorAll("*")).forEach(function(e){(0,p.stripEvents)(e)}),document.querySelector(".forager-holder")?(document.body.classList.add("foraging"),window.restore()):!function(){var e=document.createElement("div");e.classList.add("forager-holder"),document.body.appendChild(e);var t=(0,v["default"])();(0,d.load)().then(function(n){t.dispatch((0,f.setPages)(n)),i["default"].render(l["default"].createElement(u.Provider,{store:t},l["default"].createElement(s["default"],null)),e)}),window.restore=function(){t.getState().show||t.dispatch((0,f.openForager)())}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(163),i=n(188),u=r(i),c=n(206),s=r(c),f=function(e){var t=e.show;return t?l["default"].createElement("div",{id:"forager"},l["default"].createElement(u["default"],null),l["default"].createElement(s["default"],null)):null};f.propTypes={show:l["default"].PropTypes.bool.isRequired},t["default"]=(0,o.connect)(function(e){return{show:e.show}})(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return window.prompt("Page Name:\nCannot contain the following characters: < > : ' \\ / | ? * ")}function u(e){return e.filter(function(e){return void 0!==e}).map(function(e){return e.name})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(163),p=n(189),h=n(190),v=r(h),m=n(191),y=(n(192),n(194)),g=n(195),E=n(201),b=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.addHandler=n.addHandler.bind(n),n.renameHandler=n.renameHandler.bind(n),n}return o(t,e),c(t,[{key:"addHandler",value:function(){var e=this.props,t=e.pages,n=e.showMessage,r=e.addPage,a=i();if((0,m.validName)(a,u(t))){var l=(0,y.createElement)("body");l=Object.assign({},l,{index:0,parent:null,matches:[document.body]}),r({name:a,elements:[l]})}else n('Cannot Use Name: "'+a+'"',5e3,-1)}},{key:"renameHandler",value:function(){var e=i(),t=this.props,n=t.pages,r=t.showMessage,a=t.renamePage;(0,m.validName)(e,u(n))?a(e):r('Cannot Use Name: "'+e+'"',5e3,-1)}},{key:"render",value:function(){var e=this.props,t=e.pages,n=e.currentIndex,r=e.selectPage,a=e.uploadPage,l=e.showPreview,o=e.refreshMatches,i=e.syncPages,u=e.removePage,c=e.closeForager,s=0!==n;return f["default"].createElement("div",{className:"topbar"},f["default"].createElement("div",{className:"controls"},f["default"].createElement("div",{className:"page-controls"},"Page ",f["default"].createElement("select",{value:n,onChange:function(e){r(parseInt(e.target.value,10))}},t.map(function(e,t){return f["default"].createElement("option",{key:t,value:t},void 0===e?"":e.name)})),f["default"].createElement(p.PosButton,{text:"Add Page",click:this.addHandler}),f["default"].createElement(p.NeutralButton,{text:"Refresh",title:"Refresh the list of matched elements",click:function(){o()},disabled:!s}),f["default"].createElement(p.PosButton,{text:"Preview",click:function(){l()},disabled:!s}),f["default"].createElement(p.NegButton,{text:"Delete",click:function(){u()},disabled:!s}),f["default"].createElement(p.PosButton,{text:"Rename",click:this.renameHandler,disabled:!s}),f["default"].createElement(p.PosButton,{text:"Upload",click:function(){a()},disabled:!s}),f["default"].createElement(p.PosButton,{text:"Sync Pages",click:function(){i()}})),f["default"].createElement("div",{className:"app-controls"},f["default"].createElement(p.NegButton,{text:String.fromCharCode(215),classes:["transparent"],click:function(){document.body.classList.remove("foraging"),c()}}))),f["default"].createElement(v["default"],null))}}]),t}(f["default"].Component);t["default"]=(0,d.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex;return{currentIndex:r,pages:n}},{addPage:E.addPage,selectPage:E.selectPage,closeForager:E.closeForager,showMessage:g.showMessage,syncPages:E.syncPages,refreshMatches:E.refreshMatches,renamePage:E.renamePage,removePage:E.removePage,uploadPage:E.uploadPage,showPreview:E.showPreview})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.NeutralButton=t.NegButton=t.PosButton=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),u=(t.PosButton=function(e){var t=e.classes,n=a(e,["classes"]);return i["default"].createElement(c,l({},n,{classes:["pos"].concat(t)}))},t.NegButton=function(e){var t=e.classes,n=a(e,["classes"]);return i["default"].createElement(c,l({},n,{classes:["neg"].concat(t)}))},function(){}),c=t.NeutralButton=function(e){var t=e.text,n=void 0===t?"":t,r=e.click,a=void 0===r?u:r,l=e.classes,o=void 0===l?[]:l,c=e.title,s=void 0===c?"":c,f=e.disabled,d=void 0===f?!1:f,p=e.type,h=void 0===p?"button":p;return i["default"].createElement("button",{className:o.join(" "),title:s,disabled:d,type:h,onClick:a},n)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.message,n=e.rating,r=["message"];return 0>n?r.push("neg"):n>0&&r.push("pos"),o["default"].createElement("div",{className:r.join(" ")},t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=r(l),i=n(163),u=function(e){var t=e.messages;return o["default"].createElement("div",{className:"message-board"},t.map(function(e){return o["default"].createElement(a,{key:e.id,message:e.message,rating:e.rating})}))};t["default"]=(0,i.connect)(function(e){return{messages:e.messages}})(u)},function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];switch(e.type){case"single":return r(e);case"all":return a(e);case"range":return l(e);default:return""}}function r(e){var t=e.index,n=void 0===t?0:t;return"captures element at index "+n}function a(e){var t=e.name,n=void 0===t?"":t;return'captures all elements, groups them as "'+n+'"'}function l(e){var t=e.name,n=void 0===t?"":t,r=e.low,a=e.high,l=null===a?"end":a;return"captures elements "+r+" to "+l+', groups them as "'+n+'"'}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=i(e,10),a="";if(!t)return r;switch(t.type){case"single":a=r+"["+t.index+"]";break;case"all":a="["+r+"]";break;case"range":a=r+"["+t.low+":"+(t.high||"end")+"]"}return n&&(a+="*"),a}Object.defineProperty(t,"__esModule",{value:!0}),t.describeSpec=n,t.shortElement=o;var i=(t.validName=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(null===e||""===e)return!1;var n=/[<>:'\/\\\|\?\*]/;return null!==e.match(n)?!1:t.every(function(t){return t!==e})},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var n=void 0,r=void 0,a=t-3,l=a/2;a%2===0?(n=l,r=l):(n=Math.ceil(l),r=Math.floor(l));var o=e.slice(0,n),i=0===r?"":e.slice(-r);return o+"..."+i})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=e.charCodeAt(0);return!(65>t||t>90&&97>t||t>122)}Object.defineProperty(t,"__esModule",{value:!0}),t.allSelect=t.parts=t.count=t.select=t.protect=void 0;var l=n(193),o=t.protect=function(e){var t=document.querySelectorAll(e);Array.from(t).forEach(function(e){e.classList.add("no-select"),Array.from(e.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})})};t.select=function(e,t,n,a){var l=(t||"*")+":not(.no-select)";n||(n={type:"all"}),void 0!==a&&""!==a&&o(a);var i=Array.from(e).reduce(function(e,t){var r=t.querySelectorAll(l),a=n,o=a.type,i=[];switch(o){case"single":var u=n.index;i=void 0!==r[u]?[r[u]]:[];break;case"all":i=Array.from(r);break;case"range":var c=n.low,s=n.high||void 0;i=Array.from(r).slice(c,s)}return e.concat(i)},[]);return[].concat(r(new Set(i)))},t.count=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{type:"all"}:arguments[2],r=(t||"*")+":not(.no-select)";return Array.from(e).reduce(function(e,t){var a=t.querySelectorAll(r),l=0;switch(n.type){case"single":var o=n.index;l=void 0!==a[o]?1:0;break;case"all":l=a.length;break;case"range":var i=n.low,u=n.high;l=Array.from(a).slice(i,u||void 0).length}return e>l?e:l},0)},t.parts=function(e){var t=[l.currentSelector,l.potentialSelector,l.queryCheck,l.hoverClass,l.savedPreview],n=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*/,r=function(e){return!t.some(function(t){return t===e})&&n.test(e)},o=[],i=e.tagName.toLowerCase();return o.push(i),""!==e.id&&a(e.id)&&o.push("#"+e.id),Array.from(e.classList).forEach(function(e){r(e)&&o.push("."+e)}),o},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.currentSelector="current-element",t.potentialSelector="selectable-element",t.queryCheck="query-check",t.hoverClass="forager-highlight",t.savedPreview="saved-preview"},function(e,t){"use strict";function n(e,t){function n(t){return null===t?null:void 0!==t.spec.name||null===t.parent?t.index:n(e[t.parent])}var a=n(e[t]);return r(e,a,!0)}function r(e,t,n){var a=e[t],l=[];return void 0===a?[]:(n||void 0===a.spec.name?(a.rules.forEach(function(e){l.push(e.name)}),a.childIndices.forEach(function(t){var n=e[t];l=l.concat(r(e,n.index,!1))})):l.push(a.spec.name),l)}Object.defineProperty(t,"__esModule",{value:!0}),t.levelNames=n;var a=(t.createElement=function(e){var t=arguments.length<=1||void 0===arguments[1]?{type:"single",index:0}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return{selector:e,spec:t,childIndices:[],rules:[],optional:n,matches:[]}},t.preparePages=function(e){var t=Object.keys(e).map(function(t){return e[t]}).filter(function(e){return null!==e}).map(function(e){return{name:e.name,elements:a(e.element)}});return t},t.flatten=function(e){if(void 0===e)return[];for(var t=0,n=[Object.assign({},e,{parent:null,childIndices:[]})];t<n.length;){var r=n[t];r.index=t,null!==r.parent&&n[r.parent].childIndices.push(t),r.children.forEach(function(e){n.push(Object.assign({},e,{parent:t,childIndices:[]}))}),delete r.children,t+=1}return n}),l=(t.clean=function(e){return{name:e.name,element:l(e.elements)}},t.fullGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),children:[],rules:e.rules.map(function(e){return Object.assign({},e)}),optional:e.optional,parent:e.parent}});return t.forEach(function(e){if(null!==e){var n=e.parent;delete e.parent,null!==n&&t[n].children.push(e)}}),t[0]});t.simpleGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),hasRules:e.rules.length>0,children:[],index:e.index,parent:e.parent,matches:e.matches,optional:e.optional}});return t.forEach(function(e){null!==e&&null!==e.parent&&t[e.parent].children.push(e)}),t.forEach(function(e){null!==e&&(e.hasChildren=e.children.length>0)}),t[0]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(196);Object.defineProperty(t,"ADD_MESSAGE",{enumerable:!0,get:function(){return a.ADD_MESSAGE}}),Object.defineProperty(t,"REMOVE_MESSAGE",{enumerable:!0,get:function(){return a.REMOVE_MESSAGE}});var l=n(197);Object.defineProperty(t,"showMessage",{enumerable:!0,get:function(){return l.showMessage}});var o=n(198);Object.defineProperty(t,"messagesMiddleware",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(200);Object.defineProperty(t,"messages",{enumerable:!0,get:function(){return r(i)["default"]}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SHOW_MESSAGE="@@erm/SHOW_MESSAGE",t.ADD_MESSAGE="@@erm/ADD_MESSAGE",t.REMOVE_MESSAGE="@@erm/REMOVE_MESSAGE"},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:o.SHOW_MESSAGE,message:e,lifetime:t,rating:n}}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:o.ADD_MESSAGE,message:e,id:t,rating:n}}function l(e){return{type:o.REMOVE_MESSAGE,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showMessage=r,t.addMessage=a,t.removeMessage=l;var o=n(196)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(196),a=n(197),l=n(199);t["default"]=function(e){return function(t){return function(n){if(n.type!==r.SHOW_MESSAGE)return t(n);var o=n.message,i=n.lifetime,u=n.rating,c=(0,l.pseudoRandomID)();return setTimeout(function(){e.dispatch((0,a.removeMessage)(c))},i),e.dispatch((0,a.addMessage)(o,c,u))}}}},function(e,t){"use strict";function n(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length;return Array.from(Array(10)).map(function(){return e[Math.floor(Math.random()*t)]}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.pseudoRandomID=n},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case a.ADD_MESSAGE:return e.concat([{id:t.id,message:t.message,rating:t.rating}]);case a.REMOVE_MESSAGE:return e.filter(function(e){return e.id!==t.id});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(196)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(202);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(204);Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var l=n(205);Object.keys(l).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.openForager=t.closeForager=void 0;var a=n(203),l=r(a);t.closeForager=function(){return{type:l.CLOSE_FORAGER}},t.openForager=function(){return{type:l.OPEN_FORAGER}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SELECT_PAGE="SELECT_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SYNC_PAGES="SYNC_PAGES",t.SET_PAGES="SET_PAGES",t.SET_MATCHES="SET_MATCHES",t.REFRESH_MATCHES="REFRESH_MATCHES",t.SELECT_ELEMENT="SELECT_ELEMENT",t.SAVE_ELEMENT="SAVE_ELEMENT",t.REMOVE_ELEMENT="REMOVE_ELEMENT",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE",t.UPDATE_RULE="UPDATE_RULE",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_ELEMENT_WIZARD="SHOW_ELEMENT_WIZARD",t.SHOW_EDIT_ELEMENT_WIZARD="SHOW_EDIT_ELEMENT_WIZARD",t.SHOW_RULE_WIZARD="SHOW_RULE_WIZARD",t.SHOW_EDIT_RULE_WIZARD="SHOW_EDIT_RULE_WIZARD",t.SHOW_PREVIEW="SHOW_PREVIEW",t.CLOSE_FORAGER="CLOSE_FORAGER",t.OPEN_FORAGER="OPEN_FORAGER"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.showPreview=t.showEditRuleWizard=t.showRuleWizard=t.showEditElementWizard=t.showElementWizard=t.showElementFrame=void 0;var a=n(203),l=r(a);t.showElementFrame=function(){return{type:l.SHOW_ELEMENT_FRAME}},t.showElementWizard=function(){return{type:l.SHOW_ELEMENT_WIZARD}},t.showEditElementWizard=function(){return{type:l.SHOW_EDIT_ELEMENT_WIZARD}},t.showRuleWizard=function(){return{type:l.SHOW_RULE_WIZARD}},t.showEditRuleWizard=function(e){return{type:l.SHOW_EDIT_RULE_WIZARD,index:e}},t.showPreview=function(){return{type:l.SHOW_PREVIEW}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRule=t.removeRule=t.saveRule=t.removeElement=t.updateElement=t.saveElement=t.selectElement=t.refreshMatches=t.setMatches=t.setPages=t.syncPages=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.selectPage=void 0;var a=n(203),l=r(a);t.selectPage=function(e){return{type:l.SELECT_PAGE,index:e}},t.addPage=function(e){return{type:l.ADD_PAGE,page:e}},t.removePage=function(){return{type:l.REMOVE_PAGE}},t.renamePage=function(e){return{type:l.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:l.UPLOAD_PAGE}},t.syncPages=function(){return{type:l.SYNC_PAGES}},t.setPages=function(e){return{type:l.SET_PAGES,pages:e}},t.setMatches=function(e){return{type:l.SET_MATCHES,matches:e}},t.refreshMatches=function(){return{type:l.REFRESH_MATCHES}},t.selectElement=function(e){return{type:l.SELECT_ELEMENT,index:e}},t.saveElement=function(e){return{type:l.SAVE_ELEMENT,element:e}},t.updateElement=function(e,t){return{type:l.UPDATE_ELEMENT,index:e,newProps:t}},t.removeElement=function(){return{type:l.REMOVE_ELEMENT}},t.saveRule=function(e){return{type:l.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:l.REMOVE_RULE,index:e}},t.updateRule=function(e,t){return{type:l.UPDATE_RULE,index:e,rule:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(163),i=n(207),u=r(i),c=n(216),s=r(c),f=n(235),d=r(f),p=n(236),h=r(p),v=n(246),m=r(v),y=n(247),g=r(y),E=function(e){var t=e.frame;switch(t.name){case"element":return l["default"].createElement(u["default"],null);case"element-wizard":return l["default"].createElement(s["default"],null);case"edit-element-wizard":return l["default"].createElement(d["default"],null);case"rule-wizard":return l["default"].createElement(h["default"],null);case"edit-rule-wizard":return l["default"].createElement(m["default"],null);case"preview":return l["default"].createElement(g["default"],null);default:return null}};t["default"]=(0,o.connect)(function(e){return{frame:e.frame}})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(163),f=n(208),d=r(f),p=n(212),h=r(p),v=n(211),m=n(215),y=n(193),g=function(e){function t(e){return a(this,t),l(this,Object.getPrototypeOf(t).call(this,e))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.element;return void 0===e?c["default"].createElement("div",{className:"frame"}):c["default"].createElement("div",{className:"frame"},c["default"].createElement(d["default"],null),c["default"].createElement(h["default"],{element:e,active:!0}))}},{key:"componentWillMount",value:function(){(0,v.unhighlight)(y.currentSelector),this.props.element&&(0,v.highlight)(this.props.element.matches,y.currentSelector)}},{key:"componentWillReceiveProps",value:function(e){(0,v.unhighlight)(y.currentSelector),void 0!==e.element&&e.element!==this.props.element&&(0,v.highlight)(e.element.matches,y.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,v.unhighlight)(y.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{element:(0,m.currentElement)(t)}})(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=(0,h.path)(),n=e.source,r=e.target;return t.moveTo(r.y,r.x),t.bezierCurveTo((r.y+n.y)/2,r.x,(r.y+n.y)/2,n.x,n.y,n.x),t.toString()}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(163),p=n(209),h=n(210),v=n(191),m=n(194),y=n(211),g=n(201),E=n(193),b=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n._makeNodes=n._makeNodes.bind(n),n}return o(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.width,n=e.height;this.setState({tree:(0,p.tree)().size([n,t])})}},{key:"_makeNodes",value:function(){var e=this.props,t=e.page,n=e.elementIndex,r=e.active,a=e.selectElement,l=this.state.tree,o=(0,m.simpleGrow)(t.elements),c=(0,p.hierarchy)(o);l(c);var s=c.descendants().map(function(e,t){return f["default"].createElement(_,u({key:t,current:e.data.index===n,select:a,active:r},e))}),d=c.links().map(function(e,t){return f["default"].createElement("path",{key:t,className:"link",d:i(e)})});return f["default"].createElement("g",{transform:"translate(50,25)"},f["default"].createElement("g",{className:"links"},d),f["default"].createElement("g",{className:"nodes"},s))}},{key:"render",value:function(){if(void 0===this.props.page)return null;var e=this.props,t=e.width,n=e.height,r=e.active;return f["default"].createElement("div",{className:"tree"},f["default"].createElement("svg",{width:t+100,height:n+50,className:r?null:"not-allowed"},this._makeNodes()))}}]),t}(f["default"].Component);b.defaultProps={width:400,height:150};var _=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.handleClick=n.handleClick.bind(n),n.handleMouseover=n.handleMouseover.bind(n),n.handleMouseout=n.handleMouseout.bind(n),n}return o(t,e),c(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.select(this.props.data.index)}},{key:"handleMouseover",value:function(){(0,y.highlight)(this.props.data.matches,E.savedPreview)}},{key:"handleMouseout",value:function(){(0,y.unhighlight)(E.savedPreview)}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.data,r=e.active,a=e.children,l=e.x,o=e.y,i=n.hasRules,c=n.selector,s=n.spec,d=n.optional,p=!(i||a&&a.length),h=i?f["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):f["default"].createElement("circle",{r:"3"}),m=["node",t?"current":null,p?"empty":null],y=r?{onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout}:{};return f["default"].createElement("g",u({className:m.join(" "),transform:"translate("+o+","+l+")"},y),f["default"].createElement("text",{y:"-10"},(0,v.shortElement)(c,s,d)),h)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.savedPreview)}}]),t}(f["default"].Component);t["default"]=(0,d.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,l=t.elementIndex,o=r[a];return{page:o,active:"element"===n.name,elementIndex:l}},{selectElement:g.selectElement})(b)},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){Array.from(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){Array.from(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,n,r,a){function l(e){return function(n){n.target.classList.contains(t)&&(n.stopPropagation(),e(n))}}Array.from(e).forEach(function(e){e.classList.add(t)});var o=l(n),i=l(r),u=l(a);return document.body.addEventListener("mouseover",o,!1),document.body.addEventListener("mouseout",i,!1),document.body.addEventListener("click",u,!1),function(){Array.from(e).forEach(function(e){e.classList.remove(t)}),document.body.removeEventListener("mouseover",o,!1),document.body.removeEventListener("mouseout",i,!1),document.body.removeEventListener("click",u,!1)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.element,n=void 0===t?{}:t,r=e.active,a=void 0===r?!0:r,o=e.showElementWizard,u=e.showRuleWizard,c=e.showEditElementWizard,d=e.removeElement,p=0===n.index;return i["default"].createElement("div",{className:"info-box"},i["default"].createElement("div",{className:"info"},i["default"].createElement(s["default"],l({active:a},n))),i["default"].createElement("div",{className:"buttons"},i["default"].createElement(f.PosButton,{text:"Add Child",disabled:!a,click:function(){o()}}),i["default"].createElement(f.PosButton,{text:"Add Rule",disabled:!a,click:function(){u()}}),i["default"].createElement(f.NeutralButton,{text:"Edit",disabled:!a||p,click:function(){c()}}),i["default"].createElement(f.NegButton,{text:p?"Reset":"Delete",title:p?"Reset Page":"Delete Element",disabled:!a,click:function(){d()}})))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),u=n(163),c=n(213),s=r(c),f=n(189),d=n(201);t["default"]=(0,u.connect)(null,{showElementWizard:d.showElementWizard,removeElement:d.removeElement,showRuleWizard:d.showRuleWizard,showEditElementWizard:d.showEditElementWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.selector,n=e.rules,r=e.spec,a=e.optional,l=void 0===a?!1:a,o=e.active,u=void 0===o?!0:o;return i["default"].createElement("div",{className:"element"},i["default"].createElement("div",null,i["default"].createElement("span",{className:"big bold"},t,l?i["default"].createElement("span",{title:"optional"},"*"):null)),i["default"].createElement("div",null,(0,s.describeSpec)(r)),i["default"].createElement(f,{rules:n,active:u}))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),u=n(214),c=r(u),s=n(191),f=function(e){var t=e.rules,n=e.active;return t.length?i["default"].createElement("ul",{className:"rules"},t.map(function(e,t){return i["default"].createElement(c["default"],l({key:t,index:t,active:n},e))})):null};f.propTypes={rules:i["default"].PropTypes.array,active:i["default"].PropTypes.bool.isRequired},t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.attr,r=e.type,a=e.active,l=void 0===a?!0:a,i=e.index,c=e.removeRule,s=e.updateRule;return o["default"].createElement("li",{className:"rule"},o["default"].createElement("span",{className:"rule-name",title:"name"},t),o["default"].createElement("span",{className:"rule-attr",title:"attribute (or text)"},n),o["default"].createElement("span",{className:"rule-type",title:"data type"},r),l?o["default"].createElement(u.NeutralButton,{text:"Edit",click:function(){s(i)}}):null,l?o["default"].createElement(u.NegButton,{text:"Delete",click:function(){c(i)}}):null)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=r(l),i=n(163),u=n(189),c=n(201);t["default"]=(0,i.connect)(null,{removeRule:c.removeRule,updateRule:c.showEditRuleWizard})(a)},function(e,t,n){"use strict";function r(e){var t=e.pages,n=e.pageIndex,r=e.elementIndex,a=t[n];return void 0===a?void 0:a.elements[r]}function a(e){var t=e.pages,n=e.pageIndex,r=e.elementIndex,a=t[n],l=void 0===a?void 0:a.elements[r];return void 0===l?void 0:a.elements[l.parent]}function l(e){var t=r(e),n=null!==t.parent?t.parent:e.elementIndex,a=e.pages[e.pageIndex].elements;return(0,o.levelNames)(a,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.currentElement=r,t.currentParent=a,t.takenNames=l;var o=n(194)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(163),f=n(208),d=r(f),p=n(217),h=r(p),v=n(218),m=n(201),y=n(211),g=n(215),E=n(193),b=[v.Elements,v.Parts,v.CreateType,v.CreateValue,v.CreateOptional,v.ConfirmElement],_=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return o(t,e),i(t,[{key:"save",value:function(e){this.props.saveElement(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(d["default"],null),c["default"].createElement(h["default"],{steps:b,initialData:{},staticData:{parent:e},save:this.save,cancel:this.cancel
}))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,y.highlight)(e.matches,E.currentSelector)}},{key:"componentWillUpdate",value:function(e){(0,y.unhighlight)(E.currentSelector);var t=e.current;(0,y.highlight)(t.matches,E.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{current:(0,g.currentElement)(t)}},{saveElement:m.saveElement,cancel:m.showElementFrame})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={position:0,data:[e.initialData].concat(Array(e.steps.length))},n.next=n.next.bind(n),n.previous=n.previous.bind(n),n.cancel=n.cancel.bind(n),n.finish=n.finish.bind(n),n}return o(t,e),i(t,[{key:"next",value:function(e){var t=this.state,n=t.position,r=t.data,a=this.props.steps,l=a.length-1,o=n===l?n:n+1;r[o]=e,this.setState({position:o,data:r})}},{key:"previous",value:function(){var e=this.state,t=e.position;e.data;this.setState({position:t>0?t-1:0})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"finish",value:function(e){this.props.save(e)}},{key:"render",value:function(){var e=this.state,t=e.position,n=e.data,r=this.props,a=r.steps,l=r.staticData,o=r.children,i=a[t],u=0===t?void 0:this.previous,s=t===a.length-1?this.finish:this.next;return c["default"].createElement("div",{className:"wizard"},c["default"].createElement(f,{steps:a.length,position:t}),c["default"].createElement(i,{startData:n[t],endData:n[t+1],staticData:l,cancel:this.cancel,next:s,previous:u},o))}}]),t}(c["default"].Component);s.propTypes={initialData:c["default"].PropTypes.object.isRequired,steps:c["default"].PropTypes.array.isRequired,staticData:c["default"].PropTypes.object,save:c["default"].PropTypes.func,cancel:c["default"].PropTypes.func};var f=function(e){var t=e.steps,n=e.position;return c["default"].createElement("div",{className:"progress-bar"},Array.from(Array(t)).map(function(e,t){return c["default"].createElement("div",{key:t,className:["marker",n>t?"complete":null,t==n?"active":null].join(" ")})}))};t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(219);Object.defineProperty(t,"Elements",{enumerable:!0,get:function(){return r(a)["default"]}});var l=n(221);Object.defineProperty(t,"Parts",{enumerable:!0,get:function(){return r(l)["default"]}});var o=n(222);Object.defineProperty(t,"CreateType",{enumerable:!0,get:function(){return o.CreateType}}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return o.EditType}});var i=n(224);Object.defineProperty(t,"CreateValue",{enumerable:!0,get:function(){return i.CreateValue}}),Object.defineProperty(t,"EditValue",{enumerable:!0,get:function(){return i.EditValue}});var u=n(231);Object.defineProperty(t,"CreateOptional",{enumerable:!0,get:function(){return u.CreateOptional}}),Object.defineProperty(t,"EditOptional",{enumerable:!0,get:function(){return u.EditOptional}});var c=n(233);Object.defineProperty(t,"ConfirmElement",{enumerable:!0,get:function(){return r(c)["default"]}});var s=n(234);Object.defineProperty(t,"ConfirmUpdate",{enumerable:!0,get:function(){return r(s)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(220),f=r(s),d=n(192),p=n(211),h=n(193),v=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e)),r=[["*"]],o=n.props.staticData,i=o.parent;return(0,d.allSelect)(i.matches)&&r.push(["option"]),n.state={checked:void 0,selectors:r,eleCount:0,error:!0},n.mouseover=n.mouseover.bind(n),n.mouseout=n.mouseout.bind(n),n.click=n.click.bind(n),n.addEvents=n.addEvents.bind(n),n.setRadio=n.setRadio.bind(n),n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),i(t,[{key:"mouseover",value:function(e){e.target.classList.add(h.hoverClass)}},{key:"mouseout",value:function(e){e.target.classList.remove(h.hoverClass)}},{key:"click",value:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.path).filter(function(e){return e.classList&&e.classList.contains(h.potentialSelector)}).reverse().map(function(e){return(0,d.parts)(e)});this.setState({selectors:[["*"]].concat(t),checked:void 0,error:!0})}},{key:"addEvents",value:function(e){var t=(0,d.select)(e.parent.matches,null,null,".forager-holder");this.iUnhighlight&&(this.iUnhighlight(),delete this.iUnhighlight),this.iUnhighlight=(0,p.iHighlight)(t,h.potentialSelector,this.mouseover,this.mouseout,this.click)}},{key:"setRadio",value:function(e){var t=this.state.selectors[e].join(""),n=this.props.staticData,r=n.parent;this.setState({checked:e,eleCount:(0,d.count)(r.matches,t),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.checked,r=t.selectors,a=this.props.next,l=r[n];void 0!==n&&void 0!==l?a({parts:l}):this.setState({error:!0})}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectors,r=t.checked,a=t.eleCount,l=t.error;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("div",{className:"info"},c["default"].createElement("h3",null,"Select Relevant Element(s)"),c["default"].createElement("div",{className:"choices"},n.map(function(t,n){return c["default"].createElement(m,{key:n,selector:t,index:n,checked:n===r,select:e.setRadio})})),c["default"].createElement("h5",null,"Count: ",a)),c["default"].createElement(f["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:l}))}},{key:"componentWillMount",value:function(){var e=this.props.staticData;this.addEvents(e)}},{key:"componentWillReceiveNewProps",value:function(e){var t=e.staticData;this.addEvents(t)}},{key:"componentWillUpdate",value:function(e,t){(0,p.unhighlight)(h.queryCheck);var n=t.selectors[t.checked];if(void 0!==n){var r=n.join(""),a=e.staticData,l=(0,d.select)(a.parent.matches,r,null,".forager-holder");(0,p.highlight)(l,h.queryCheck)}}},{key:"componentWillUnmount",value:function(){(0,p.unhighlight)(h.queryCheck),this.iUnhighlight()}}]),t}(c["default"].Component),m=function(e){var t=e.selector,n=e.checked,r=e.select,a=e.index;return c["default"].createElement("label",{className:n?"selected":""},c["default"].createElement("input",{type:"radio",name:"css-selector",checked:n,onChange:function(){return r(a)}}),t.join(""))};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.previous,n=e.next,r=e.nextText,a=void 0===r?"Next":r,l=e.cancel,u=e.error,c=void 0===u?!1:u;return o["default"].createElement("div",{className:"buttons"},o["default"].createElement(i.NegButton,{text:"Previous",click:t,disabled:void 0===t}),o["default"].createElement(i.PosButton,{text:a,type:"submit",click:n,disabled:c}),o["default"].createElement(i.NegButton,{text:"Cancel",click:l}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l),i=n(189)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if((0,h.unhighlight)(v.queryCheck),""!==e){var n=(0,p.select)(t,e,null,".forager-holder");(0,h.highlight)(n,v.queryCheck)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(220),d=r(f),p=n(192),h=n(211),v=n(193),m=function(e){return e.reduce(function(e,t){return e+(t.checked?t.name:"")},"")},y=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={parts:[],eleCount:0,error:!0},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleRadio=n.toggleRadio.bind(n),n}return o(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.parts,n=this.props.next,r=m(t);""!==r?n({selector:r}):this.setState({error:!0})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleRadio",value:function(e){var t=e.target.value,n=this.state.parts;n[t].checked=!n[t].checked;var r=m(n),a=this.props.staticData,l=a.parent.matches;i(r,l),this.setState({parts:n,eleCount:""===r?0:(0,p.count)(l,r),error:""===r})}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.parts,a=n.parent,l=r.join("");i(l,a.matches),this.setState({parts:r.map(function(e){return{name:e,checked:!0}}),eleCount:(0,p.count)(a.matches,l),error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.parts,r=t.eleCount,a=t.error,l=n.map(function(t,n){var r=t.name,a=t.checked;return s["default"].createElement("label",{key:n,className:a?"selected":""},s["default"].createElement("input",{type:"checkbox",name:"selector-part",value:n,checked:a,onChange:e.toggleRadio}),r)});return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"Select Relevant Part(s) of the CSS selector"),s["default"].createElement("div",{className:"choices"},l),s["default"].createElement("h5",null,"Count: ",r)),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(s["default"].Component);t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.endData,n=void 0===t?{}:t,r="single";return n.spec&&n.spec.type&&(r=n.spec.type),r}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="single";return r.spec&&r.spec.type?a=r.spec.type:t.spec&&t.spec.type&&(a=t.spec.type),a}function c(e,t,n){var r=e.startData,a=e.staticData,l=t.type,o=r.selector,i=a.parent,u={type:l};"single"===l?u.index=0:"range"===l&&(u.low=0,u.high=void 0);var c=(0,E.select)(i.matches,o,u,".forager-holder");(0,b.highlight)(c,n)}function s(e,t,n){var r=e.startData,a=e.staticData,l=t.type,o=a.parent,i=void 0===o?{}:o,u=i.matches,c=void 0===u?[document]:u,s={type:l};if("single"===l){var f=r.spec&&"single"===r.spec.type;s.index=f?r.spec.index:0}else if("range"===l){var d=r.spec&&"range"===r.spec.type;s.low=d?r.spec.low:0,s.high=d?r.spec.high:void 0}var p=(0,E.select)(c,r.selector,s,".forager-holder");(0,b.highlight)(p,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditType=t.CreateType=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),h=r(p),v=n(220),m=r(v),y=n(223),g=r(y),E=n(192),b=n(211),_=n(193),O=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:e.setupState(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return o(t,e),d(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,l={type:t};switch(t){case"single":l.index=0;break;case"all":l.name="";break;case"range":l.name="",l.low=0,l.high=void 0}a(Object.assign({},r,{spec:l}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this.state.type,t=this.props.noPrevious,n=void 0===t?!1:t,r=["single","all","range"];return h["default"].createElement("form",{className:"info-box"},h["default"].createElement("div",{className:"info"},h["default"].createElement(g["default"],{types:r,current:e,setType:this.typeHandler})),h["default"].createElement(m["default"],{previous:n?void 0:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.highlight,n=e.highlightClass;t(this.props,this.state,n)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(this.props.highlightClass);var n=e.highlight,r=e.highlightClass;n(e,t,r)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(this.props.highlightClass)}}]),t}(h["default"].Component);t.CreateType=function(e){return h["default"].createElement(O,f({highlight:c,highlightClass:_.queryCheck,setupState:i},e))},t.EditType=function(e){return h["default"].createElement(O,f({highlight:s,highlightClass:_.currentSelector,setupState:u,noPrevious:!0},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.types,n=e.current,r=e.setType,a=t.map(function(e){var t=n===e;return o["default"].createElement("label",{key:e,className:t?"selected":null},o["default"].createElement("input",{type:"radio",name:"type",value:e,checked:t,onChange:r}),e)});return o["default"].createElement("div",null,o["default"].createElement("h3",null,"Should the element target a single element or all?"),a)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.startData.spec;switch(t.type){case"all":return i["default"].createElement(u.CreateAllValueStep,e);case"single":return i["default"].createElement(c.CreateSingleValueStep,e);case"range":return i["default"].createElement(s.CreateRangeValueStep,e);default:return null}}function l(e){var t=e.startData.spec;switch(t.type){case"all":return i["default"].createElement(u.EditAllValueStep,e);case"single":return i["default"].createElement(c.EditSingleValueStep,e);case"range":return i["default"].createElement(s.EditRangeValueStep,e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateValue=a,t.EditValue=l;var o=n(1),i=r(o),u=n(225),c=n(227),s=n(229)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.spec&&t.spec.name&&(a=t.spec.name),a}function u(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.originalSpec&&void 0!==t.originalSpec.name&&(a=t.originalSpec.name),a}function c(e,t){var n=t.name,r=e.takenNames;return r.every(function(e){return e!==n})}function s(e,t){var n=t.name,r=e.takenNames,a=e.staticData,l=a.originalSpec.name;return n===l||r.every(function(e){return e!==n})}function f(e,t,n){var r=e.startData,a=e.staticData,l=t.name,o=r.selector,i=a.parent,u=(0,_.select)(i.matches,o,{type:"all",name:l},".forager-holder");(0,O.highlight)(u,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditAllValueStep=t.CreateAllValueStep=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),m=n(163),y=n(226),g=r(y),E=n(220),b=r(E),_=n(192),O=n(211),w=n(215),P=n(195),x=n(193),j=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e)),r=e.setupState(e);return n.state={name:r,error:""===r},n.nameHandler=n.nameHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),p(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,l=a.startData,o=a.next,i=a.showMessage,u=a.validate;if(!r){var c=u(this.props,this.state);if(!c)return void i('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);var s={type:"all",name:n};o(Object.assign({},l,{spec:s}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return v["default"].createElement("form",{className:"info-box"},v["default"].createElement("div",{className:"info"},v["default"].createElement(g["default"],{name:t,setName:this.nameHandler})),v["default"].createElement(b["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){f(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,O.unhighlight)(this.props.highlightClass),f(e,t,e.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,O.unhighlight)(this.props.highlightClass)}}]),t}(v["default"].Component),S=(0,m.connect)(function(e){var t=e.page;return{takenNames:(0,w.takenNames)(t)}},{showMessage:P.showMessage})(j);t.CreateAllValueStep=function(e){return v["default"].createElement(S,d({setupState:i,highlightClass:x.queryCheck,validate:c},e))},t.EditAllValueStep=function(e){return v["default"].createElement(S,d({setupState:u,highlightClass:x.currentSelector,validate:s},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.setName;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"What should the array of elements be named?"),o["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:n}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.spec&&void 0!==t.spec.index&&(a=t.spec.index),a}function u(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.originalSpec&&void 0!==t.originalSpec.index&&(a=t.originalSpec.index),a}function c(e,t,n){var r=e.startData,a=e.staticData,l=t.index,o=r.selector,i=a.parent,u=(0,g.select)(i.matches,o,{type:"single",index:l},".forager-holder");(0,E.highlight)(u,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditSingleValueStep=t.CreateSingleValueStep=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(220),v=r(h),m=n(228),y=r(m),g=n(192),E=n(211),b=n(193),_=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:e.setupState(e),error:!1},n.indexHandler=n.indexHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),f(t,[{key:"indexHandler",value:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,l=a.startData,o=a.next,i=a.validate;if(!r){var u=i(this.props,this.state);if(u){var c={type:"single",index:n};o(Object.assign({},l,{spec:c}))}}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.index,n=e.error,r=this.props,a=r.startData,l=r.staticData,o=a.selector,i=l.parent,u=(0,g.count)(i.matches,o);return p["default"].createElement("form",{className:"info-box"},p["default"].createElement("div",{className:"info"},p["default"].createElement(y["default"],{index:t,count:u,setIndex:this.indexHandler})),p["default"].createElement(v["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){c(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,E.unhighlight)(this.props.highlightClass),c(e,t,this.props.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(this.props.highlightClass)}}]),t}(p["default"].Component);t.CreateSingleValueStep=function(e){return p["default"].createElement(_,s({setupState:i,highlightClass:b.queryCheck,validate:function(){return!0}},e))},t.EditSingleValueStep=function(e){return p["default"].createElement(_,s({setupState:u,highlightClass:b.currentSelector,validate:function(){return!0}},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=function(e){var t=e.index,n=e.count,r=e.setIndex;return l["default"].createElement("div",null,l["default"].createElement("h3",null,"The element at which index should be selected?"),l["default"].createElement("select",{value:t,onChange:r},Array.from(new Array(n)).map(function(e,t){return l["default"].createElement("option",{key:t,value:t},t)})))};t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="",l=0,o="end";return r.spec?(r.spec.name&&(a=r.spec.name),void 0!==r.spec.low&&(l=r.spec.low),void 0!==r.spec.high&&(o=null===r.spec.high?"end":r.spec.high)):t.spec&&(t.spec.name&&(a=t.spec.name),void 0!==t.spec.low&&(l=t.spec.low),void 0!==t.spec.high&&(o=null===t.spec.high?"end":t.spec.high)),{name:a,low:l,high:o,error:""===a}}function u(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a="",l=0,o="end";if(r.spec){var i=r.spec;i.name&&(a=i.name),void 0!==i.low&&(l=i.low),void 0!==i.high&&(o=null===i.high?"end":i.high)}else if(t.originalSpec){var u=t.originalSpec;u.name&&(a=u.name),void 0!==u.low&&(l=u.low),void 0!==u.high&&(o=null===u.high?"end":u.high)}return{name:a,low:l,high:o,error:""===a}}function c(e,t){var n=t.name,r=e.takenNames;return r.every(function(e){return e!==n})}function s(e,t){var n=t.name,r=e.takenNames,a=e.staticData,l=a.originalSpec.name;return n===l||r.every(function(e){return e!==n})}function f(e,t,n){var r=e.startData,a=e.staticData,l=t.name,o=t.low,i=t.high,u=r.selector,c=a.parent;"end"===i&&(i=null);var s=(0,_.select)(c.matches,u,{type:"range",name:l,low:o,high:i},".forager-holder");(0,O.highlight)(s,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditRangeValueStep=t.CreateRangeValueStep=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),m=n(163),y=n(220),g=r(y),E=n(230),b=r(E),_=n(192),O=n(211),w=n(215),P=n(195),x=n(193),j=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state=e.setupState(e),n.nameHandler=n.nameHandler.bind(n),n.lowHandler=n.lowHandler.bind(n),n.highHandler=n.highHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),p(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"lowHandler",value:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})}},{key:"highHandler",value:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,l=t.error,o=this.props,i=o.startData,u=o.next,c=o.showMessage,s=o.validate,f=s(this.props,this.state);if(!f)return void c('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!l){var d={type:"range",name:n,low:r,high:"end"===a?null:a};u(Object.assign({},i,{spec:d}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,l=this.props,o=l.startData,i=l.staticData,u=o.selector,c=i.parent,s=(0,_.count)(c.matches,u);return v["default"].createElement("form",{className:"info-box"},v["default"].createElement("div",{className:"info"},v["default"].createElement(b["default"],{name:t,low:n,high:r,count:s,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),v["default"].createElement(g["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillMount",value:function(){f(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,O.unhighlight)(this.props.highlightClass),f(e,t,this.props.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,O.unhighlight)(this.props.highlightClass)}}]),t}(v["default"].Component),S=(0,m.connect)(function(e){var t=e.page;return{takenNames:(0,w.takenNames)(t)}},{showMessage:P.showMessage})(j);t.CreateRangeValueStep=function(e){return v["default"].createElement(S,d({setupState:i,highlightClass:x.queryCheck,validate:c},e))},t.EditRangeValueStep=function(e){return v["default"].createElement(S,d({setupState:u,highlightClass:x.currentSelector,validate:s},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.low,r=e.high,a=e.count,l=e.setName,i=e.setLow,u=e.setHigh;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"What should the array of elements be named?"),o["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:l}),o["default"].createElement("h3",null,"Which elements should be selected?"),o["default"].createElement("select",{value:n,onChange:i},Array.from(new Array(a)).map(function(e,t){
return o["default"].createElement("option",{key:t,value:t},t)}))," - ",o["default"].createElement("select",{value:r,onChange:u},Array.from(new Array(a)).map(function(e,t){return o["default"].createElement("option",{key:t,value:t},t)}),o["default"].createElement("option",{key:"end",value:"end"},"end")))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),a}function u(e,t,n){var r=e.startData,a=e.staticData,l=r.selector,o=r.spec,i=a.parent,u=void 0===i?{}:i,c=u.matches,s=void 0===c?[document]:c,f=(0,y.select)(s,l,o,".forager-holder");(0,g.highlight)(f,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditOptional=t.CreateOptional=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(220),h=r(p),v=n(232),m=r(v),y=n(192),g=n(211),E=n(193),b=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={optional:i(n.props)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleOptional=n.toggleOptional.bind(n),n}return o(t,e),s(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleOptional",value:function(e){this.setState({optional:e.target.checked})}},{key:"render",value:function(){var e=this.state.optional;return d["default"].createElement("form",{className:"info-box"},d["default"].createElement("div",{className:"info"},d["default"].createElement(m["default"],{optional:e,toggle:this.toggleOptional})),d["default"].createElement(h["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){u(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,g.unhighlight)(this.props.highlightClass),u(e,t,e.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,g.unhighlight)(this.props.highlightClass)}}]),t}(d["default"].Component);t.CreateOptional=function(e){return d["default"].createElement(b,c({highlightClass:E.queryCheck},e))},t.EditOptional=function(e){return d["default"].createElement(b,c({highlightClass:E.currentSelector},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=function(e){var t=e.optional,n=e.toggle;return l["default"].createElement("div",null,l["default"].createElement("h3",null,"Is this element optional?"),l["default"].createElement("label",{className:t?"selected":null},l["default"].createElement("input",{type:"checkbox",checked:t,onChange:n}),t?"Yes":"No"))};t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(220),f=r(s),d=n(194),p=n(192),h=n(211),v=n(193),m=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.selector,l=n.spec,o=n.optional,i=(0,d.createElement)(a,l,o);r(i)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Element"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Selector: ",t),c["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),c["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.selector,a=t.spec,l=n.parent,o=(0,p.select)(l.matches,r,a,".forager-holder");(0,h.highlight)(o,v.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(c["default"].Component);t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(220),f=r(s),d=n(192),p=n(211),h=n(193),v=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.spec,l=n.optional;r({optional:l,spec:a})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Updated Element"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Selector: ",t),c["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),c["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.spec,a=n.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,u=(0,d.select)(i,t.selector,r,".forager-holder");(0,p.highlight)(u,h.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,p.unhighlight)(h.currentSelector)}}]),t}(c["default"].Component);t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(163),f=n(217),d=r(f),p=n(208),h=r(p),v=n(218),m=n(201),y=n(215),g=[v.EditType,v.EditValue,v.EditOptional,v.ConfirmUpdate],E=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return o(t,e),i(t,[{key:"save",value:function(e){var t=this.props,n=t.current,r=t.updateElement,a=e.spec,l=e.optional;r(n.index,{spec:a,optional:l})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.parent,r=t.selector,a=t.spec,l=t.optional;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],null),c["default"].createElement(d["default"],{steps:g,initialData:{selector:r,spec:a,optional:l},staticData:{parent:n,originalSpec:a},save:this.save,cancel:this.cancel}))}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{current:(0,y.currentElement)(t),parent:(0,y.currentParent)(t)}},{updateElement:m.updateElement,cancel:m.showElementFrame})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(163),f=n(217),d=r(f),p=n(212),h=r(p),v=n(237),m=n(245),y=r(m),g=n(201),E=n(211),b=n(215),_=n(193),O=[v.Attribute,v.Type,v.Name,v.ConfirmRule],w=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return o(t,e),i(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){this.props.saveRule(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current,t=this.state.index;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],{active:!1,element:e}),c["default"].createElement(d["default"],{steps:O,initialData:{},staticData:{element:e.matches[t]},save:this.save,cancel:this.cancel},c["default"].createElement(y["default"],{index:t,count:e.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,E.highlight)(e.matches,_.currentSelector)}},{key:"componentWillUpdate",value:function(e){(0,E.unhighlight)(_.currentSelector);var t=e.current;(0,E.highlight)(t.matches,_.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(_.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{current:(0,b.currentElement)(t)}},{saveRule:g.saveRule,cancel:g.showElementFrame})(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(238);Object.defineProperty(t,"Attribute",{enumerable:!0,get:function(){return r(a)["default"]}});var l=n(240);Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r(l)["default"]}});var o=n(241);Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(243);Object.defineProperty(t,"ConfirmRule",{enumerable:!0,get:function(){return r(i)["default"]}});var u=n(244);Object.defineProperty(t,"ConfirmUpdateRule",{enumerable:!0,get:function(){return r(u)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.attribute?a=r.attribute:t.attr&&(a=t.attr),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(220),d=r(f),p=n(239),h=n(191),v=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e)),r=i(e);return n.state={attribute:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.attributeHandler=n.attributeHandler.bind(n),n}return o(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.attribute,r=t.error;if(!r){var a=this.props,l=a.startData,o=a.next;o(Object.assign({},l,{attribute:n}))}}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"attributeHandler",value:function(e){this.setState({attribute:e.target.value,error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.attribute,r=t.error,a=this.props.staticData,l=a.element;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"Which attribute has the value that you want?"),s["default"].createElement("ul",null,(0,p.attributes)(l).map(function(t,r){return s["default"].createElement("li",{key:r},s["default"].createElement("label",null,s["default"].createElement("input",{type:"radio",value:t.name,checked:t.name===n,onChange:e.attributeHandler}),t.name),s["default"].createElement("p",{className:"line"},(0,h.abbreviate)(t.value,40)))})),this.props.children),s["default"].createElement(d["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:r}))}}]),t}(s["default"].Component);t["default"]=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripEvents=t.attributes=void 0;var r=n(193);t.attributes=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[r.currentSelector,r.potentialSelector,r.queryCheck,r.hoverClass,r.savedPreview],a=Array.from(e.attributes).reduce(function(e,r){var a=r.name,l=r.value;return t[a]?e:("class"===a&&(l=l.split(" ").filter(function(e){return!n.includes(e)&&""!==e}).join(" ")),""!==l&&e.push({name:a,value:l}),e)},[]),l=e.textContent.trim();return""!==l&&a.push({name:"text",value:l}),a},t.stripEvents=function(e){var t=Array.from(e.attributes);if(t.some(function(e){return e.name.startsWith("on")})){t.forEach(function(t){var n=t.name;n.startsWith("on")&&e.removeAttribute(n)});var n=e.cloneNode(!0);return e.parentNode.replaceChild(n,e),n}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.name?a=r.name:t.name&&(a=t.name),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(163),d=n(220),p=r(d),h=n(194),v=n(195),m=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e)),r=i(e);return n.state={name:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.nameHandler=n.nameHandler.bind(n),n}return o(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.name,n=this.props,r=n.takenNames,a=n.showMessage,l=n.startData,o=n.next,i=l.name;return t===i||r.every(function(e){return e!==t})?void o(Object.assign({},l,{name:t})):void a('"'+t+'" is a duplicate name and cannot be used.',5e3,-1)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"What should the rule be named?"),s["default"].createElement("input",{type:"text",placeholder:"e.g., name",value:t,onChange:this.nameHandler})),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r];return{takenNames:(0,h.levelNames)(l.elements,a)}},{showMessage:v.showMessage})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="string";return r.type?a=r.type:t.type&&(a=t.type),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(220),d=r(f),p=n(191),h=n(242),v=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:i(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return o(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{type:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.type,n=this.props,r=n.startData,a=n.children,l=r.attribute,o=this.props.staticData,i=o.element,u="text"===l?i.innerText:i.getAttribute(l),c=void 0;switch(t){case"string":c=(0,p.abbreviate)(u,40);break;case"int":c=(0,h.integer)(u),null===c&&(c="No int detected");break;case"float":c=(0,h["float"])(u),null===c&&(c="No float detected")}return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"What type of value is this?"),["string","int","float"].map(function(n,r){return s["default"].createElement("label",{key:r},s["default"].createElement("input",{type:"radio",value:n,checked:n===t,onChange:e.typeHandler}),n)}),s["default"].createElement("p",{className:"line"},c),a),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}}]),t}(s["default"].Component);t["default"]=v},function(e,t){"use strict";function n(e){var t=/\d+/,n=e.match(t);return null!==n?parseInt(n[0],10):null}function r(e){var t=/\d+(\.\d+)?/,n=e.match(t);return null!==n?parseFloat(n[0]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.integer=n,t["float"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(220),f=r(s),d=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,l=n.attribute,o=n.type;r({name:a,type:o,attr:l})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Rule"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Name: ",t),c["default"].createElement("li",null,"Attribute: ",n),c["default"].createElement("li",null,"Type: ",r)),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}}]),t}(c["default"].Component);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(220),f=r(s),d=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return o(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,l=n.attribute,o=n.type;r({name:a,type:o,attr:l})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Updated Rule"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Name: ",t),c["default"].createElement("li",null,"Attribute: ",n),c["default"].createElement("li",null,"Type: ",r)),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}}]),t}(c["default"].Component);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(189),i=function(e){var t=e.index,n=e.count,r=e.setIndex,a=(t+1)%n,i=(t-1+n)%n;return l["default"].createElement("div",null,l["default"].createElement(o.NeutralButton,{click:function(){r(i)},text:"<"}),t+1," / ",n,l["default"].createElement(o.NeutralButton,{click:function(){r(a)},text:">"}))};t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(163),f=n(217),d=r(f),p=n(212),h=r(p),v=n(237),m=n(245),y=r(m),g=n(201),E=n(211),b=n(215),_=n(193),O=[v.Attribute,v.Type,v.Name,v.ConfirmUpdateRule],w=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return o(t,e),i(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){var t=this.props,n=t.updateRule,r=t.ruleIndex;n(r,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.ruleIndex,r=t.rules[n];if(void 0===n||void 0===n)return null;var a=this.state.index,l=r.name,o=r.attr,i=r.type;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],{active:!1,element:t}),c["default"].createElement(d["default"],{steps:O,initialData:{current:t,index:0,name:l,attr:o,type:i},staticData:{element:t.matches[a]},save:this.save,cancel:this.cancel},c["default"].createElement(y["default"],{index:a,count:t.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,E.highlight)(e.matches,_.currentSelector)}},{key:"componentWillUpdate",value:function(e){(0,E.unhighlight)(_.currentSelector);var t=e.current;(0,E.highlight)(t.matches,_.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(_.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=e.frame;return{current:(0,b.currentElement)(t),ruleIndex:n.index}},{updateRule:g.updateRule,cancel:g.showElementFrame})(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(163),f=n(189),d=n(208),p=r(d),h=n(194),v=n(248),m=n(201),y=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.closeHandler=n.closeHandler.bind(n),n.logHandler=n.logHandler.bind(n),
n.prettyLogHandler=n.prettyLogHandler.bind(n),n.varHandler=n.varHandler.bind(n),n}return o(t,e),i(t,[{key:"closeHandler",value:function(e){e.preventDefault(),this.props.close()}},{key:"logHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree)))}},{key:"prettyLogHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree),null,2))}},{key:"varHandler",value:function(e){e.preventDefault(),console.log(['The current preview data can be accessed using the %c"pageData"%c variable.',"Make sure that the Forager extension's context is selected.",'(This will be a string using the extension\'s ID that starts with "chrome-extensions://". Open the chrome://extensions tab and look for the Forager extension to determine the extension ID)'].join(" "),"font-weight: bold; font-size: 1.5em;",""),window.pageData=(0,v.preview)(this.props.tree)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"frame"},c["default"].createElement(p["default"],null),c["default"].createElement("div",{className:"preview"},c["default"].createElement("pre",null,JSON.stringify((0,v.preview)(this.props.tree),null,2)),c["default"].createElement("div",{className:"buttons"},c["default"].createElement(f.PosButton,{text:"Log to Console",click:this.logHandler}),c["default"].createElement(f.PosButton,{text:"Pretty Log",click:this.prettyLogHandler}),c["default"].createElement(f.PosButton,{text:"Use as Variable",click:this.varHandler}),c["default"].createElement(f.NegButton,{text:"Hide Preview",click:this.closeHandler}))))}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=n[r];return{tree:void 0===a?{}:(0,h.fullGrow)(a.elements)}},{close:m.showElementFrame})(y)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var a=n(242),l=function(e,t){var n=t.querySelectorAll(e.selector),a=e.spec.type;switch(a){case"single":var l=e.spec.index,i=n[l];if(!i)return;return o(e,i);case"all":var u=e.spec.name,c=Array.from(n).map(function(t){return o(e,t)}).filter(function(e){return void 0!==e});return r({},u,c);case"range":var s=e.spec,u=s.name,f=s.low,d=s.high,p=Array.from(n).slice(f,d||void 0).map(function(t){return o(e,t)}).filter(function(e){return void 0!==e});return r({},u,p)}},o=function(e,t){var n=u(e.rules,t);if(n){var r=i(e.children,t);if(r)return Object.assign({},n,r)}},i=function(e,t){var n={};return e.some(function(e){var r=l(e,t);if(!r&&!e.optional)return n=void 0,!0;for(var a in r)n[a]=r[a];return!1}),n},u=function(e,t){var n={};return e.some(function(e){var r=void 0;if("text"===e.attr)r=t.textContent.replace(/\s+/g," ");else{var l=t.getAttribute(e.attr);if(null===l)return n=void 0,!0;r=l||""}switch(e.type){case"int":r=(0,a.integer)(r);break;case"float":r=(0,a["float"])(r)}return n[e.name]=r,!1}),n};t.preview=function(e){return void 0===e?"":l(e,document)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.upload=t.load=t.remove=t.rename=t.save=void 0;var r=n(194);t.save=function(e){return new Promise(function(t,n){void 0===e&&n("No page to save");var a=(0,r.clean)(e);chrome.storage.local.get("sites",function(e){var n=window.location.hostname;e.sites[n]=e.sites[n]||{},e.sites[n][a.name]=a,chrome.storage.local.set({sites:e.sites}),t("Saved")})})},t.rename=function(e,t){return new Promise(function(n,r){chrome.storage.local.get("sites",function(a){var l=window.location.hostname,o=a.sites[l][t];void 0===o&&r("No page named "+t+" found"),o.name=e,a.sites[l][e]=o,delete a.sites[l][t],chrome.storage.local.set({sites:a.sites}),n('Renamed "'+t+'" to "'+e+'"')})})},t.remove=function(e){return new Promise(function(t,n){void 0===e&&n("No page to delete"),chrome.storage.local.get("sites",function(n){var r=window.location.hostname;delete n.sites[r][e],chrome.storage.local.set({sites:n.sites}),t("Deleted page "+e)})})},t.load=function(){return new Promise(function(e){chrome.storage.local.get("sites",function(t){var n=window.location.hostname,a=t.sites[n]||{},l=(0,r.preparePages)(a);e(l)})})},t.upload=function(e){return new Promise(function(t,n){void 0===e&&n("No page to upload"),chrome.runtime.sendMessage({type:"upload",data:{name:e.name,site:window.location.hostname,page:JSON.stringify((0,r.clean)(e))}},function(e){e.error?n("Failed to upload page"):t(e)})})},t.sync=function(){return new Promise(function(e,t){var n=window.location.hostname;chrome.runtime.sendMessage({type:"sync",site:n},function(a){a.error?t("Failed to sync pages"):!function(){var t=a.pages;chrome.storage.local.get("sites",function(a){var l=a.sites[n]||{},o=Object.assign({},l,t);a.sites[n]=o,chrome.storage.local.set({sites:a.sites});var i=(0,r.preparePages)(o);e(i)})}()})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=(0,l.createStore)(v,m,(0,l.applyMiddleware)(h["default"],d["default"],s["default"],o.messagesMiddleware));return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(170),o=n(195),i=n(251),u=r(i),c=n(255),s=r(c),f=n(256),d=r(f),p=n(257),h=r(p),v=(0,l.combineReducers)(Object.assign({},u["default"],{messages:o.messages})),m={show:!0,page:{pages:[void 0],pageIndex:0,elementIndex:0},frame:{name:"element",data:{}},messages:[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(252),l=r(a),o=n(253),i=r(o),u=n(254),c=r(u);t["default"]={frame:c["default"],show:l["default"],page:i["default"]}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments[1];switch(t.type){case o.CLOSE_FORAGER:return!1;case o.OPEN_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(203),o=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case i.SELECT_PAGE:var n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=e.pages.length)&&(n=0),Object.assign({},e,{pageIndex:n,elementIndex:0});case i.SET_PAGES:return Object.assign({},e,{pageIndex:0,pages:[void 0].concat(a(t.pages)),elementIndex:0});case i.ADD_PAGE:var r=e.pages,l=[].concat(a(r),[t.page]);return Object.assign({},e,{pages:l,pageIndex:l.length-1,elementIndex:0});case i.REMOVE_PAGE:var r=e.pages,o=e.pageIndex;return 0===o?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),a(r.slice(o+1))),pageIndex:0,elementIndex:0});case i.RENAME_PAGE:var r=e.pages,o=e.pageIndex;return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},r[o],{name:t.name})],a(r.slice(o+1)))});case i.SET_MATCHES:var r=e.pages,o=e.pageIndex,u=t.matches;return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},r[o],{elements:r[o].elements.map(function(e){if(null===e)return null;var t=u[e.index];return void 0!==t?Object.assign({},e,{matches:t}):e})})],a(r.slice(o+1)))});case i.SELECT_ELEMENT:var r=e.pages,o=e.pageIndex,c=e.elementIndex,s=r[o].elements.length,n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=s)&&(n=0),Object.assign({},e,{elementIndex:n});case i.SAVE_ELEMENT:var r=e.pages,o=e.pageIndex,c=e.elementIndex,f=r[o],d=f.elements[c],p=f.elements.length,h=t.element;return h.parent=d.index,h.index=p,d.childIndices.push(p),Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},f,{elements:f.elements.concat([h])})],a(r.slice(o+1))),elementIndex:p});case i.UPDATE_ELEMENT:var r=e.pages,o=e.pageIndex,c=e.elementIndex,f=r[o],d=f.elements[c],n=t.index,v=t.newProps;return 0===n?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},f,{elements:f.elements.map(function(e){return null===e?null:e.index!==n?e:Object.assign({},e,v)})})],a(r.slice(o+1)))});case i.REMOVE_ELEMENT:var r=e.pages,o=e.pageIndex,c=e.elementIndex,f=r[o],d=f.elements[c];if(0===c){var m=Object.assign({},f.elements[0],{childIndices:[]});return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},f,{elements:[m]})],a(r.slice(o+1))),elementIndex:0})}var y=[c],g=f.elements[c].parent||0,E=Object.assign({},f,{elements:f.elements.map(function(e){return null===e?null:(e.childIndices=e.childIndices.filter(function(e){return!y.includes(e)}),y.includes(e.index)?(y=y.concat(e.childIndices),null):e)})});return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[E],a(r.slice(o+1))),elementIndex:g});case i.SAVE_RULE:var r=e.pages,o=e.pageIndex,c=e.elementIndex,b=t.rule,f=r[o];return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c&&(e.rules=e.rules.concat([b])),e})})],a(r.slice(o+1)))});case i.REMOVE_RULE:var r=e.pages,o=e.pageIndex,c=e.elementIndex,n=t.index,f=r[o];return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c?Object.assign({},e,{rules:e.rules.filter(function(e,t){return t!==n})}):e})})],a(r.slice(o+1)))});case i.UPDATE_RULE:var r=e.pages,o=e.pageIndex,c=e.elementIndex,n=t.index,b=t.rule,f=r[o];return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c&&(e.rules=e.rules.map(function(e,t){return t===n?b:e})),e})})],a(r.slice(o+1)))});case i.CLOSE_FORAGER:return Object.assign({},e,{pageIndex:0,elementIndex:0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l;var o=n(203),i=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?{name:"element"}:arguments[0],t=arguments[1];switch(t.type){case o.SELECT_PAGE:case o.ADD_PAGE:case o.SET_PAGES:case o.REMOVE_PAGE:case o.REMOVE_ELEMENT:case o.SAVE_ELEMENT:case o.UPDATE_ELEMENT:case o.SAVE_RULE:case o.REMOVE_RULE:case o.UPDATE_RULE:case o.CLOSE_FORAGER:case o.SHOW_ELEMENT_FRAME:return{name:"element"};case o.SHOW_ELEMENT_WIZARD:return{name:"element-wizard"};case o.SHOW_EDIT_ELEMENT_WIZARD:return{name:"edit-element-wizard"};case o.SHOW_RULE_WIZARD:return{name:"rule-wizard"};case o.SHOW_EDIT_RULE_WIZARD:return{name:"edit-rule-wizard",index:t.index};case o.SHOW_PREVIEW:return{name:"preview"};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(203),o=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(203),l=r(a),o=n(195),i=n(201),u=n(249),c=r(u);t["default"]=function(e){return function(t){return function(n){var r=e.getState(),a=r.page,u=a.pages,s=a.pageIndex,f=u[s];switch(n.type){case l.RENAME_PAGE:return c.rename(n.name,f.name).then(function(t){e.dispatch((0,o.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,1e3,-1))}),t(n);case l.REMOVE_PAGE:var d=u[s].name;return c.remove(d).then(function(t){e.dispatch((0,o.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,1e3,-1))}),t(n);case l.UPLOAD_PAGE:c.upload(u[s]).then(function(){e.dispatch((0,o.showMessage)("Upload Successful",5e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,5e3,-1))});break;case l.SYNC_PAGES:c.sync().then(function(t){e.dispatch((0,i.setPages)(t)),e.dispatch((0,o.showMessage)("Pages synced",5e3,1))})["catch"](function(){e.dispatch((0,o.showMessage)("Failed to sync pages",5e3,-1))});break;case l.ADD_PAGE:case l.SAVE_ELEMENT:case l.REMOVE_ELEMENT:case l.UPDATE_ELEMENT:case l.SAVE_RULE:case l.REMOVE_RULE:var p=t(n),h=e.getState(),v=h.page,m=v.pages,y=v.pageIndex;return c.save(m[y]).then(function(t){e.dispatch((0,o.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,1e3,-1))}),p;default:return t(n)}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(192),l=n(203),o=r(l),i=n(201);t["default"]=function(e){return function(t){return function(n){var r=[o.SELECT_PAGE,o.SAVE_ELEMENT,o.UPDATE_ELEMENT,o.REFRESH_MATCHES];if(!r.includes(n.type))return t(n);switch(n.type){case o.SELECT_PAGE:case o.SAVE_ELEMENT:case o.UPDATE_ELEMENT:case o.REFRESH_MATCHES:var l=t(n),u=e.getState().page,c=u.pages,s=u.pageIndex,f=c[s];if(void 0===f)return;var d=f.elements.reduce(function(e,t){if(null===t)return e;var n=null===t.parent?[document]:e[t.parent];return e[t.index]=(0,a.select)(n,t.selector,t.spec,".forager-holder"),e},{});return e.dispatch((0,i.setMatches)(d)),l}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(203),l=r(a);t["default"]=function(e){return function(t){return function(n){var r=[l.SYNC_PAGES,l.REMOVE_PAGE,l.REMOVE_ELEMENT];if(!r.includes(n.type))return t(n);var a="Are you sure?";switch(n.type){case l.SYNC_PAGES:a="Syncing pages will overwrite duplicate pages. Continue?";break;case l.REMOVE_PAGE:var o=e.getState(),i=o.page,u=i.pages,c=i.pageIndex,s=u[c];a='Are you sure you want to delete the page "'+s.name+'"?';break;case l.REMOVE_ELEMENT:var f=e.getState(),i=f.page,u=i.pages,c=i.pageIndex,d=i.elementIndex,s=u[c],p=s.elements[d];a=0===p.index?"Are you sure you want to reset the page? This will delete all rules and child elements":'Are you sure you want to delete the element "'+p.selector+'"?'}window.confirm(a)&&t(n)}}}}]);