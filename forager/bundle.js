webpackJsonp([0],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),o=r(a),i=n(30),u=r(i),l=n(163),c=n(187),s=r(c),f=n(201),p=n(249),d=n(239),h=n(250),v=r(h);document.body.classList.add("foraging"),(0,d.stripEvents)(document.body),Array.from(document.querySelectorAll("*")).forEach(function(e){(0,d.stripEvents)(e)}),document.querySelector(".forager-holder")?(document.body.classList.add("foraging"),window.restore()):!function(){var e=document.createElement("div");e.classList.add("forager-holder"),document.body.appendChild(e);var t=(0,v["default"])();(0,p.load)().then(function(n){t.dispatch((0,f.setPages)(n)),u["default"].render(o["default"].createElement(l.Provider,{store:t},o["default"].createElement(s["default"],null)),e)}),window.restore=function(){t.getState().show||t.dispatch((0,f.openForager)())}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.connect=t.Provider=void 0;var a=n(164),o=r(a),i=n(167),u=r(i);t.Provider=o["default"],t.connect=u["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t["default"]=void 0;var u=n(1),l=n(165),c=r(l),s=n(166),f=(r(s),function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,n,r));return i.store=n.store,i}return i(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return u.Children.only(e)},t}(u.Component));t["default"]=f,f.propTypes={store:c["default"].isRequired,children:u.PropTypes.element.isRequired},f.childContextTypes={store:c["default"].isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1);t["default"]=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.displayName||e.name||"Component"}function l(e,t){try{return e.apply(t)}catch(n){return S.value=n,S}}function c(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],c=Boolean(e),p=e||w,h=void 0;h="function"==typeof t?t:t?(0,y["default"])(t):j;var m=n||x,g=r.pure,b=void 0===g?!0:g,E=r.withRef,O=void 0===E?!1:E,k=b&&m!==x,T=M++;return function(e){function t(e,t,n){var r=m(e,t,n);return r}var n="Connect("+u(e)+")",r=function(r){function u(e,t){a(this,u);var i=o(this,r.call(this,e,t));i.version=T,i.store=e.store||t.store,(0,P["default"])(i.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var l=i.store.getState();return i.state={storeState:l},i.clearCache(),i}return i(u,r),u.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},u.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},u.prototype.configureFinalMapState=function(e,t){var n=p(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:p,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},u.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},u.prototype.configureFinalMapDispatch=function(e,t){var n=h(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:h,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},u.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return this.stateProps&&(0,v["default"])(e,this.stateProps)?!1:(this.stateProps=e,!0)},u.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,v["default"])(e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},u.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&k&&(0,v["default"])(e,this.mergedProps)?!1:(this.mergedProps=e,!0)},u.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},u.prototype.trySubscribe=function(){c&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},u.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},u.prototype.componentDidMount=function(){this.trySubscribe()},u.prototype.componentWillReceiveProps=function(e){b&&(0,v["default"])(e,this.props)||(this.haveOwnPropsChanged=!0)},u.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},u.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},u.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=l(this.updateStatePropsIfNeeded,this);if(!n)return;n===S&&(this.statePropsPrecalculationError=S.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},u.prototype.getWrappedInstance=function(){return(0,P["default"])(O,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},u.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,a=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,a)throw a;var i=!0,u=!0;b&&o&&(i=n||t&&this.doStatePropsDependOnOwnProps,u=t&&this.doDispatchPropsDependOnOwnProps);var l=!1,c=!1;r?l=!0:i&&(l=this.updateStatePropsIfNeeded()),u&&(c=this.updateDispatchPropsIfNeeded());var p=!0;return p=l||c||t?this.updateMergedPropsIfNeeded():!1,!p&&o?o:(O?this.renderedElement=(0,f.createElement)(e,s({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,f.createElement)(e,this.mergedProps),this.renderedElement)},u}(f.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:d["default"]},r.propTypes={store:d["default"]},(0,_["default"])(r,e)}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t["default"]=c;var f=n(1),p=n(165),d=r(p),h=n(168),v=r(h),m=n(169),y=r(m),g=n(166),b=(r(g),n(172)),E=(r(b),n(185)),_=r(E),O=n(186),P=r(O),w=function(e){return{}},j=function(e){return{dispatch:e}},x=function(e,t,n){return s({},n,e,t)},S={value:null},M=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!a.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,a.bindActionCreators)(e,t)}}t.__esModule=!0,t["default"]=r;var a=n(170)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var a=n(171),o=r(a),i=n(180),u=r(i),l=n(182),c=r(l),s=n(183),f=r(s),p=n(184),d=r(p),h=n(181);r(h);t.createStore=o["default"],t.combineReducers=u["default"],t.bindActionCreators=c["default"],t.applyMiddleware=f["default"],t.compose=d["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){function r(){y===m&&(y=m.slice())}function o(){return v}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),y.push(e),function(){if(t){t=!1,r();var n=y.indexOf(e);y.splice(n,1)}}}function s(e){if(!(0,i["default"])(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error("Reducers may not dispatch actions.");try{g=!0,v=h(v,e)}finally{g=!1}for(var t=m=y,n=0;n<t.length;n++)t[n]();return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,s({type:c.INIT})}function p(){var e,t=u;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[l["default"]]=function(){return this},e}var d;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,v=t,m=[],y=m,g=!1;return s({type:c.INIT}),d={dispatch:s,subscribe:u,getState:o,replaceReducer:f},d[l["default"]]=p,d}t.__esModule=!0,t.ActionTypes=void 0,t["default"]=a;var o=n(172),i=r(o),u=n(176),l=r(u),c=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){function r(e){if(!i(e)||p.call(e)!=u||o(e))return!1;var t=a(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var a=n(173),o=n(174),i=n(175),u="[object Object]",l=Object.prototype,c=Function.prototype.toString,s=l.hasOwnProperty,f=c.call(Object),p=l.toString;e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){e.exports=n(177)},function(e,t,n){(function(e,r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(179),i=a(o),u=e;u="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof r?r:Function("return this")();var l=(0,i["default"])(u);t["default"]=l}).call(t,n(178)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:u.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var a="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:a}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+u.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function i(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var u,l=Object.keys(n);try{o(n)}catch(c){u=c}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(u)throw u;for(var r=!1,o={},i=0;i<l.length;i++){var c=l[i],s=n[c],f=e[c],p=s(f,t);if("undefined"==typeof p){var d=a(c,t);throw new Error(d)}o[c]=p,r=r||p!==f}return r?o:e}}t.__esModule=!0,t["default"]=i;var u=n(171),l=n(172),c=(r(l),n(181));r(c)},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),a={},o=0;o<r.length;o++){var i=r[o],u=e[i];"function"==typeof u&&(a[i]=n(u,t))}return a}t.__esModule=!0,t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var i=e(n,r,a),l=i.dispatch,c=[],s={getState:i.getState,dispatch:function(e){return l(e)}};return c=t.map(function(e){return e(s)}),l=u["default"].apply(void 0,c)(i.dispatch),o({},i,{dispatch:l})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=a;var i=n(184),u=r(i)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],a=t.slice(0,-1);return function(){return a.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},a="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,o){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);a&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var u=0;u<i.length;++u)if(!(n[i[u]]||r[i[u]]||o&&o[i[u]]))try{e[i[u]]=t[i[u]]}catch(l){}}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,a,o,i,u){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,u],s=0;l=new Error(t.replace(/%s/g,function(){return c[s++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(163),u=n(188),l=r(u),c=n(206),s=r(c),f=function(e){return e.show?o["default"].createElement("div",{id:"forager"},o["default"].createElement(l["default"],null),o["default"].createElement(s["default"],null)):null};t["default"]=(0,i.connect)(function(e){return{show:e.show}})(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return window.prompt("Page Name:\nCannot contain the following characters: < > : ' \\ / | ? * ")}function l(e){return e.filter(function(e){return void 0!==e}).map(function(e){return e.name})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),p=n(163),d=n(189),h=n(190),v=r(h),m=n(191),y=(n(192),n(194)),g=n(195),b=n(201),E=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.addHandler=n.addHandler.bind(n),n.renameHandler=n.renameHandler.bind(n),n}return i(t,e),c(t,[{key:"addHandler",value:function(e){var t=this.props,n=t.pages,r=t.showMessage,a=t.addPage,o=u();if((0,m.validName)(o,l(n))){var i=(0,y.createElement)("body");i=Object.assign({},i,{index:0,parent:null,matches:[document.body]}),a({name:o,elements:[i]})}else r('Cannot Use Name: "'+o+'"',5e3,-1)}},{key:"renameHandler",value:function(e){var t=u(),n=this.props,r=n.pages,a=n.showMessage,o=n.renamePage;(0,m.validName)(t,l(r))?o(t):a('Cannot Use Name: "'+t+'"',5e3,-1)}},{key:"render",value:function(){var e=this.props,t=e.pages,n=(e.message,e.currentIndex),r=e.selectPage,a=e.uploadPage,o=e.showPreview,i=e.refreshMatches,u=e.syncPages,l=e.removePage,c=e.closeForager,s=0!==n;return f["default"].createElement("div",{className:"topbar"},f["default"].createElement("div",{className:"controls"},f["default"].createElement("div",{className:"page-controls"},"Page ",f["default"].createElement("select",{value:n,onChange:function(e){r(parseInt(e.target.value,10))}},t.map(function(e,t){return f["default"].createElement("option",{key:t,value:t},void 0===e?"":e.name)})),f["default"].createElement(d.PosButton,{text:"Add Page",click:this.addHandler}),f["default"].createElement(d.NeutralButton,{text:"Refresh",title:"Refresh the list of matched elements",click:function(){i()},disabled:!s}),f["default"].createElement(d.PosButton,{text:"Preview",click:function(){o()},disabled:!s}),f["default"].createElement(d.NegButton,{text:"Delete",click:function(){l()},disabled:!s}),f["default"].createElement(d.PosButton,{text:"Rename",click:this.renameHandler,disabled:!s}),f["default"].createElement(d.PosButton,{text:"Upload",click:function(){a()},disabled:!s}),f["default"].createElement(d.PosButton,{text:"Sync Pages",click:function(){u()}})),f["default"].createElement("div",{className:"app-controls"},f["default"].createElement(d.NegButton,{text:String.fromCharCode(215),classes:["transparent"],click:function(){document.body.classList.remove("foraging"),c()}}))),f["default"].createElement(v["default"],null))}}]),t}(f["default"].Component);t["default"]=(0,p.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex;return{currentIndex:r,pages:n}},{addPage:b.addPage,selectPage:b.selectPage,closeForager:b.closeForager,showMessage:g.showMessage,syncPages:b.syncPages,refreshMatches:b.refreshMatches,renamePage:b.renamePage,removePage:b.removePage,uploadPage:b.uploadPage,showPreview:b.showPreview})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.NeutralButton=t.NegButton=t.PosButton=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),u=r(i),l=(t.PosButton=function(e){var t=e.classes,n=a(e,["classes"]);return u["default"].createElement(l,o({},n,{classes:["pos"].concat(t)}))},t.NegButton=function(e){var t=e.classes,n=a(e,["classes"]);return u["default"].createElement(l,o({},n,{classes:["neg"].concat(t)}))},t.NeutralButton=function(e){var t=e.text,n=void 0===t?"":t,r=e.click,a=void 0===r?function(){}:r,o=e.classes,i=void 0===o?[]:o,l=e.title,c=void 0===l?"":l,s=e.disabled,f=void 0===s?!1:s,p=e.type,d=void 0===p?"button":p;return u["default"].createElement("button",{className:i.join(" "),title:c,disabled:f,type:d,onClick:a},n)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.message,n=e.rating,r=["message"];return 0>n?r.push("neg"):n>0&&r.push("pos"),i["default"].createElement("div",{className:r.join(" ")},t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),u=n(163),l=function(e){return i["default"].createElement("div",{className:"message-board"},e.messages.map(function(e){return i["default"].createElement(a,{key:e.id,message:e.message,rating:e.rating})}))};t["default"]=(0,u.connect)(function(e){return{messages:e.messages}})(l)},function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];switch(e.type){case"single":return r(e);case"all":return a(e);case"range":return o(e);default:return""}}function r(e){var t=e.index,n=void 0===t?0:t;return"captures element at index "+n}function a(e){var t=e.name,n=void 0===t?"":t;return'captures all elements, groups them as "'+n+'"'}function o(e){var t=e.name,n=void 0===t?"":t,r=e.low,a=e.high,o=null===a?"end":a;return"captures elements "+r+" to "+o+', groups them as "'+n+'"'}function i(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=u(e,10),a="";if(!t)return r;switch(t.type){case"single":a=r+"["+t.index+"]";break;case"all":a="["+r+"]";break;case"range":a=r+"["+t.low+":"+(t.high||"end")+"]"}return n&&(a+="*"),a}Object.defineProperty(t,"__esModule",{value:!0}),t.describeSpec=n,t.shortElement=i;var u=(t.validName=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(null===e||""===e)return!1;var n=/[<>:'\/\\\|\?\*]/;return null!==e.match(n)?!1:t.every(function(t){return t!==e})},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var n=void 0,r=void 0,a=t-3,o=a/2;a%2===0?(n=o,r=o):(n=Math.ceil(o),r=Math.floor(o));var i=e.slice(0,n),u=0===r?"":e.slice(-r);return i+"..."+u})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=e.charCodeAt(0);return!(65>t||t>90&&97>t||t>122)}Object.defineProperty(t,"__esModule",{value:!0}),t.allSelect=t.parts=t.count=t.select=t.protect=void 0;var o=n(193),i=t.protect=function(e){var t=document.querySelectorAll(e);Array.from(t).forEach(function(e){e.classList.add("no-select"),Array.from(e.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})})};t.select=function(e,t,n,a){var o=(t||"*")+":not(.no-select)";n||(n={type:"all"}),void 0!==a&&""!==a&&i(a);var u=Array.from(e).reduce(function(e,t){var r=t.querySelectorAll(o),a=n,i=a.type,u=[];switch(i){case"single":var l=n.index;u=void 0!==r[l]?[r[l]]:[];break;case"all":u=Array.from(r);break;case"range":var c=n.low,s=n.high||void 0;u=Array.from(r).slice(c,s)}return e.concat(u)},[]);return[].concat(r(new Set(u)))},t.count=function(e,t,n){var r=(t||"*")+":not(.no-select)";return n||(n={type:"all"}),Array.from(e).reduce(function(e,t){var a=t.querySelectorAll(r),o=0;switch(n.type){case"single":var i=n.index;o=void 0!==a[i]?1:0;break;case"all":o=a.length;break;case"range":var u=n.low,l=n.high;o=Array.from(a).slice(u,l||void 0).length}return e>o?e:o},0)},t.parts=function(e){var t=[o.currentSelector,o.potentialSelector,o.queryCheck,o.hoverClass,o.savedPreview],n=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*/,r=function(e){return!t.some(function(t){return t===e})&&n.test(e)},i=[],u=e.tagName.toLowerCase();return i.push(u),""!==e.id&&a(e.id)&&i.push("#"+e.id),Array.from(e.classList).forEach(function(e){r(e)&&i.push("."+e)}),i},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.currentSelector="current-element",t.potentialSelector="selectable-element",t.queryCheck="query-check",t.hoverClass="forager-highlight",t.savedPreview="saved-preview"},function(e,t,n){"use strict";function r(e){return e?void 0===e.value?e:"single"===e.type?{type:"single",index:e.value}:"all"===e.type?{type:"all",name:e.value}:void 0:{}}function a(e,t){for(var n=e[t],r=void 0;void 0===r;)void 0!==n.spec.name||null===n.parent?r=n.index:n=e[n.parent];return o(e,r,!0)}function o(e,t,n){var r=e[t],a=[];return void 0===r?[]:(n||void 0===r.spec.name?(r.rules.forEach(function(e){a.push(e.name)}),r.childIndices.forEach(function(t){var n=e[t];a=a.concat(o(e,n.index,!1))})):a.push(r.spec.name),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGrow=t.fullGrow=t.clean=t.flatten=t.preparePages=t.createElement=void 0,t.levelNames=a;var i=(n(192),t.createElement=function(e){var t=arguments.length<=1||void 0===arguments[1]?{type:"single",index:0}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return{selector:e,spec:t,childIndices:[],rules:[],optional:n,matches:[]}},t.preparePages=function(e){var t=Object.keys(e).map(function(t){return e[t]}).filter(function(e){return null!==e}).map(function(e){return{name:e.name,elements:i(e.element)}});return t},t.flatten=function(e){if(void 0===e)return[];for(var t=0,n=[Object.assign({},e,{parent:null,childIndices:[]})];t<n.length;){var a=n[t];a.index=t,null!==a.parent&&n[a.parent].childIndices.push(t),a.spec=r(a.spec),a.children.forEach(function(e){n.push(Object.assign({},e,{parent:t,childIndices:[]}))}),delete a.children,t+=1}return n}),u=(t.clean=function(e){return{name:e.name,element:u(e.elements)}},t.fullGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),children:[],rules:e.rules.map(function(e){return Object.assign({},e)}),optional:e.optional,parent:e.parent}});return t.forEach(function(e){if(null!==e){var n=e.parent;delete e.parent,null!==n&&t[n].children.push(e)}}),t[0]});t.simpleGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),hasRules:e.rules.length>0,hasChildren:e.childIndices.length>0,children:[],index:e.index,parent:e.parent,matches:e.matches,optional:e.optional}});return t.forEach(function(e){null!==e&&null!==e.parent&&t[e.parent].children.push(e)}),t[0]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(196);Object.defineProperty(t,"ADD_MESSAGE",{enumerable:!0,get:function(){return a.ADD_MESSAGE}}),Object.defineProperty(t,"REMOVE_MESSAGE",{enumerable:!0,get:function(){return a.REMOVE_MESSAGE}});var o=n(197);Object.defineProperty(t,"showMessage",{enumerable:!0,get:function(){return o.showMessage}});var i=n(198);Object.defineProperty(t,"messagesMiddleware",{enumerable:!0,get:function(){return r(i)["default"]}});var u=n(200);Object.defineProperty(t,"messages",{enumerable:!0,get:function(){return r(u)["default"]}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SHOW_MESSAGE="@@erm/SHOW_MESSAGE",t.ADD_MESSAGE="@@erm/ADD_MESSAGE",t.REMOVE_MESSAGE="@@erm/REMOVE_MESSAGE"},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:i.SHOW_MESSAGE,message:e,lifetime:t,rating:n}}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:i.ADD_MESSAGE,message:e,id:t,rating:n}}function o(e){return{type:i.REMOVE_MESSAGE,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showMessage=r,t.addMessage=a,t.removeMessage=o;var i=n(196)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(196),a=n(197),o=n(199);t["default"]=function(e){return function(t){return function(n){if(n.type!==r.SHOW_MESSAGE)return t(n);var i=n.message,u=n.lifetime,l=n.rating,c=(0,o.pseudoRandomID)();return setTimeout(function(){e.dispatch((0,a.removeMessage)(c))},u),e.dispatch((0,a.addMessage)(i,c,l))}}}},function(e,t){"use strict";function n(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length;return Array.from(Array(10)).map(function(){return e[Math.floor(Math.random()*t)]}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.pseudoRandomID=n},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case a.ADD_MESSAGE:return e.concat([{id:t.id,message:t.message,rating:t.rating}]);case a.REMOVE_MESSAGE:return e.filter(function(e){return e.id!==t.id});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(196)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(202);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(204);Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var o=n(205);Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.openForager=t.closeForager=void 0;var a=n(203),o=r(a);t.closeForager=function(){return{type:o.CLOSE_FORAGER}},t.openForager=function(){return{type:o.OPEN_FORAGER}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SELECT_PAGE="SELECT_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SYNC_PAGES="SYNC_PAGES",t.SET_PAGES="SET_PAGES",
t.SET_MATCHES="SET_MATCHES",t.REFRESH_MATCHES="REFRESH_MATCHES",t.SELECT_ELEMENT="SELECT_ELEMENT",t.SAVE_ELEMENT="SAVE_ELEMENT",t.REMOVE_ELEMENT="REMOVE_ELEMENT",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE",t.UPDATE_RULE="UPDATE_RULE",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_ELEMENT_WIZARD="SHOW_ELEMENT_WIZARD",t.SHOW_EDIT_ELEMENT_WIZARD="SHOW_EDIT_ELEMENT_WIZARD",t.SHOW_RULE_WIZARD="SHOW_RULE_WIZARD",t.SHOW_EDIT_RULE_WIZARD="SHOW_EDIT_RULE_WIZARD",t.SHOW_PREVIEW="SHOW_PREVIEW",t.CLOSE_FORAGER="CLOSE_FORAGER",t.OPEN_FORAGER="OPEN_FORAGER"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.showPreview=t.showEditRuleWizard=t.showRuleWizard=t.showEditElementWizard=t.showElementWizard=t.showElementFrame=void 0;var a=n(203),o=r(a);t.showElementFrame=function(){return{type:o.SHOW_ELEMENT_FRAME}},t.showElementWizard=function(){return{type:o.SHOW_ELEMENT_WIZARD}},t.showEditElementWizard=function(){return{type:o.SHOW_EDIT_ELEMENT_WIZARD}},t.showRuleWizard=function(){return{type:o.SHOW_RULE_WIZARD}},t.showEditRuleWizard=function(e){return{type:o.SHOW_EDIT_RULE_WIZARD,index:e}},t.showPreview=function(){return{type:o.SHOW_PREVIEW}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRule=t.removeRule=t.saveRule=t.removeElement=t.updateElement=t.saveElement=t.selectElement=t.refreshMatches=t.setMatches=t.setPages=t.syncPages=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.selectPage=void 0;var a=n(203),o=r(a);t.selectPage=function(e){return{type:o.SELECT_PAGE,index:e}},t.addPage=function(e){return{type:o.ADD_PAGE,page:e}},t.removePage=function(){return{type:o.REMOVE_PAGE}},t.renamePage=function(e){return{type:o.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:o.UPLOAD_PAGE}},t.syncPages=function(){return{type:o.SYNC_PAGES}},t.setPages=function(e){return{type:o.SET_PAGES,pages:e}},t.setMatches=function(e){return{type:o.SET_MATCHES,matches:e}},t.refreshMatches=function(e){return{type:o.REFRESH_MATCHES}},t.selectElement=function(e){return{type:o.SELECT_ELEMENT,index:e}},t.saveElement=function(e){return{type:o.SAVE_ELEMENT,element:e}},t.updateElement=function(e,t){return{type:o.UPDATE_ELEMENT,index:e,newProps:t}},t.removeElement=function(){return{type:o.REMOVE_ELEMENT}},t.saveRule=function(e){return{type:o.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:o.REMOVE_RULE,index:e}},t.updateRule=function(e,t){return{type:o.UPDATE_RULE,index:e,rule:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(163),u=n(207),l=r(u),c=n(216),s=r(c),f=n(235),p=r(f),d=n(236),h=r(d),v=n(246),m=r(v),y=n(247),g=r(y),b=function(e){var t=e.frame;switch(t.name){case"element":return o["default"].createElement(l["default"],null);case"element-wizard":return o["default"].createElement(s["default"],null);case"edit-element-wizard":return o["default"].createElement(p["default"],null);case"rule-wizard":return o["default"].createElement(h["default"],null);case"edit-rule-wizard":return o["default"].createElement(m["default"],null);case"preview":return o["default"].createElement(g["default"],null);default:return null}};t["default"]=(0,i.connect)(function(e){return{frame:e.frame}})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(163),f=n(208),p=r(f),d=n(212),h=r(d),v=n(211),m=n(215),y=n(193),g=function(e){function t(e){return a(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.element;return void 0===e?c["default"].createElement("div",{className:"frame"}):c["default"].createElement("div",{className:"frame"},c["default"].createElement(p["default"],null),c["default"].createElement(h["default"],{element:e,active:!0}))}},{key:"componentWillMount",value:function(){(0,v.unhighlight)(y.currentSelector),this.props.element&&(0,v.highlight)(this.props.element.matches,y.currentSelector)}},{key:"componentWillReceiveProps",value:function(e){(0,v.unhighlight)(y.currentSelector),void 0!==e.element&&e.element!==this.props.element&&(0,v.highlight)(e.element.matches,y.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,v.unhighlight)(y.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{element:(0,m.currentElement)(t)}})(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=(0,h.path)(),n=e.source,r=e.target;return t.moveTo(r.y,r.x),t.bezierCurveTo((r.y+n.y)/2,r.x,(r.y+n.y)/2,n.x,n.y,n.x),t.toString()}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),p=n(163),d=n(209),h=n(210),v=n(191),m=n(194),y=n(211),g=n(201),b=n(193),E=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n._makeNodes=n._makeNodes.bind(n),n}return i(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.width,n=e.height;this.setState({tree:(0,d.tree)().size([n,t])})}},{key:"_makeNodes",value:function(){var e=this.props,t=e.page,n=e.elementIndex,r=e.active,a=e.selectElement,o=this.state.tree,i=(0,m.simpleGrow)(t.elements),c=(0,d.hierarchy)(i);o(c);var s=c.descendants().map(function(e,t){return f["default"].createElement(_,l({key:t,current:e.index===n,select:a,active:r},e))}),p=c.links().map(function(e,t){return f["default"].createElement("path",{key:t,className:"link",d:u(e)})});return f["default"].createElement("g",{transform:"translate(50,25)"},f["default"].createElement("g",{className:"links"},p),f["default"].createElement("g",{className:"nodes"},s))}},{key:"render",value:function(){if(void 0===this.props.page)return null;var e=this.props,t=e.width,n=e.height,r=e.active;return f["default"].createElement("div",{className:"tree"},f["default"].createElement("svg",{width:t+100,height:n+50,className:r?null:"not-allowed"},this._makeNodes()))}}]),t}(f["default"].Component);E.defaultProps={width:400,height:150};var _=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleClick=n.handleClick.bind(n),n.handleMouseover=n.handleMouseover.bind(n),n.handleMouseout=n.handleMouseout.bind(n),n}return i(t,e),c(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.select(this.props.data.index)}},{key:"handleMouseover",value:function(e){(0,y.highlight)(this.props.data.matches,b.savedPreview)}},{key:"handleMouseout",value:function(e){(0,y.unhighlight)(b.savedPreview)}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.data,r=e.active,a=e.children,o=e.x,i=e.y,u=n.hasRules,c=n.selector,s=n.spec,p=n.optional,d=!(u||a&&a.length),h=u?f["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):f["default"].createElement("circle",{r:"3"}),m=["node",t?"current":null,d?"empty":null],y=r?{onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout}:{};return f["default"].createElement("g",l({className:m.join(" "),transform:"translate("+i+","+o+")"},y),f["default"].createElement("text",{y:"-10"},(0,v.shortElement)(c,s,p)),h)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(b.savedPreview)}}]),t}(f["default"].Component);t["default"]=(0,p.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,o=t.elementIndex,i=r[a];return{page:i,active:"element"===n.name,elementIndex:o}},{selectElement:g.selectElement})(E)},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){Array.from(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){Array.from(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,n,r,a){function o(e){return function(n){n.target.classList.contains(t)&&(n.stopPropagation(),e(n))}}Array.from(e).forEach(function(e){e.classList.add(t)});var i=o(n),u=o(r),l=o(a);return document.body.addEventListener("mouseover",i,!1),document.body.addEventListener("mouseout",u,!1),document.body.addEventListener("click",l,!1),function(){Array.from(e).forEach(function(e){e.classList.remove(t)}),document.body.removeEventListener("mouseover",i,!1),document.body.removeEventListener("mouseout",u,!1),document.body.removeEventListener("click",l,!1)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.element,n=void 0===t?{}:t,r=e.active,a=void 0===r?!0:r,i=e.showElementWizard,l=e.showRuleWizard,c=e.showEditElementWizard,p=e.removeElement,d=0===n.index;return u["default"].createElement("div",{className:"info-box"},u["default"].createElement("div",{className:"info"},u["default"].createElement(s["default"],o({active:a},n))),u["default"].createElement("div",{className:"buttons"},u["default"].createElement(f.PosButton,{text:"Add Child",disabled:!a,click:function(){i()}}),u["default"].createElement(f.PosButton,{text:"Add Rule",disabled:!a,click:function(){l()}}),u["default"].createElement(f.NeutralButton,{text:"Edit",disabled:!a||d,click:function(){c()}}),u["default"].createElement(f.NegButton,{text:d?"Reset":"Delete",title:d?"Reset Page":"Delete Element",disabled:!a,click:function(){p()}})))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),u=r(i),l=n(163),c=n(213),s=r(c),f=n(189),p=n(201);a.propTypes={element:u["default"].PropTypes.object,active:u["default"].PropTypes.bool},t["default"]=(0,l.connect)(null,{showElementWizard:p.showElementWizard,removeElement:p.removeElement,showRuleWizard:p.showRuleWizard,showEditElementWizard:p.showEditElementWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.selector,n=e.rules,r=e.spec,a=e.optional,o=void 0===a?!1:a,i=e.active,l=void 0===i?!0:i;return u["default"].createElement("div",{className:"element"},u["default"].createElement("div",null,u["default"].createElement("span",{className:"big bold"},t,o?u["default"].createElement("span",{title:"optional"},"*"):null)),u["default"].createElement("div",null,(0,s.describeSpec)(r)),u["default"].createElement(f,{rules:n,active:l}))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),u=r(i),l=n(214),c=r(l),s=n(191),f=function(e){var t=e.rules,n=e.active;return t.length?u["default"].createElement("ul",{className:"rules"},t.map(function(e,t){return u["default"].createElement(c["default"],o({key:t,index:t,active:n},e))})):null};t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.attr,r=e.type,a=e.active,o=void 0===a?!0:a,u=e.index,c=e.removeRule,s=e.updateRule;return i["default"].createElement("li",{className:"rule"},i["default"].createElement("span",{className:"rule-name",title:"name"},t),i["default"].createElement("span",{className:"rule-attr",title:"attribute (or text)"},n),i["default"].createElement("span",{className:"rule-type",title:"data type"},r),o?i["default"].createElement(l.NeutralButton,{text:"Edit",click:function(){s(u)}}):null,o?i["default"].createElement(l.NegButton,{text:"Delete",click:function(){c(u)}}):null)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),u=n(163),l=n(189),c=n(201);a.propTypes={removeRule:i["default"].PropTypes.func.isRequired,updateRule:i["default"].PropTypes.func.isRequired,name:i["default"].PropTypes.string.isRequired,attr:i["default"].PropTypes.string.isRequired,type:i["default"].PropTypes.string.isRequired,active:i["default"].PropTypes.bool},t["default"]=(0,u.connect)(null,{removeRule:c.removeRule,updateRule:c.showEditRuleWizard})(a)},function(e,t,n){"use strict";function r(e){var t=e.pages,n=e.pageIndex,r=e.elementIndex,a=t[n];return void 0===a?void 0:a.elements[r]}function a(e){var t=e.pages,n=e.pageIndex,r=e.elementIndex,a=t[n],o=void 0===a?void 0:a.elements[r];return void 0===o?void 0:a.elements[o.parent]}function o(e){var t=r(e),n=null!==t.parent?t.parent:e.elementIndex,a=e.pages[e.pageIndex].elements;return(0,i.levelNames)(a,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.currentElement=r,t.currentParent=a,t.takenNames=o;var i=n(194)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(163),f=n(208),p=r(f),d=n(217),h=r(d),v=n(218),m=n(201),y=n(211),g=n(215),b=n(193),E=[v.Elements,v.Parts,v.CreateType,v.CreateValue,v.CreateOptional,v.ConfirmElement],_=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return i(t,e),u(t,[{key:"save",value:function(e){this.props.saveElement(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(p["default"],null),c["default"].createElement(h["default"],{steps:E,initialData:{},staticData:{parent:e},save:this.save,cancel:this.cancel}))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,y.highlight)(e.matches,b.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,y.unhighlight)(b.currentSelector);var n=this.props.current;(0,y.highlight)(n.matches,b.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(b.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{current:(0,g.currentElement)(t)}},{saveElement:m.saveElement,cancel:m.showElementFrame})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={position:0,data:[e.initialData].concat(Array(e.steps.length))},n.next=n.next.bind(n),n.previous=n.previous.bind(n),n.cancel=n.cancel.bind(n),n.finish=n.finish.bind(n),n}return i(t,e),u(t,[{key:"next",value:function(e){var t=this.state,n=t.position,r=t.data,a=this.props.steps,o=a.length-1,i=n===o?n:n+1;r[i]=e,this.setState({position:i,data:r})}},{key:"previous",value:function(){var e=this.state,t=e.position;e.data;this.setState({position:t>0?t-1:0})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"finish",value:function(e){this.props.save(e)}},{key:"render",value:function(){var e=this.state,t=e.position,n=e.data,r=this.props,a=r.steps,o=r.staticData,i=r.children,u=a[t],l=0===t?void 0:this.previous,s=t===a.length-1?this.finish:this.next;return c["default"].createElement("div",{className:"wizard"},c["default"].createElement(f,{steps:a.length,position:t}),c["default"].createElement(u,{startData:n[t],endData:n[t+1],staticData:o,cancel:this.cancel,next:s,previous:l},i))}}]),t}(c["default"].Component);s.propTypes={initialData:c["default"].PropTypes.object.isRequired,steps:c["default"].PropTypes.array.isRequired,staticData:c["default"].PropTypes.object,save:c["default"].PropTypes.func,cancel:c["default"].PropTypes.func};var f=function(e){var t=e.steps,n=e.position;return c["default"].createElement("div",{className:"progress-bar"},Array.from(Array(t)).map(function(e,t){return c["default"].createElement("div",{key:t,className:["marker",n>t?"complete":null,t==n?"active":null].join(" ")})}))};t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(219);Object.defineProperty(t,"Elements",{enumerable:!0,get:function(){return r(a)["default"]}});var o=n(221);Object.defineProperty(t,"Parts",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(222);Object.defineProperty(t,"CreateType",{enumerable:!0,get:function(){return i.CreateType}}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return i.EditType}});var u=n(224);Object.defineProperty(t,"CreateValue",{enumerable:!0,get:function(){return u.CreateValue}}),Object.defineProperty(t,"EditValue",{enumerable:!0,get:function(){return u.EditValue}});var l=n(231);Object.defineProperty(t,"CreateOptional",{enumerable:!0,get:function(){return l.CreateOptional}}),Object.defineProperty(t,"EditOptional",{enumerable:!0,get:function(){return l.EditOptional}});var c=n(233);Object.defineProperty(t,"ConfirmElement",{enumerable:!0,get:function(){return r(c)["default"]}});var s=n(234);Object.defineProperty(t,"ConfirmUpdate",{enumerable:!0,get:function(){return r(s)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(220),f=r(s),p=n(192),d=n(211),h=n(193),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=[["*"]],i=n.props.staticData,u=i.parent;return(0,p.allSelect)(u.matches)&&r.push(["option"]),n.state={checked:void 0,selectors:r,eleCount:0,error:!0},n.mouseover=n.mouseover.bind(n),n.mouseout=n.mouseout.bind(n),n.click=n.click.bind(n),n.addEvents=n.addEvents.bind(n),n.setRadio=n.setRadio.bind(n),n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),u(t,[{key:"mouseover",value:function(e){e.target.classList.add(h.hoverClass)}},{key:"mouseout",value:function(e){e.target.classList.remove(h.hoverClass)}},{key:"click",value:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.path).filter(function(e){return e.classList&&e.classList.contains(h.potentialSelector)}).reverse().map(function(e){return(0,p.parts)(e)});this.setState({selectors:[["*"]].concat(t),checked:void 0,error:!0})}},{key:"addEvents",value:function(e){var t=(0,p.select)(e.parent.matches,null,null,".forager-holder");this.iUnhighlight&&(this.iUnhighlight(),delete this.iUnhighlight),this.iUnhighlight=(0,d.iHighlight)(t,h.potentialSelector,this.mouseover,this.mouseout,this.click)}},{key:"setRadio",value:function(e){var t=this.state.selectors[e].join(""),n=this.props.staticData,r=n.parent;this.setState({checked:e,eleCount:(0,p.count)(r.matches,t),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.checked,r=t.selectors,a=this.props.next,o=r[n];void 0!==n&&void 0!==o?a({parts:o}):this.setState({error:!0})}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectors,r=t.checked,a=t.eleCount,o=t.error;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("div",{className:"info"},c["default"].createElement("h3",null,"Select Relevant Element(s)"),c["default"].createElement("div",{className:"choices"},n.map(function(t,n){return c["default"].createElement(m,{key:n,selector:t,index:n,checked:n===r,select:e.setRadio})})),c["default"].createElement("h5",null,"Count: ",a)),c["default"].createElement(f["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:o}))}},{key:"componentWillMount",value:function(){var e=this.props.staticData;this.addEvents(e)}},{key:"componentWillReceiveNewProps",value:function(e){var t=e.staticData;this.addEvents(t)}},{key:"componentWillUpdate",value:function(e,t){(0,d.unhighlight)(h.queryCheck);var n=t.selectors[t.checked];if(void 0!==n){var r=n.join(""),a=e.staticData,o=(0,p.select)(a.parent.matches,r,null,".forager-holder");(0,d.highlight)(o,h.queryCheck)}}},{key:"componentWillUnmount",value:function(){(0,d.unhighlight)(h.queryCheck),this.iUnhighlight()}}]),t}(c["default"].Component);v.propTypes={startData:c["default"].PropTypes.object,endData:c["default"].PropTypes.object,staticData:c["default"].PropTypes.object,next:c["default"].PropTypes.func,previous:c["default"].PropTypes.func};var m=function(e){var t=e.selector,n=e.checked,r=e.select,a=e.index;return c["default"].createElement("label",{className:n?"selected":""},c["default"].createElement("input",{type:"radio",name:"css-selector",checked:n,onChange:function(){return r(a)}}),t.join(""))};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.previous,n=e.next,r=e.nextText,a=void 0===r?"Next":r,o=e.cancel,l=e.error,c=void 0===l?!1:l;return i["default"].createElement("div",{className:"buttons"},i["default"].createElement(u.NegButton,{text:"Previous",click:t,disabled:void 0===t}),i["default"].createElement(u.PosButton,{text:a,type:"submit",click:n,disabled:c}),i["default"].createElement(u.NegButton,{text:"Cancel",click:o}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),i=r(o),u=n(189)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if((0,h.unhighlight)(v.queryCheck),""!==e){var n=(0,d.select)(t,e,null,".forager-holder");(0,h.highlight)(n,v.queryCheck)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(220),p=r(f),d=n(192),h=n(211),v=n(193),m=function(e){return e.reduce(function(e,t){return e+(t.checked?t.name:"")},"")},y=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={parts:[],eleCount:0,error:!0},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleRadio=n.toggleRadio.bind(n),n}return i(t,e),l(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.parts,n=this.props.next,r=m(t);""!==r?n({selector:r}):this.setState({error:!0})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleRadio",value:function(e){var t=e.target.value,n=this.state.parts;n[t].checked=!n[t].checked;var r=m(n),a=this.props.staticData,o=a.parent.matches;u(r,o),this.setState({parts:n,eleCount:""===r?0:(0,d.count)(o,r),error:""===r})}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.parts,a=n.parent,o=r.join("");u(o,a.matches),this.setState({parts:r.map(function(e){return{name:e,checked:!0}}),eleCount:(0,d.count)(a.matches,o),error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.parts,r=(t.eleCount,t.error),a=n.map(function(t,n){var r=t.name,a=t.checked;return s["default"].createElement("label",{key:n,className:a?"selected":""},s["default"].createElement("input",{type:"checkbox",name:"selector-part",value:n,checked:a,onChange:e.toggleRadio}),r)});return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"Select Relevant Part(s) of the CSS selector"),s["default"].createElement("div",{className:"choices"},a),s["default"].createElement("h5",null,"Count: ",this.state.eleCount)),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:r}))}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(s["default"].Component);y.propTypes={startData:s["default"].PropTypes.object,endData:s["default"].PropTypes.object,staticData:s["default"].PropTypes.object,next:s["default"].PropTypes.func,previous:s["default"].PropTypes.func},t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.endData,n=void 0===t?{}:t,r="single";return n.spec&&n.spec.type&&(r=n.spec.type),r}function l(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="single";return r.spec&&r.spec.type?a=r.spec.type:t.spec&&t.spec.type&&(a=t.spec.type),a}function c(e,t,n){var r=e.startData,a=e.staticData,o=t.type,i=r.selector,u=a.parent,l={type:o};"single"===o?l.index=0:"range"===o&&(l.low=0,l.high=void 0);var c=(0,b.select)(u.matches,i,l,".forager-holder");(0,E.highlight)(c,n)}function s(e,t,n){var r=e.startData,a=e.staticData,o=t.type,i=a.parent,u=void 0===i?{}:i,l=u.matches,c=void 0===l?[document]:l,s={type:o};if("single"===o){var f=r.spec&&"single"===r.spec.type;s.index=f?r.spec.index:0}else if("range"===o){var p=r.spec&&"range"===r.spec.type;s.low=p?r.spec.low:0,s.high=p?r.spec.high:void 0}var d=(0,b.select)(c,r.selector,s,".forager-holder");(0,E.highlight)(d,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditType=t.CreateType=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),h=r(d),v=n(220),m=r(v),y=n(223),g=r(y),b=n(192),E=n(211),_=n(193),O=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:e.setupState(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return i(t,e),p(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,o={type:t};switch(t){case"single":o.index=0;break;case"all":o.name="";break;case"range":o.name="",o.low=0,o.high=void 0}a(Object.assign({},r,{spec:o}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this.state.type,t=this.props.noPrevious,n=void 0===t?!1:t,r=["single","all","range"];
return h["default"].createElement("form",{className:"info-box"},h["default"].createElement("div",{className:"info"},h["default"].createElement(g["default"],{types:r,current:e,setType:this.typeHandler})),h["default"].createElement(m["default"],{previous:n?void 0:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.highlight,n=e.highlightClass;t(this.props,this.state,n)}},{key:"componentWillUpdate",value:function(e,t){(0,E.unhighlight)(this.props.highlightClass);var n=e.highlight,r=e.highlightClass;n(e,t,r)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(this.props.highlightClass)}}]),t}(h["default"].Component);O.propTypes={startData:h["default"].PropTypes.object,endData:h["default"].PropTypes.object,staticData:h["default"].PropTypes.object,next:h["default"].PropTypes.func,previous:h["default"].PropTypes.func,noPrevious:h["default"].PropTypes.bool};t.CreateType=function(e){return h["default"].createElement(O,f({highlight:c,highlightClass:_.queryCheck,setupState:u},e))},t.EditType=function(e){return h["default"].createElement(O,f({highlight:s,highlightClass:_.currentSelector,setupState:l,noPrevious:!0},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.types,n=e.current,r=e.setType,a=t.map(function(e){var t=n===e;return i["default"].createElement("label",{key:e,className:t?"selected":null},i["default"].createElement("input",{type:"radio",name:"type",value:e,checked:t,onChange:r}),e)});return i["default"].createElement("div",null,i["default"].createElement("h3",null,"Should the element target a single element or all?"),a)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),i=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.startData.spec;switch(t.type){case"all":return u["default"].createElement(l.CreateAllValueStep,e);case"single":return u["default"].createElement(c.CreateSingleValueStep,e);case"range":return u["default"].createElement(s.CreateRangeValueStep,e);default:return null}}function o(e){var t=e.startData.spec;switch(t.type){case"all":return u["default"].createElement(l.EditAllValueStep,e);case"single":return u["default"].createElement(c.EditSingleValueStep,e);case"range":return u["default"].createElement(s.EditRangeValueStep,e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateValue=a,t.EditValue=o;var i=n(1),u=r(i),l=n(225),c=n(227),s=n(229)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.spec&&t.spec.name&&(a=t.spec.name),a}function l(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.originalSpec&&void 0!==t.originalSpec.name&&(a=t.originalSpec.name),a}function c(e,t){var n=t.name,r=e.takenNames;return r.every(function(e){return e!==n})}function s(e,t){var n=t.name,r=e.takenNames,a=e.staticData,o=a.originalSpec.name;return n===o||r.every(function(e){return e!==n})}function f(e,t,n){var r=e.startData,a=e.staticData,o=t.name,i=r.selector,u=a.parent,l=(0,_.select)(u.matches,i,{type:"all",name:o},".forager-holder");(0,O.highlight)(l,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditAllValueStep=t.CreateAllValueStep=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),m=n(163),y=n(226),g=r(y),b=n(220),E=r(b),_=n(192),O=n(211),P=n(215),w=n(195),j=n(193),x=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=e.setupState(e);return n.state={name:r,error:""===r},n.nameHandler=n.nameHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),d(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,o=a.startData,i=a.next,u=a.showMessage,l=a.validate;if(!r){var c=l(this.props,this.state);if(!c)return void u('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);var s={type:"all",name:n};i(Object.assign({},o,{spec:s}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return v["default"].createElement("form",{className:"info-box"},v["default"].createElement("div",{className:"info"},v["default"].createElement(g["default"],{name:t,setName:this.nameHandler})),v["default"].createElement(E["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){f(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,O.unhighlight)(this.props.highlightClass),f(e,t,e.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,O.unhighlight)(this.props.highlightClass)}}]),t}(v["default"].Component);x.propTypes={startData:v["default"].PropTypes.object,endData:v["default"].PropTypes.object,staticData:v["default"].PropTypes.object,next:v["default"].PropTypes.func,previous:v["default"].PropTypes.func};var S=(0,m.connect)(function(e){var t=e.page;return{takenNames:(0,P.takenNames)(t)}},{showMessage:w.showMessage})(x);t.CreateAllValueStep=function(e){return v["default"].createElement(S,p({setupState:u,highlightClass:j.queryCheck,validate:c},e))},t.EditAllValueStep=function(e){return v["default"].createElement(S,p({setupState:l,highlightClass:j.currentSelector,validate:s},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.setName;return i["default"].createElement("div",null,i["default"].createElement("h3",null,"What should the array of elements be named?"),i["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:n}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),i=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.spec&&void 0!==t.spec.index&&(a=t.spec.index),a}function l(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.originalSpec&&void 0!==t.originalSpec.index&&(a=t.originalSpec.index),a}function c(e,t,n){var r=e.startData,a=e.staticData,o=t.index,i=r.selector,u=a.parent,l=(0,g.select)(u.matches,i,{type:"single",index:o},".forager-holder");(0,b.highlight)(l,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditSingleValueStep=t.CreateSingleValueStep=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),h=n(220),v=r(h),m=n(228),y=r(m),g=n(192),b=n(211),E=n(193),_=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:e.setupState(e),error:!1},n.indexHandler=n.indexHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),f(t,[{key:"indexHandler",value:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,o=a.startData,i=a.next,u=a.validate;if(!r){var l=u(this.props,this.state);if(l){var c={type:"single",index:n};i(Object.assign({},o,{spec:c}))}}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.index,n=e.error,r=this.props,a=r.startData,o=r.staticData,i=a.selector,u=o.parent,l=(0,g.count)(u.matches,i);return d["default"].createElement("form",{className:"info-box"},d["default"].createElement("div",{className:"info"},d["default"].createElement(y["default"],{index:t,count:l,setIndex:this.indexHandler})),d["default"].createElement(v["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){c(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(this.props.highlightClass),c(e,t,this.props.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(this.props.highlightClass)}}]),t}(d["default"].Component);_.propTypes={startData:d["default"].PropTypes.object,endData:d["default"].PropTypes.object,staticData:d["default"].PropTypes.object,next:d["default"].PropTypes.func,previous:d["default"].PropTypes.func};t.CreateSingleValueStep=function(e){return d["default"].createElement(_,s({setupState:u,highlightClass:E.queryCheck,validate:function(){return!0}},e))},t.EditSingleValueStep=function(e){return d["default"].createElement(_,s({setupState:l,highlightClass:E.currentSelector,validate:function(){return!0}},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=function(e){var t=e.index,n=e.count,r=e.setIndex;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"The element at which index should be selected?"),o["default"].createElement("select",{value:t,onChange:r},Array.from(new Array(n)).map(function(e,t){return o["default"].createElement("option",{key:t,value:t},t)})))};t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="",o=0,i="end";return r.spec?(r.spec.name&&(a=r.spec.name),void 0!==r.spec.low&&(o=r.spec.low),void 0!==r.spec.high&&(i=null===r.spec.high?"end":r.spec.high)):t.spec&&(t.spec.name&&(a=t.spec.name),void 0!==t.spec.low&&(o=t.spec.low),void 0!==t.spec.high&&(i=null===t.spec.high?"end":t.spec.high)),{name:a,low:o,high:i,error:""===a}}function l(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a="",o=0,i="end";if(r.spec){var u=r.spec;u.name&&(a=u.name),void 0!==u.low&&(o=u.low),void 0!==u.high&&(i=null===u.high?"end":u.high)}else if(t.originalSpec){var l=t.originalSpec;l.name&&(a=l.name),void 0!==l.low&&(o=l.low),void 0!==l.high&&(i=null===l.high?"end":l.high)}return{name:a,low:o,high:i,error:""===a}}function c(e,t){var n=t.name,r=e.takenNames;return r.every(function(e){return e!==n})}function s(e,t){var n=t.name,r=e.takenNames,a=e.staticData,o=a.originalSpec.name;return n===o||r.every(function(e){return e!==n})}function f(e,t,n){var r=e.startData,a=e.staticData,o=t.name,i=t.low,u=t.high,l=r.selector,c=a.parent;"end"===u&&(u=null);var s=(0,_.select)(c.matches,l,{type:"range",name:o,low:i,high:u},".forager-holder");(0,O.highlight)(s,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditRangeValueStep=t.CreateRangeValueStep=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),m=n(163),y=n(220),g=r(y),b=n(230),E=r(b),_=n(192),O=n(211),P=n(215),w=n(195),j=n(193),x=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state=e.setupState(e),n.nameHandler=n.nameHandler.bind(n),n.lowHandler=n.lowHandler.bind(n),n.highHandler=n.highHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),d(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"lowHandler",value:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})}},{key:"highHandler",value:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,o=t.error,i=this.props,u=i.startData,l=i.next,c=(i.takenNames,i.showMessage),s=i.validate,f=s(this.props,this.state);if(!f)return void c('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!o){var p={type:"range",name:n,low:r,high:"end"===a?null:a};l(Object.assign({},u,{spec:p}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,o=this.props,i=o.startData,u=o.staticData,l=i.selector,c=u.parent,s=(0,_.count)(c.matches,l);return v["default"].createElement("form",{className:"info-box"},v["default"].createElement("div",{className:"info"},v["default"].createElement(E["default"],{name:t,low:n,high:r,count:s,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),v["default"].createElement(g["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillMount",value:function(){f(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,O.unhighlight)(this.props.highlightClass),f(e,t,this.props.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,O.unhighlight)(this.props.highlightClass)}}]),t}(v["default"].Component);x.propTypes={startData:v["default"].PropTypes.object,endData:v["default"].PropTypes.object,staticData:v["default"].PropTypes.object,next:v["default"].PropTypes.func,previous:v["default"].PropTypes.func};var S=(0,m.connect)(function(e){var t=e.page;return{takenNames:(0,P.takenNames)(t)}},{showMessage:w.showMessage})(x);t.CreateRangeValueStep=function(e){return v["default"].createElement(S,p({setupState:u,highlightClass:j.queryCheck,validate:c},e))},t.EditRangeValueStep=function(e){return v["default"].createElement(S,p({setupState:l,highlightClass:j.currentSelector,validate:s},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.low,r=e.high,a=e.count,o=e.setName,u=e.setLow,l=e.setHigh;return i["default"].createElement("div",null,i["default"].createElement("h3",null,"What should the array of elements be named?"),i["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:o}),i["default"].createElement("h3",null,"Which elements should be selected?"),i["default"].createElement("select",{value:n,onChange:u},Array.from(new Array(a)).map(function(e,t){return i["default"].createElement("option",{key:t,value:t},t)}))," - ",i["default"].createElement("select",{value:r,onChange:l},Array.from(new Array(a)).map(function(e,t){return i["default"].createElement("option",{key:t,value:t},t)}),i["default"].createElement("option",{key:"end",value:"end"},"end")))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),i=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),a}function l(e,t,n){var r=e.startData,a=e.staticData,o=(r.selector,r.spec),i=a.parent,u=void 0===i?{}:i,l=u.matches,c=void 0===l?[document]:l,s=(0,y.select)(c,r.selector,o,".forager-holder");(0,g.highlight)(s,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditOptional=t.CreateOptional=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),d=n(220),h=r(d),v=n(232),m=r(v),y=n(192),g=n(211),b=n(193),E=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={optional:u(n.props)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleOptional=n.toggleOptional.bind(n),n}return i(t,e),s(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleOptional",value:function(e){this.setState({optional:e.target.checked})}},{key:"render",value:function(){var e=this.state.optional,t=this.props.startData;t.selector;return p["default"].createElement("form",{className:"info-box"},p["default"].createElement("div",{className:"info"},p["default"].createElement(m["default"],{optional:e,toggle:this.toggleOptional})),p["default"].createElement(h["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){l(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,g.unhighlight)(this.props.highlightClass),l(e,t,e.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,g.unhighlight)(this.props.highlightClass)}}]),t}(p["default"].Component);E.propTypes={startData:p["default"].PropTypes.object,endData:p["default"].PropTypes.object,staticData:p["default"].PropTypes.object,next:p["default"].PropTypes.func,previous:p["default"].PropTypes.func,highlightClass:p["default"].PropTypes.string.isRequired};t.CreateOptional=function(e){return p["default"].createElement(E,c({highlightClass:b.queryCheck},e))},t.EditOptional=function(e){return p["default"].createElement(E,c({highlightClass:b.currentSelector},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=function(e){var t=e.optional,n=e.toggle;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"Is this element optional?"),o["default"].createElement("label",{className:t?"selected":null},o["default"].createElement("input",{type:"checkbox",checked:t,onChange:n}),t?"Yes":"No"))};t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(220),f=r(s),p=n(194),d=n(192),h=n(211),v=n(193),m=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),u(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.selector,o=n.spec,i=n.optional,u=(0,p.createElement)(a,o,i);r(u)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Element"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Selector: ",t),c["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),c["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.selector,a=t.spec,o=n.parent,i=(0,d.select)(o.matches,r,a,".forager-holder");(0,h.highlight)(i,v.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(c["default"].Component);m.propTypes={startData:c["default"].PropTypes.object,endData:c["default"].PropTypes.object,staticData:c["default"].PropTypes.object,next:c["default"].PropTypes.func,previous:c["default"].PropTypes.func},t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(220),f=r(s),p=(n(194),n(192)),d=n(211),h=n(193),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),u(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.spec,o=n.optional;r({optional:o,spec:a})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Updated Element"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Selector: ",t),c["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),c["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=(t.selector,t.spec),a=n.parent,o=void 0===a?{}:a,i=o.matches,u=void 0===i?[document]:i,l=(0,p.select)(u,t.selector,r,".forager-holder");(0,d.highlight)(l,h.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,d.unhighlight)(h.currentSelector)}}]),t}(c["default"].Component);v.propTypes={startData:c["default"].PropTypes.object,endData:c["default"].PropTypes.object,staticData:c["default"].PropTypes.object,next:c["default"].PropTypes.func,previous:c["default"].PropTypes.func},t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(163),f=n(217),p=r(f),d=n(208),h=r(d),v=n(218),m=n(201),y=n(215),g=[v.EditType,v.EditValue,v.EditOptional,v.ConfirmUpdate],b=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return i(t,e),u(t,[{key:"save",value:function(e){var t=this.props,n=t.current,r=t.updateElement,a=e.spec,o=e.optional;r(n.index,{spec:a,optional:o})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.parent,r=t.selector,a=t.spec,o=t.optional;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],null),c["default"].createElement(p["default"],{steps:g,initialData:{selector:r,spec:a,optional:o},staticData:{parent:n,originalSpec:a},save:this.save,cancel:this.cancel}))}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{current:(0,y.currentElement)(t),parent:(0,y.currentParent)(t)}},{updateElement:m.updateElement,cancel:m.showElementFrame})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(163),f=n(217),p=r(f),d=n(212),h=r(d),v=n(237),m=n(245),y=r(m),g=n(201),b=n(211),E=n(215),_=n(193),O=[v.Attribute,v.Type,v.Name,v.ConfirmRule],P=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return i(t,e),u(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){this.props.saveRule(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current,t=this.state.index;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],{active:!1,element:e}),c["default"].createElement(p["default"],{steps:O,initialData:{},staticData:{element:e.matches[t]},save:this.save,cancel:this.cancel},c["default"].createElement(y["default"],{index:t,count:e.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,b.highlight)(e.matches,_.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(_.currentSelector);var n=this.props.current;(0,b.highlight)(n.matches,_.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(_.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page;return{current:(0,E.currentElement)(t)}},{saveRule:g.saveRule,cancel:g.showElementFrame})(P)},function(e,t,n){"use strict";function r(e){
return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(238);Object.defineProperty(t,"Attribute",{enumerable:!0,get:function(){return r(a)["default"]}});var o=n(240);Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(241);Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return r(i)["default"]}});var u=n(243);Object.defineProperty(t,"ConfirmRule",{enumerable:!0,get:function(){return r(u)["default"]}});var l=n(244);Object.defineProperty(t,"ConfirmUpdateRule",{enumerable:!0,get:function(){return r(l)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.attribute?a=r.attribute:t.attr&&(a=t.attr),a}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(220),p=r(f),d=n(239),h=n(191),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=u(e);return n.state={attribute:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.attributeHandler=n.attributeHandler.bind(n),n}return i(t,e),l(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.attribute,r=t.error;if(!r){var a=this.props,o=a.startData,i=a.next;i(Object.assign({},o,{attribute:n}))}}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"attributeHandler",value:function(e){this.setState({attribute:e.target.value,error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.attribute,r=(t.index,t.error),a=this.props.staticData,o=a.element;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"Which attribute has the value that you want?"),s["default"].createElement("ul",null,(0,d.attributes)(o).map(function(t,r){return s["default"].createElement("li",{key:r},s["default"].createElement("label",null,s["default"].createElement("input",{type:"radio",value:t.name,checked:t.name===n,onChange:e.attributeHandler}),t.name),s["default"].createElement("p",{className:"line"},(0,h.abbreviate)(t.value,40)))})),this.props.children),s["default"].createElement(p["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:r}))}}]),t}(s["default"].Component);t["default"]=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripEvents=t.attributes=void 0;var r=n(193);t.attributes=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[r.currentSelector,r.potentialSelector,r.queryCheck,r.hoverClass,r.savedPreview],a=Array.from(e.attributes).reduce(function(e,r){var a=r.name,o=r.value;return t[a]?e:("class"===a&&(o=o.split(" ").filter(function(e){return!n.includes(e)&&""!==e}).join(" ")),""!==o&&e.push({name:a,value:o}),e)},[]),o=e.textContent.trim();return""!==o&&a.push({name:"text",value:o}),a},t.stripEvents=function(e){var t=Array.from(e.attributes);if(t.some(function(e){return e.name.startsWith("on")})){t.forEach(function(t){var n=t.name;n.startsWith("on")&&e.removeAttribute(n)});var n=e.cloneNode(!0);return e.parentNode.replaceChild(n,e),n}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.name?a=r.name:t.name&&(a=t.name),a}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(163),p=n(220),d=r(p),h=n(194),v=n(195),m=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=u(e);return n.state={name:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.nameHandler=n.nameHandler.bind(n),n}return i(t,e),l(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.name,n=this.props,r=n.takenNames,a=n.showMessage,o=n.startData,i=n.next,u=o.name;return t===u||r.every(function(e){return e!==t})?void i(Object.assign({},o,{name:t})):void a('"'+t+'" is a duplicate name and cannot be used.',5e3,-1)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"What should the rule be named?"),s["default"].createElement("input",{type:"text",placeholder:"e.g., name",value:t,onChange:this.nameHandler})),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r];return{takenNames:(0,h.levelNames)(o.elements,a)}},{showMessage:v.showMessage})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="string";return r.type?a=r.type:t.type&&(a=t.type),a}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(220),p=r(f),d=n(191),h=n(242),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:u(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return i(t,e),l(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{type:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.type,n=this.props,r=n.startData,a=n.children,o=r.attribute,i=this.props.staticData,u=i.element,l="text"===o?u.innerText:u.getAttribute(o),c=void 0;switch(t){case"string":c=(0,d.abbreviate)(l,40);break;case"int":c=(0,h.integer)(l),null===c&&(c="No int detected");break;case"float":c=(0,h["float"])(l),null===c&&(c="No float detected")}return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"What type of value is this?"),["string","int","float"].map(function(n,r){return s["default"].createElement("label",{key:r},s["default"].createElement("input",{type:"radio",value:n,checked:n===t,onChange:e.typeHandler}),n)}),s["default"].createElement("p",{className:"line"},c),a),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}}]),t}(s["default"].Component);t["default"]=v},function(e,t){"use strict";function n(e){var t=/\d+/,n=e.match(t);return null!==n?parseInt(n[0],10):null}function r(e){var t=/\d+(\.\d+)?/,n=e.match(t);return null!==n?parseFloat(n[0]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.integer=n,t["float"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(220),f=r(s),p=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),u(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,o=n.attribute,i=n.type;r({name:a,type:i,attr:o})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Rule"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Name: ",t),c["default"].createElement("li",null,"Attribute: ",n),c["default"].createElement("li",null,"Type: ",r)),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}}]),t}(c["default"].Component);t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(220),f=r(s),p=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return i(t,e),u(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,o=n.attribute,i=n.type;r({name:a,type:i,attr:o})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Updated Rule"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Name: ",t),c["default"].createElement("li",null,"Attribute: ",n),c["default"].createElement("li",null,"Type: ",r)),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}}]),t}(c["default"].Component);t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(189),u=function(e){var t=e.index,n=e.count,r=e.setIndex,a=(t+1)%n,u=(t-1+n)%n;return o["default"].createElement("div",null,o["default"].createElement(i.NeutralButton,{click:function(){r(u)},text:"<"}),t+1," / ",n,o["default"].createElement(i.NeutralButton,{click:function(){r(a)},text:">"}))};t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(163),f=n(217),p=r(f),d=n(212),h=r(d),v=n(237),m=n(245),y=r(m),g=n(201),b=n(211),E=n(215),_=n(193),O=[v.Attribute,v.Type,v.Name,v.ConfirmUpdateRule],P=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return i(t,e),u(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){var t=this.props,n=t.updateRule,r=t.ruleIndex;n(r,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.ruleIndex,r=t.rules[n];if(void 0===n||void 0===n)return null;var a=this.state.index,o=r.name,i=r.attr,u=r.type;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],{active:!1,element:t}),c["default"].createElement(p["default"],{steps:O,initialData:{current:t,index:0,name:o,attr:i,type:u},staticData:{element:t.matches[a]},save:this.save,cancel:this.cancel},c["default"].createElement(y["default"],{index:a,count:t.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,b.highlight)(e.matches,_.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(_.currentSelector);var n=this.props.current;(0,b.highlight)(n.matches,_.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(_.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=e.frame;return{current:(0,E.currentElement)(t),ruleIndex:n.index}},{updateRule:g.updateRule,cancel:g.showElementFrame})(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(163),f=n(189),p=n(208),d=r(p),h=n(194),v=n(248),m=n(201),y=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.closeHandler=n.closeHandler.bind(n),n.logHandler=n.logHandler.bind(n),n.prettyLogHandler=n.prettyLogHandler.bind(n),n.varHandler=n.varHandler.bind(n),n}return i(t,e),u(t,[{key:"closeHandler",value:function(e){e.preventDefault(),this.props.close()}},{key:"logHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree)))}},{key:"prettyLogHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree),null,2))}},{key:"varHandler",value:function(e){e.preventDefault(),console.log(['The current preview data can be accessed using the %c"pageData"%c variable.',"Make sure that the Forager extension's context is selected.",'(This will be a string using the extension\'s ID that starts with "chrome-extensions://". Open the chrome://extensions tab and look for the Forager extension to determine the extension ID)'].join(" "),"font-weight: bold; font-size: 1.5em;",""),window.pageData=(0,v.preview)(this.props.tree)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"frame"},c["default"].createElement(d["default"],null),c["default"].createElement("div",{className:"preview"},c["default"].createElement("pre",null,JSON.stringify((0,v.preview)(this.props.tree),null,2)),c["default"].createElement("div",{className:"buttons"},c["default"].createElement(f.PosButton,{text:"Log to Console",click:this.logHandler}),c["default"].createElement(f.PosButton,{text:"Pretty Log",click:this.prettyLogHandler}),c["default"].createElement(f.PosButton,{text:"Use as Variable",click:this.varHandler}),c["default"].createElement(f.NegButton,{text:"Hide Preview",click:this.closeHandler}))))}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=(e.preview,t.pages),r=t.pageIndex,a=n[r];return{tree:void 0===a?{}:(0,h.fullGrow)(a.elements)}},{close:m.showElementFrame})(y)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var a=n(242),o=function(e,t){var n=t.querySelectorAll(e.selector),a=e.spec.type;switch(a){case"single":var o=e.spec.index,u=n[o];if(!u)return;return i(e,u);case"all":var l=e.spec.name,c=Array.from(n).map(function(t){return i(e,t)}).filter(function(e){return void 0!==e});return r({},l,c);case"range":var s=e.spec,l=s.name,f=s.low,p=s.high,c=Array.from(n).slice(f,p||void 0).map(function(t){return i(e,t)}).filter(function(e){return void 0!==e});return r({},l,c)}},i=function(e,t){var n=l(e.rules,t);if(n){var r=u(e.children,t);if(r)return Object.assign({},n,r)}},u=function(e,t){var n={};return e.some(function(e){var r=o(e,t);if(!r&&!e.optional)return n=void 0,!0;for(var a in r)n[a]=r[a];return!1}),n},l=function(e,t){var n={};return e.some(function(e){var r=void 0;if("text"===e.attr)r=t.textContent.replace(/\s+/g," ");else{var o=t.getAttribute(e.attr);if(null===o)return n=void 0,!0;r=o||""}switch(e.type){case"int":r=(0,a.integer)(r);break;case"float":r=(0,a["float"])(r)}return n[e.name]=r,!1}),n};t.preview=function(e){return void 0===e?"":o(e,document)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.upload=t.load=t.remove=t.rename=t.save=void 0;var r=(n(192),n(194));t.save=function(e){return new Promise(function(t,n){void 0===e&&n("No page to save");var a=(0,r.clean)(e);chrome.storage.local.get("sites",function(e){var n=window.location.hostname;e.sites[n]=e.sites[n]||{},e.sites[n][a.name]=a,chrome.storage.local.set({sites:e.sites}),t("Saved")})})},t.rename=function(e,t){return new Promise(function(n,r){chrome.storage.local.get("sites",function(a){var o=window.location.hostname,i=a.sites[o][t];void 0===i&&r("No page named "+t+" found"),i.name=e,a.sites[o][e]=i,delete a.sites[o][t],chrome.storage.local.set({sites:a.sites}),n('Renamed "'+t+'" to "'+e+'"')})})},t.remove=function(e){return new Promise(function(t,n){void 0===e&&n("No page to delete"),chrome.storage.local.get("sites",function(n){var r=window.location.hostname;delete n.sites[r][e],chrome.storage.local.set({sites:n.sites}),t("Deleted page "+e)})})},t.load=function(){return new Promise(function(e,t){chrome.storage.local.get("sites",function(t){var n=window.location.hostname,a=t.sites[n]||{},o=(0,r.preparePages)(a);e(o)})})},t.upload=function(e){return new Promise(function(t,n){void 0===e&&n("No page to upload"),chrome.runtime.sendMessage({type:"upload",data:{name:e.name,site:window.location.hostname,page:JSON.stringify((0,r.clean)(e))}},function(e){e.error?n("Failed to upload page"):t(e)})})},t.sync=function(){return new Promise(function(e,t){var n=window.location.hostname;chrome.runtime.sendMessage({type:"sync",site:n},function(a){a.error?t("Failed to sync pages"):!function(){var t=a.pages;chrome.storage.local.get("sites",function(a){var o=a.sites[n]||{},i=Object.assign({},o,t);a.sites[n]=i,chrome.storage.local.set({sites:a.sites});var u=(0,r.preparePages)(i);e(u)})}()})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=(0,o.createStore)(v,m,(0,o.applyMiddleware)(h["default"],p["default"],s["default"],i.messagesMiddleware));return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(170),i=n(195),u=n(251),l=r(u),c=n(255),s=r(c),f=n(256),p=r(f),d=n(257),h=r(d),v=(0,o.combineReducers)(Object.assign({},l["default"],{messages:i.messages})),m={show:!0,page:{pages:[void 0],pageIndex:0,elementIndex:0},frame:{name:"element",data:{}},messages:[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(252),o=r(a),i=n(253),u=r(i),l=n(254),c=r(l);t["default"]={frame:c["default"],show:o["default"],page:u["default"]}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments[1];switch(t.type){case i.CLOSE_FORAGER:return!1;case i.OPEN_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(203),i=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case u.SELECT_PAGE:var n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=e.pages.length)&&(n=0),Object.assign({},e,{pageIndex:n,elementIndex:0});case u.SET_PAGES:return Object.assign({},e,{pageIndex:0,pages:[void 0].concat(a(t.pages)),elementIndex:0});case u.ADD_PAGE:var r=e.pages,o=[].concat(a(r),[t.page]);return Object.assign({},e,{pages:o,pageIndex:o.length-1,elementIndex:0});case u.REMOVE_PAGE:var r=e.pages,i=e.pageIndex;return 0===i?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),a(r.slice(i+1))),pageIndex:0,elementIndex:0});case u.RENAME_PAGE:var r=e.pages,i=e.pageIndex;return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},r[i],{name:t.name})],a(r.slice(i+1)))});case u.SET_MATCHES:var r=e.pages,i=e.pageIndex,l=t.matches;return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},r[i],{elements:r[i].elements.map(function(e){if(null===e)return null;var t=l[e.index];return void 0!==t?Object.assign({},e,{matches:t}):e})})],a(r.slice(i+1)))});case u.SELECT_ELEMENT:var r=e.pages,i=e.pageIndex,c=e.elementIndex,s=r[i].elements.length,n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=s)&&(n=0),Object.assign({},e,{elementIndex:n});case u.SAVE_ELEMENT:var r=e.pages,i=e.pageIndex,c=e.elementIndex,f=r[i],p=f.elements[c],d=f.elements.length,h=t.element;return h.parent=p.index,h.index=d,p.childIndices.push(d),Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},f,{elements:f.elements.concat([h])})],a(r.slice(i+1))),elementIndex:d});case u.UPDATE_ELEMENT:var r=e.pages,i=e.pageIndex,c=e.elementIndex,f=r[i],p=f.elements[c],n=t.index,v=t.newProps;return 0===n?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},f,{elements:f.elements.map(function(e){return null===e?null:e.index!==n?e:Object.assign({},e,v)})})],a(r.slice(i+1)))});case u.REMOVE_ELEMENT:var r=e.pages,i=e.pageIndex,c=e.elementIndex,f=r[i],p=f.elements[c];if(0===c){var m=Object.assign({},f.elements[0],{childIndices:[]});return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},f,{elements:[m]})],a(r.slice(i+1))),elementIndex:0})}var y=[c],g=f.elements[c].parent||0,b=Object.assign({},f,{elements:f.elements.map(function(e){return null===e?null:(e.childIndices=e.childIndices.filter(function(e){return!y.includes(e)}),y.includes(e.index)?(y=y.concat(e.childIndices),null):e)})});return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[b],a(r.slice(i+1))),elementIndex:g});case u.SAVE_RULE:var r=e.pages,i=e.pageIndex,c=e.elementIndex,E=t.rule,f=r[i];return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c&&(e.rules=e.rules.concat([E])),e})})],a(r.slice(i+1)))});case u.REMOVE_RULE:var r=e.pages,i=e.pageIndex,c=e.elementIndex,n=t.index,f=r[i];return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c?Object.assign({},e,{rules:e.rules.filter(function(e,t){return t!==n})}):e})})],a(r.slice(i+1)))});case u.UPDATE_RULE:var r=e.pages,i=e.pageIndex,c=e.elementIndex,n=t.index,E=t.rule,f=r[i];return Object.assign({},e,{pages:[].concat(a(r.slice(0,i)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c&&(e.rules=e.rules.map(function(e,t){return t===n?E:e})),e})})],a(r.slice(i+1)))});case u.CLOSE_FORAGER:return Object.assign({},e,{pageIndex:0,elementIndex:0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(203),u=r(i)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?{name:"element"}:arguments[0],t=arguments[1];switch(t.type){case i.SELECT_PAGE:case i.ADD_PAGE:case i.SET_PAGES:case i.REMOVE_PAGE:case i.REMOVE_ELEMENT:case i.SAVE_ELEMENT:case i.UPDATE_ELEMENT:case i.SAVE_RULE:case i.REMOVE_RULE:case i.UPDATE_RULE:case i.CLOSE_FORAGER:case i.SHOW_ELEMENT_FRAME:return{name:"element"};case i.SHOW_ELEMENT_WIZARD:return{name:"element-wizard"};case i.SHOW_EDIT_ELEMENT_WIZARD:return{name:"edit-element-wizard"};case i.SHOW_RULE_WIZARD:return{name:"rule-wizard"};case i.SHOW_EDIT_RULE_WIZARD:return{name:"edit-rule-wizard",index:t.index};case i.SHOW_PREVIEW:return{name:"preview"};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(203),i=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(203),o=r(a),i=n(195),u=n(201),l=n(249),c=r(l);t["default"]=function(e){return function(t){return function(n){var r=e.getState(),a=r.page,l=a.pages,s=a.pageIndex,f=l[s];switch(n.type){case o.RENAME_PAGE:return c.rename(n.name,f.name).then(function(t){e.dispatch((0,i.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,i.showMessage)(t,1e3,-1))}),t(n);case o.REMOVE_PAGE:var p=l[s].name;return c.remove(p).then(function(t){e.dispatch((0,i.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,i.showMessage)(t,1e3,-1))}),t(n);case o.UPLOAD_PAGE:c.upload(l[s]).then(function(t){e.dispatch((0,i.showMessage)("Upload Successful",5e3,1))})["catch"](function(t){e.dispatch((0,i.showMessage)(t,5e3,-1))});break;case o.SYNC_PAGES:c.sync().then(function(t){e.dispatch((0,u.setPages)(t)),e.dispatch((0,i.showMessage)("Pages synced",5e3,1))})["catch"](function(t){e.dispatch((0,i.showMessage)("Failed to sync pages",5e3,-1))});break;case o.ADD_PAGE:case o.SAVE_ELEMENT:case o.REMOVE_ELEMENT:case o.UPDATE_ELEMENT:case o.SAVE_RULE:case o.REMOVE_RULE:var d=t(n),h=e.getState(),v=h.page,m=v.pages,y=v.pageIndex;return c.save(m[y]).then(function(t){e.dispatch((0,i.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,i.showMessage)(t,1e3,-1))}),d;default:return t(n)}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(192),o=n(203),i=r(o),u=n(201);t["default"]=function(e){return function(t){return function(n){var r=[i.SELECT_PAGE,i.SAVE_ELEMENT,i.UPDATE_ELEMENT,i.REFRESH_MATCHES];if(!r.includes(n.type))return t(n);switch(n.type){case i.SELECT_PAGE:case i.SAVE_ELEMENT:case i.UPDATE_ELEMENT:case i.REFRESH_MATCHES:var o=t(n),l=e.getState().page,c=l.pages,s=l.pageIndex,f=c[s];if(void 0===f)return;var p=f.elements.reduce(function(e,t){if(null===t)return e;var n=null===t.parent?[document]:e[t.parent];return e[t.index]=(0,a.select)(n,t.selector,t.spec,".forager-holder"),e},{});return e.dispatch((0,u.setMatches)(p)),o}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;
var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(203),o=r(a);n(201);t["default"]=function(e){return function(t){return function(n){var r=[o.SYNC_PAGES,o.REMOVE_PAGE,o.REMOVE_ELEMENT];if(!r.includes(n.type))return t(n);var a="Are you sure?";switch(n.type){case o.SYNC_PAGES:a="Syncing pages will overwrite duplicate pages. Continue?";break;case o.REMOVE_PAGE:var i=e.getState(),u=i.page,l=u.pages,c=u.pageIndex,s=l[c];a='Are you sure you want to delete the page "'+s.name+'"?';break;case o.REMOVE_ELEMENT:var f=e.getState(),u=f.page,l=u.pages,c=u.pageIndex,p=u.elementIndex,s=l[c],d=s.elements[p];a=0===d.index?"Are you sure you want to reset the page? This will delete all rules and child elements":'Are you sure you want to delete the element "'+d.selector+'"?'}window.confirm(a)&&t(n)}}}}]);