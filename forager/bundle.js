webpackJsonp([0],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),o=r(a),l=n(31),i=r(l),u=n(161),c=n(180),s=r(c),f=n(194),d=n(248),p=n(238),h=n(249),v=r(h);document.body.classList.add("foraging"),(0,p.stripEvents)(document.body),Array.from(document.querySelectorAll("*")).forEach(function(e){(0,p.stripEvents)(e)}),document.querySelector(".forager-holder")?(document.body.classList.add("foraging"),window.restore()):!function(){var e=document.createElement("div");e.classList.add("forager-holder"),document.body.appendChild(e);var t=(0,v["default"])();(0,d.load)().then(function(n){t.dispatch((0,f.setPages)(n)),i["default"].render(o["default"].createElement(u.Provider,{store:t},o["default"].createElement(s["default"],null)),e)}),window.restore=function(){t.getState().show||t.dispatch((0,f.openForager)())}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.connect=t.Provider=void 0;var a=n(162),o=r(a),l=n(164),i=r(l);t.Provider=o["default"],t.connect=i["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t["default"]=void 0;var i=n(1),u=n(163),c=r(u),s=function(e){function t(n,r){a(this,t);var l=o(this,e.call(this,n,r));return l.store=n.store,l}return l(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return i.Children.only(e)},t}(i.Component);t["default"]=s,s.propTypes={store:c["default"].isRequired,children:i.PropTypes.element.isRequired},s.childContextTypes={store:c["default"].isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1);t["default"]=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.displayName||e.name||"Component"}function u(e,t){return(0,w["default"])((0,b["default"])(e),"`%sToProps` must return an object. Instead received %s.",t?"mapDispatch":"mapState",e),e}function c(e,t,n){function r(e,t,n){var r=g(e,t,n);return(0,w["default"])((0,b["default"])(r),"`mergeProps` must return an object. Instead received %s.",r),r}var c=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],d=Boolean(e),h=e||P,m=(0,b["default"])(t)?(0,y["default"])(t):t||x,g=n||j,E=c.pure,O=void 0===E?!0:E,k=c.withRef,H=void 0===k?!1:k,S=O&&g!==j,D=M++;return function(e){var t=function(t){function n(e,r){a(this,n);var l=o(this,t.call(this,e,r));l.version=D,l.store=e.store||r.store,(0,w["default"])(l.store,'Could not find "store" in either the context or '+('props of "'+l.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+l.constructor.displayName+'".'));var i=l.store.getState();return l.state={storeState:i},l.clearCache(),l}return l(n,t),n.prototype.shouldComponentUpdate=function(){return!O||this.haveOwnPropsChanged||this.hasStoreStateChanged},n.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return u(r)},n.prototype.configureFinalMapState=function(e,t){var n=h(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:h,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):u(n)},n.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return u(r,!0)},n.prototype.configureFinalMapDispatch=function(e,t){var n=m(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:m,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):u(n,!0)},n.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return this.stateProps&&(0,v["default"])(e,this.stateProps)?!1:(this.stateProps=e,!0)},n.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,v["default"])(e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},n.prototype.updateMergedPropsIfNeeded=function(){var e=r(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&S&&(0,v["default"])(e,this.mergedProps)?!1:(this.mergedProps=e,!0)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){d&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillReceiveProps=function(e){O&&(0,v["default"])(e,this.props)||(this.haveOwnPropsChanged=!0)},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},n.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},n.prototype.handleChange=function(){if(this.unsubscribe){var e=this.state.storeState,t=this.store.getState();O&&e===t||(this.hasStoreStateChanged=!0,this.setState({storeState:t}))}},n.prototype.getWrappedInstance=function(){return(0,w["default"])(H,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var a=!0,o=!0;O&&r&&(a=n||t&&this.doStatePropsDependOnOwnProps,o=t&&this.doDispatchPropsDependOnOwnProps);var l=!1,i=!1;a&&(l=this.updateStatePropsIfNeeded()),o&&(i=this.updateDispatchPropsIfNeeded());var u=!0;return u=l||i||t?this.updateMergedPropsIfNeeded():!1,!u&&r?r:(H?this.renderedElement=(0,f.createElement)(e,s({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,f.createElement)(e,this.mergedProps),this.renderedElement)},n}(f.Component);return t.displayName="Connect("+i(e)+")",t.WrappedComponent=e,t.contextTypes={store:p["default"]},t.propTypes={store:p["default"]},(0,_["default"])(t,e)}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t["default"]=c;var f=n(1),d=n(163),p=r(d),h=n(165),v=r(h),m=n(166),y=r(m),g=n(169),b=r(g),E=n(178),_=r(E),O=n(179),w=r(O),P=function(e){return{}},x=function(e){return{dispatch:e}},j=function(e,t,n){return s({},n,e,t)},M=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!a.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,a.bindActionCreators)(e,t)}}t.__esModule=!0,t["default"]=r;var a=n(167)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var a=n(168),o=r(a),l=n(173),i=r(l),u=n(175),c=r(u),s=n(176),f=r(s),d=n(177),p=r(d),h=n(174);r(h);t.createStore=o["default"],t.combineReducers=i["default"],t.bindActionCreators=c["default"],t.applyMiddleware=f["default"],t.compose=p["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){function r(){h===p&&(h=p.slice())}function o(){return d}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),h.push(e),function(){if(t){t=!1,r();var n=h.indexOf(e);h.splice(n,1)}}}function c(e){if(!(0,l["default"])(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,d=f(d,e)}finally{v=!1}for(var t=p=h,n=0;n<t.length;n++)t[n]();return e}function s(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");f=e,c({type:i.INIT})}if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var f=e,d=t,p=[],h=p,v=!1;return c({type:i.INIT}),{dispatch:c,subscribe:u,getState:o,replaceReducer:s}}t.__esModule=!0,t.ActionTypes=void 0,t["default"]=a;var o=n(169),l=r(o),i=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){function r(e){if(!l(e)||d.call(e)!=i||o(e))return!1;var t=a(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var a=n(170),o=n(171),l=n(172),i="[object Object]",u=Object.prototype,c=Function.prototype.toString,s=u.hasOwnProperty,f=c.call(Object),d=u.toString;e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:i.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var a="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:a}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+i.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var l=t[r];"function"==typeof e[l]&&(n[l]=e[l])}var i,u=Object.keys(n);try{o(n)}catch(c){i=c}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(i)throw i;for(var r=!1,o={},l=0;l<u.length;l++){var c=u[l],s=n[c],f=e[c],d=s(f,t);if("undefined"==typeof d){var p=a(c,t);throw new Error(p)}o[c]=d,r=r||d!==f}return r?o:e}}t.__esModule=!0,t["default"]=l;var i=n(168),u=n(169),c=(r(u),n(174));r(c)},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),a={},o=0;o<r.length;o++){var l=r[o],i=e[l];"function"==typeof i&&(a[l]=n(i,t))}return a}t.__esModule=!0,t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var l=e(n,r,a),u=l.dispatch,c=[],s={getState:l.getState,dispatch:function(e){return u(e)}};return c=t.map(function(e){return e(s)}),u=i["default"].apply(void 0,c)(l.dispatch),o({},l,{dispatch:u})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=a;var l=n(177),i=r(l)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length<=0?void 0:arguments[0];var e=t[t.length-1],n=t.slice(0,-1);return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var a=Object.getOwnPropertyNames(t),o=0;o<a.length;++o)if(!n[a[o]]&&!r[a[o]])try{e[a[o]]=t[a[o]]}catch(l){}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,a,o,l,i){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,l,i],s=0;u=new Error(t.replace(/%s/g,function(){return c[s++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=n(161),i=n(181),u=r(i),c=n(199),s=r(c),f=function(e){return e.show?o["default"].createElement("div",{id:"forager"},o["default"].createElement(u["default"],null),o["default"].createElement(s["default"],null)):null};t["default"]=(0,l.connect)(function(e){return{show:e.show}})(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return window.prompt("Page Name:\nCannot contain the following characters: < > : ' \\ / | ? * ")}function u(e){return e.filter(function(e){return void 0!==e}).map(function(e){return e.name})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(161),p=n(182),h=n(183),v=r(h),m=n(184),y=(n(185),n(187)),g=n(188),b=n(194),E=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.addHandler=n.addHandler.bind(n),n.renameHandler=n.renameHandler.bind(n),n}return l(t,e),c(t,[{key:"addHandler",value:function(e){var t=this.props,n=t.pages,r=t.showMessage,a=t.addPage,o=i();if((0,m.validName)(o,u(n))){var l=(0,y.createElement)("body");l=Object.assign({},l,{index:0,parent:null,matches:[document.body]}),a({name:o,elements:[l]})}else r('Cannot Use Name: "'+o+'"',5e3,-1)}},{key:"renameHandler",value:function(e){var t=i(),n=this.props,r=n.pages,a=n.showMessage,o=n.renamePage;(0,m.validName)(t,u(r))?o(t):a('Cannot Use Name: "'+t+'"',5e3,-1)}},{key:"render",value:function(){var e=this.props,t=e.pages,n=(e.message,e.currentIndex),r=e.selectPage,a=e.uploadPage,o=e.showPreview,l=e.refreshMatches,i=e.syncPages,u=e.removePage,c=e.closeForager,s=0!==n;return f["default"].createElement("div",{className:"topbar"},f["default"].createElement("div",{className:"controls"},f["default"].createElement("div",{className:"page-controls"},"Page ",f["default"].createElement("select",{value:n,onChange:function(e){r(parseInt(e.target.value,10))}},t.map(function(e,t){return f["default"].createElement("option",{key:t,value:t},void 0===e?"":e.name)})),f["default"].createElement(p.PosButton,{text:"Add Page",click:this.addHandler}),f["default"].createElement(p.NeutralButton,{text:"Refresh",title:"Refresh the list of matched elements",click:function(){l()},disabled:!s}),f["default"].createElement(p.PosButton,{text:"Preview",click:function(){o()},disabled:!s}),f["default"].createElement(p.NegButton,{text:"Delete",click:function(){u()},disabled:!s}),f["default"].createElement(p.PosButton,{text:"Rename",click:this.renameHandler,disabled:!s}),f["default"].createElement(p.PosButton,{text:"Upload",click:function(){a()},disabled:!s}),f["default"].createElement(p.PosButton,{text:"Sync Pages",click:function(){i()}})),f["default"].createElement("div",{className:"app-controls"},f["default"].createElement(p.NegButton,{text:String.fromCharCode(215),classes:["transparent"],click:function(){document.body.classList.remove("foraging"),c()}}))),f["default"].createElement(v["default"],null))}}]),t}(f["default"].Component);t["default"]=(0,d.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex;return{currentIndex:r,pages:n}},{addPage:b.addPage,selectPage:b.selectPage,closeForager:b.closeForager,showMessage:g.showMessage,syncPages:b.syncPages,refreshMatches:b.refreshMatches,renamePage:b.renamePage,removePage:b.removePage,uploadPage:b.uploadPage,showPreview:b.showPreview})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.NeutralButton=t.NegButton=t.PosButton=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),i=r(l),u=(t.PosButton=function(e){var t=e.classes,n=a(e,["classes"]);return i["default"].createElement(u,o({},n,{classes:["pos"].concat(t)}))},t.NegButton=function(e){var t=e.classes,n=a(e,["classes"]);return i["default"].createElement(u,o({},n,{classes:["neg"].concat(t)}))},t.NeutralButton=function(e){var t=e.text,n=void 0===t?"":t,r=e.click,a=void 0===r?function(){}:r,o=e.classes,l=void 0===o?[]:o,u=e.title,c=void 0===u?"":u,s=e.disabled,f=void 0===s?!1:s,d=e.type,p=void 0===d?"button":d;return i["default"].createElement("button",{className:l.join(" "),title:c,disabled:f,type:p,onClick:a},n)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.message,n=e.rating,r=["message"];return 0>n?r.push("neg"):n>0&&r.push("pos"),l["default"].createElement("div",{className:r.join(" ")},t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=r(o),i=n(161),u=function(e){return l["default"].createElement("div",{className:"message-board"},e.messages.map(function(e){return l["default"].createElement(a,{key:e.id,message:e.message,rating:e.rating})}))};t["default"]=(0,i.connect)(function(e){return{messages:e.messages}})(u)},function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];switch(e.type){case"single":return r(e);case"all":return a(e);case"range":return o(e);default:return""}}function r(e){var t=e.index,n=void 0===t?0:t;return"captures element at index "+n}function a(e){var t=e.name,n=void 0===t?"":t;return'captures all elements, groups them as "'+n+'"'}function o(e){var t=e.name,n=void 0===t?"":t,r=e.low,a=e.high,o=null===a?"end":a;return"captures elements "+r+" to "+o+', groups them as "'+n+'"'}function l(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=i(e,10),a="";if(!t)return r;switch(t.type){case"single":a=r+"["+t.index+"]";break;case"all":a="["+r+"]";break;case"range":a=r+"["+t.low+":"+(t.high||"end")+"]"}return n&&(a+="*"),a}Object.defineProperty(t,"__esModule",{value:!0}),t.describeSpec=n,t.shortElement=l;var i=(t.validName=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(null===e||""===e)return!1;var n=/[<>:'\/\\\|\?\*]/;return null!==e.match(n)?!1:t.every(function(t){return t!==e})},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var n=void 0,r=void 0,a=t-3,o=a/2;a%2===0?(n=o,r=o):(n=Math.ceil(o),r=Math.floor(o));var l=e.slice(0,n),i=0===r?"":e.slice(-r);return l+"..."+i})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=e.charCodeAt(0);return!(65>t||t>90&&97>t||t>122)}Object.defineProperty(t,"__esModule",{value:!0}),t.allSelect=t.parts=t.count=t.select=t.protect=void 0;var o=n(186),l=t.protect=function(e){var t=document.querySelectorAll(e);Array.from(t).forEach(function(e){e.classList.add("no-select"),Array.from(e.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})})};t.select=function(e,t,n,a){var o=(t||"*")+":not(.no-select)";n||(n={type:"all"}),void 0!==a&&""!==a&&l(a);var i=Array.from(e).reduce(function(e,t){var r=t.querySelectorAll(o),a=n,l=a.type,i=[];switch(l){case"single":var u=n.index;i=void 0!==r[u]?[r[u]]:[];break;case"all":i=Array.from(r);break;case"range":var c=n.low,s=n.high||void 0;i=Array.from(r).slice(c,s)}return e.concat(i)},[]);return[].concat(r(new Set(i)))},t.count=function(e,t,n){var r=(t||"*")+":not(.no-select)";return n||(n={type:"all"}),Array.from(e).reduce(function(e,t){var a=t.querySelectorAll(r),o=0;switch(n.type){case"single":var l=n.index;o=void 0!==a[l]?1:0;break;case"all":o=a.length;break;case"range":var i=n.low,u=n.high;o=Array.from(a).slice(i,u||void 0).length}return e>o?e:o},0)},t.parts=function(e){var t=[o.currentSelector,o.potentialSelector,o.queryCheck,o.hoverClass,o.savedPreview],n=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*/,r=function(e){return!t.some(function(t){return t===e})&&n.test(e)},l=[],i=e.tagName.toLowerCase();return l.push(i),""!==e.id&&a(e.id)&&l.push("#"+e.id),Array.from(e.classList).forEach(function(e){r(e)&&l.push("."+e)}),l},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.currentSelector="current-element",t.potentialSelector="selectable-element",t.queryCheck="query-check",t.hoverClass="forager-highlight",t.savedPreview="saved-preview"},function(e,t,n){"use strict";function r(e){return e?void 0===e.value?e:"single"===e.type?{type:"single",index:e.value}:"all"===e.type?{type:"all",name:e.value}:void 0:{}}function a(e,t){for(var n=e[t],r=void 0;void 0===r;)void 0!==n.spec.name||null===n.parent?r=n.index:n=e[n.parent];return o(e,r,!0)}function o(e,t,n){var r=e[t],a=[];return void 0===r?[]:(n||void 0===r.spec.name?(r.rules.forEach(function(e){a.push(e.name)}),r.childIndices.forEach(function(t){var n=e[t];a=a.concat(o(e,n.index,!1))})):a.push(r.spec.name),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGrow=t.fullGrow=t.clean=t.flatten=t.preparePages=t.createElement=void 0,t.levelNames=a;var l=(n(185),t.createElement=function(e){var t=arguments.length<=1||void 0===arguments[1]?{type:"single",index:0}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return{selector:e,spec:t,childIndices:[],rules:[],optional:n,matches:[]}},t.preparePages=function(e){var t=Object.keys(e).map(function(t){return e[t]}).filter(function(e){return null!==e}).map(function(e){return{name:e.name,elements:l(e.element)}});return t},t.flatten=function(e){if(void 0===e)return[];for(var t=0,n=[Object.assign({},e,{parent:null,childIndices:[]})];t<n.length;){var a=n[t];a.index=t,null!==a.parent&&n[a.parent].childIndices.push(t),a.spec=r(a.spec),a.children.forEach(function(e){n.push(Object.assign({},e,{parent:t,childIndices:[]}))}),delete a.children,t+=1}return n}),i=(t.clean=function(e){return{name:e.name,element:i(e.elements)}},t.fullGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),children:[],rules:e.rules.map(function(e){return Object.assign({},e)}),optional:e.optional,parent:e.parent}});return t.forEach(function(e){if(null!==e){var n=e.parent;delete e.parent,null!==n&&t[n].children.push(e)}}),t[0]});t.simpleGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),hasRules:e.rules.length>0,hasChildren:e.childIndices.length>0,children:[],index:e.index,parent:e.parent,matches:e.matches,optional:e.optional}});return t.forEach(function(e){null!==e&&null!==e.parent&&t[e.parent].children.push(e)}),t[0]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(189);Object.defineProperty(t,"ADD_MESSAGE",{enumerable:!0,get:function(){return a.ADD_MESSAGE}}),Object.defineProperty(t,"REMOVE_MESSAGE",{enumerable:!0,get:function(){return a.REMOVE_MESSAGE}});var o=n(190);Object.defineProperty(t,"showMessage",{enumerable:!0,get:function(){return o.showMessage}});var l=n(191);Object.defineProperty(t,"messagesMiddleware",{enumerable:!0,get:function(){return r(l)["default"]}});var i=n(193);Object.defineProperty(t,"messages",{enumerable:!0,get:function(){return r(i)["default"]}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SHOW_MESSAGE="@@erm/SHOW_MESSAGE",t.ADD_MESSAGE="@@erm/ADD_MESSAGE",t.REMOVE_MESSAGE="@@erm/REMOVE_MESSAGE"},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:l.SHOW_MESSAGE,message:e,lifetime:t,rating:n}}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:l.ADD_MESSAGE,message:e,id:t,rating:n}}function o(e){return{type:l.REMOVE_MESSAGE,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showMessage=r,t.addMessage=a,t.removeMessage=o;var l=n(189)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(189),a=n(190),o=n(192);t["default"]=function(e){return function(t){return function(n){if(n.type!==r.SHOW_MESSAGE)return t(n);var l=n.message,i=n.lifetime,u=n.rating,c=(0,o.pseudoRandomID)();return setTimeout(function(){e.dispatch((0,a.removeMessage)(c))},i),e.dispatch((0,a.addMessage)(l,c,u))}}}},function(e,t){"use strict";function n(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length;return Array.from(Array(10)).map(function(){return e[Math.floor(Math.random()*t)]}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.pseudoRandomID=n},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case a.ADD_MESSAGE:return e.concat([{id:t.id,message:t.message,rating:t.rating}]);case a.REMOVE_MESSAGE:return e.filter(function(e){return e.id!==t.id});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(189)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(195);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(197);Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var o=n(198);Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.openForager=t.closeForager=void 0;var a=n(196),o=r(a);t.closeForager=function(){return{type:o.CLOSE_FORAGER}},t.openForager=function(){return{type:o.OPEN_FORAGER}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SELECT_PAGE="SELECT_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SYNC_PAGES="SYNC_PAGES",t.SET_PAGES="SET_PAGES",t.SET_MATCHES="SET_MATCHES",t.REFRESH_MATCHES="REFRESH_MATCHES",t.SELECT_ELEMENT="SELECT_ELEMENT",t.SAVE_ELEMENT="SAVE_ELEMENT",t.REMOVE_ELEMENT="REMOVE_ELEMENT",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE",t.UPDATE_RULE="UPDATE_RULE",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_ELEMENT_WIZARD="SHOW_ELEMENT_WIZARD",t.SHOW_EDIT_ELEMENT_WIZARD="SHOW_EDIT_ELEMENT_WIZARD",t.SHOW_RULE_WIZARD="SHOW_RULE_WIZARD",t.SHOW_EDIT_RULE_WIZARD="SHOW_EDIT_RULE_WIZARD",t.SHOW_PREVIEW="SHOW_PREVIEW",t.CLOSE_FORAGER="CLOSE_FORAGER",t.OPEN_FORAGER="OPEN_FORAGER"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.showPreview=t.showEditRuleWizard=t.showRuleWizard=t.showEditElementWizard=t.showElementWizard=t.showElementFrame=void 0;var a=n(196),o=r(a);t.showElementFrame=function(){return{type:o.SHOW_ELEMENT_FRAME}},t.showElementWizard=function(){return{type:o.SHOW_ELEMENT_WIZARD}},t.showEditElementWizard=function(){return{type:o.SHOW_EDIT_ELEMENT_WIZARD}},t.showRuleWizard=function(){return{type:o.SHOW_RULE_WIZARD}},t.showEditRuleWizard=function(e){return{type:o.SHOW_EDIT_RULE_WIZARD,index:e}},t.showPreview=function(){return{type:o.SHOW_PREVIEW}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRule=t.removeRule=t.saveRule=t.removeElement=t.updateElement=t.saveElement=t.selectElement=t.refreshMatches=t.setMatches=t.setPages=t.syncPages=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.selectPage=void 0;
var a=n(196),o=r(a);t.selectPage=function(e){return{type:o.SELECT_PAGE,index:e}},t.addPage=function(e){return{type:o.ADD_PAGE,page:e}},t.removePage=function(){return{type:o.REMOVE_PAGE}},t.renamePage=function(e){return{type:o.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:o.UPLOAD_PAGE}},t.syncPages=function(){return{type:o.SYNC_PAGES}},t.setPages=function(e){return{type:o.SET_PAGES,pages:e}},t.setMatches=function(e){return{type:o.SET_MATCHES,matches:e}},t.refreshMatches=function(e){return{type:o.REFRESH_MATCHES}},t.selectElement=function(e){return{type:o.SELECT_ELEMENT,index:e}},t.saveElement=function(e){return{type:o.SAVE_ELEMENT,element:e}},t.updateElement=function(e,t){return{type:o.UPDATE_ELEMENT,index:e,newProps:t}},t.removeElement=function(){return{type:o.REMOVE_ELEMENT}},t.saveRule=function(e){return{type:o.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:o.REMOVE_RULE,index:e}},t.updateRule=function(e,t){return{type:o.UPDATE_RULE,index:e,rule:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=n(161),i=n(200),u=r(i),c=n(208),s=r(c),f=n(226),d=r(f),p=n(235),h=r(p),v=n(245),m=r(v),y=n(246),g=r(y),b=function(e){var t=e.frame;switch(t.name){case"element":return o["default"].createElement(u["default"],null);case"element-wizard":return o["default"].createElement(s["default"],null);case"edit-element-wizard":return o["default"].createElement(d["default"],null);case"rule-wizard":return o["default"].createElement(h["default"],null);case"edit-rule-wizard":return o["default"].createElement(m["default"],null);case"preview":return o["default"].createElement(g["default"],null);default:return null}};t["default"]=(0,l.connect)(function(e){return{frame:e.frame}})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(161),f=n(201),d=r(f),p=n(205),h=r(p),v=n(204),m=n(186),y=function(e){function t(e){return a(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.element;return void 0===e?c["default"].createElement("div",{className:"frame"}):c["default"].createElement("div",{className:"frame"},c["default"].createElement(d["default"],null),c["default"].createElement(h["default"],{element:e,active:!0}))}},{key:"componentWillMount",value:function(){(0,v.unhighlight)(m.currentSelector),this.props.element&&(0,v.highlight)(this.props.element.matches,m.currentSelector)}},{key:"componentWillReceiveProps",value:function(e){(0,v.unhighlight)(m.currentSelector),void 0!==e.element&&e.element!==this.props.element&&(0,v.highlight)(e.element.matches,m.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,v.unhighlight)(m.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=void 0===o?void 0:o.elements[a];return{element:l}})(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=(0,h.path)(),n=e.source,r=e.target;return t.moveTo(r.y,r.x),t.bezierCurveTo((r.y+n.y)/2,r.x,(r.y+n.y)/2,n.x,n.y,n.x),t.toString()}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(161),p=n(202),h=n(203),v=n(184),m=n(187),y=n(204),g=n(194),b=n(186),E=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n._makeNodes=n._makeNodes.bind(n),n}return l(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.width,n=e.height;this.setState({tree:(0,p.tree)().size([n,t])})}},{key:"_makeNodes",value:function(){var e=this.props,t=e.page,n=e.elementIndex,r=e.active,a=e.selectElement,o=this.state.tree,l=(0,m.simpleGrow)(t.elements),c=(0,p.hierarchy)(l);o(c);var s=c.descendants().map(function(e,t){return f["default"].createElement(_,u({key:t,current:e.index===n,select:a,active:r},e))}),d=c.links().map(function(e,t){return f["default"].createElement("path",{key:t,className:"link",d:i(e)})});return f["default"].createElement("g",{transform:"translate(50,25)"},f["default"].createElement("g",{className:"links"},d),f["default"].createElement("g",{className:"nodes"},s))}},{key:"render",value:function(){if(void 0===this.props.page)return null;var e=this.props,t=e.width,n=e.height,r=e.active;return f["default"].createElement("div",{className:"tree"},f["default"].createElement("svg",{width:t+100,height:n+50,className:r?null:"not-allowed"},this._makeNodes()))}}]),t}(f["default"].Component);E.defaultProps={width:400,height:150};var _=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleClick=n.handleClick.bind(n),n.handleMouseover=n.handleMouseover.bind(n),n.handleMouseout=n.handleMouseout.bind(n),n}return l(t,e),c(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.select(this.props.data.index)}},{key:"handleMouseover",value:function(e){(0,y.highlight)(this.props.data.matches,b.savedPreview)}},{key:"handleMouseout",value:function(e){(0,y.unhighlight)(b.savedPreview)}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.data,r=e.active,a=e.children,o=e.x,l=e.y,i=n.hasRules,c=n.selector,s=n.spec,d=n.optional,p=!(i||a&&a.length),h=i?f["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):f["default"].createElement("circle",{r:"3"}),m=["node",t?"current":null,p?"empty":null],y=r?{onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout}:{};return f["default"].createElement("g",u({className:m.join(" "),transform:"translate("+l+","+o+")"},y),f["default"].createElement("text",{y:"-10"},(0,v.shortElement)(c,s,d)),h)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(b.savedPreview)}}]),t}(f["default"].Component);t["default"]=(0,d.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,o=t.elementIndex,l=r[a];return{page:l,active:"element"===n.name,elementIndex:o}},{selectElement:g.selectElement})(E)},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){Array.from(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){Array.from(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,n,r,a){function o(e){return function(n){n.target.classList.contains(t)&&(n.stopPropagation(),e(n))}}Array.from(e).forEach(function(e){e.classList.add(t)});var l=o(n),i=o(r),u=o(a);return document.body.addEventListener("mouseover",l,!1),document.body.addEventListener("mouseout",i,!1),document.body.addEventListener("click",u,!1),function(){Array.from(e).forEach(function(e){e.classList.remove(t)}),document.body.removeEventListener("mouseover",l,!1),document.body.removeEventListener("mouseout",i,!1),document.body.removeEventListener("click",u,!1)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.element,n=void 0===t?{}:t,r=e.active,a=void 0===r?!0:r,l=e.showElementWizard,u=e.showRuleWizard,c=e.showEditElementWizard,d=e.removeElement,p=0===n.index;return i["default"].createElement("div",{className:"info-box"},i["default"].createElement("div",{className:"info"},i["default"].createElement(s["default"],o({active:a},n))),i["default"].createElement("div",{className:"buttons"},i["default"].createElement(f.PosButton,{text:"Add Child",disabled:!a,click:function(){l()}}),i["default"].createElement(f.PosButton,{text:"Add Rule",disabled:!a,click:function(){u()}}),i["default"].createElement(f.NeutralButton,{text:"Edit",disabled:!a||p,click:function(){c()}}),i["default"].createElement(f.NegButton,{text:p?"Reset":"Delete",title:p?"Reset Page":"Delete Element",disabled:!a,click:function(){d()}})))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),i=r(l),u=n(161),c=n(206),s=r(c),f=n(182),d=n(194);a.propTypes={element:i["default"].PropTypes.object,active:i["default"].PropTypes.bool},t["default"]=(0,u.connect)(null,{showElementWizard:d.showElementWizard,removeElement:d.removeElement,showRuleWizard:d.showRuleWizard,showEditElementWizard:d.showEditElementWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.selector,n=e.rules,r=e.spec,a=e.optional,o=void 0===a?!1:a,l=e.active,u=void 0===l?!0:l;return i["default"].createElement("div",{className:"element"},i["default"].createElement("div",null,i["default"].createElement("span",{className:"big bold"},t,o?i["default"].createElement("span",{title:"optional"},"*"):null)),i["default"].createElement("div",null,(0,s.describeSpec)(r)),i["default"].createElement(f,{rules:n,active:u}))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),i=r(l),u=n(207),c=r(u),s=n(184),f=function(e){var t=e.rules,n=e.active;return t.length?i["default"].createElement("ul",{className:"rules"},t.map(function(e,t){return i["default"].createElement(c["default"],o({key:t,index:t,active:n},e))})):null};t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.attr,r=e.type,a=e.active,o=void 0===a?!0:a,i=e.index,c=e.removeRule,s=e.updateRule;return l["default"].createElement("li",{className:"rule"},l["default"].createElement("span",{className:"rule-name",title:"name"},t),l["default"].createElement("span",{className:"rule-attr",title:"attribute (or text)"},n),l["default"].createElement("span",{className:"rule-type",title:"data type"},r),o?l["default"].createElement(u.NeutralButton,{text:"Edit",click:function(){s(i)}}):null,o?l["default"].createElement(u.NegButton,{text:"Delete",click:function(){c(i)}}):null)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=r(o),i=n(161),u=n(182),c=n(194);a.propTypes={removeRule:l["default"].PropTypes.func.isRequired,updateRule:l["default"].PropTypes.func.isRequired,name:l["default"].PropTypes.string.isRequired,attr:l["default"].PropTypes.string.isRequired,type:l["default"].PropTypes.string.isRequired,active:l["default"].PropTypes.bool},t["default"]=(0,i.connect)(null,{removeRule:c.removeRule,updateRule:c.showEditRuleWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(161),f=n(201),d=r(f),p=n(209),h=r(p),v=n(210),m=n(194),y=n(204),g=n(186),b=[v.ChooseElements,v.ChooseParts,v.ChooseType,v.ChooseValue,v.ChooseOptional,v.ConfirmElement],E=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"save",value:function(e){this.props.saveElement(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current,t={current:e};return c["default"].createElement("div",{className:"frame"},c["default"].createElement(d["default"],null),c["default"].createElement(h["default"],{steps:b,initialData:t,save:this.save,cancel:this.cancel}))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,y.highlight)(e.matches,g.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,y.unhighlight)(g.currentSelector);var n=this.props.current;(0,y.highlight)(n.matches,g.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(g.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=void 0===o?void 0:o.elements[a];return{current:l}},{saveElement:m.saveElement,cancel:m.showElementFrame})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=o["default"].createClass({displayName:"Wizard",propTypes:{initialData:o["default"].PropTypes.object.isRequired,steps:o["default"].PropTypes.array.isRequired,extraData:o["default"].PropTypes.object,save:o["default"].PropTypes.func,cancel:o["default"].PropTypes.func},getInitialState:function(){var e=this.props,t=e.initialData,n=e.steps;return{position:0,data:[t].concat(Array(n.length))}},next:function(e){var t=this.state,n=t.position,r=t.data,a=this.props.steps,o=a.length-1,l=n===o?n:n+1;r[l]=e,this.setState({position:l,data:r})},previous:function(){var e=this.state,t=e.position;e.data;this.setState({position:t>0?t-1:0})},cancel:function(){this.props.cancel()},finish:function(e){this.props.save(e)},render:function(){var e=this.state,t=e.position,n=e.data,r=this.props,a=r.steps,l=r.extraData,u=r.children,c=a[t],s=0===t?void 0:this.previous,f=t===a.length-1?this.finish:this.next;return o["default"].createElement("div",{className:"wizard"},o["default"].createElement(i,{steps:a.length,position:t}),o["default"].createElement(c,{startData:n[t],endData:n[t+1],extraData:l,cancel:this.cancel,next:f,previous:s},u))}}),i=o["default"].createClass({displayName:"ProgressBar",render:function(){var e=this.props,t=e.steps,n=e.position,r=Array.from(Array(t)).map(function(e,t){var r=["marker",n>t?"complete":null,t==n?"active":null];return o["default"].createElement("div",{key:t,className:r.join(" ")})});return o["default"].createElement("div",{className:"progress-bar"},r)}});t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(211);Object.defineProperty(t,"ChooseElements",{enumerable:!0,get:function(){return r(a)["default"]}});var o=n(213);Object.defineProperty(t,"ChooseParts",{enumerable:!0,get:function(){return r(o)["default"]}});var l=n(214);Object.defineProperty(t,"ChooseType",{enumerable:!0,get:function(){return r(l)["default"]}});var i=n(216);Object.defineProperty(t,"ChooseValue",{enumerable:!0,get:function(){return r(i)["default"]}});var u=n(223);Object.defineProperty(t,"ChooseOptional",{enumerable:!0,get:function(){return r(u)["default"]}});var c=n(225);Object.defineProperty(t,"ConfirmElement",{enumerable:!0,get:function(){return r(c)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(212),f=r(s),d=n(185),p=n(204),h=n(186),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=[["*"]],l=n.props.startData,i=l.current;return(0,d.allSelect)(i.matches)&&r.push(["option"]),n.state={checked:void 0,selectors:r,eleCount:0,error:!0},n.mouseover=n.mouseover.bind(n),n.mouseout=n.mouseout.bind(n),n.click=n.click.bind(n),n.addEvents=n.addEvents.bind(n),n.setRadio=n.setRadio.bind(n),n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"mouseover",value:function(e){e.target.classList.add(h.hoverClass)}},{key:"mouseout",value:function(e){e.target.classList.remove(h.hoverClass)}},{key:"click",value:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.path).filter(function(e){return e.classList&&e.classList.contains(h.potentialSelector)}).reverse().map(function(e){return(0,d.parts)(e)});this.setState({selectors:[["*"]].concat(t),checked:void 0,error:!0})}},{key:"addEvents",value:function(e){var t=(0,d.select)(e.current.matches,null,null,".forager-holder");this.iUnhighlight&&(this.iUnhighlight(),delete this.iUnhighlight),this.iUnhighlight=(0,p.iHighlight)(t,h.potentialSelector,this.mouseover,this.mouseout,this.click)}},{key:"setRadio",value:function(e){var t=this.state.selectors[e].join(""),n=this.props.startData,r=n.current;this.setState({checked:e,eleCount:(0,d.count)(r.matches,t),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.checked,r=t.selectors,a=this.props,o=a.next,l=a.startData,i=r[n];void 0!==n&&void 0!==i?o({parts:i,current:l.current}):this.setState({error:!0})}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.next,t.previous,this.state),r=n.selectors,a=n.checked,o=n.eleCount,l=n.error;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("div",{className:"info"},c["default"].createElement("h3",null,"Select Relevant Element(s)"),c["default"].createElement("div",{className:"choices"},r.map(function(t,n){return c["default"].createElement(m,{key:n,selector:t,index:n,checked:n===a,select:e.setRadio})})),c["default"].createElement("h5",null,"Count: ",o)),c["default"].createElement(f["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:l}))}},{key:"componentWillMount",value:function(){var e=this.props.startData;this.addEvents(e)}},{key:"componentWillReceiveNewProps",value:function(e){var t=e.startData;this.addEvents(t)}},{key:"componentWillUpdate",value:function(e,t){(0,p.unhighlight)(h.queryCheck);var n=t.selectors[t.checked];if(void 0!==n){var r=n.join(""),a=e.startData,o=(0,d.select)(a.current.matches,r,null,".forager-holder");(0,p.highlight)(o,h.queryCheck)}}},{key:"componentWillUnmount",value:function(){(0,p.unhighlight)(h.queryCheck),this.iUnhighlight()}}]),t}(c["default"].Component);v.propTypes={startData:c["default"].PropTypes.object,endData:c["default"].PropTypes.object,next:c["default"].PropTypes.func,previous:c["default"].PropTypes.func};var m=function(e){var t=e.selector,n=e.checked,r=e.select,a=e.index;return c["default"].createElement("label",{className:n?"selected":""},c["default"].createElement("input",{type:"radio",name:"css-selector",checked:n,onChange:function(){return r(a)}}),t.join(""))};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.previous,n=e.next,r=e.nextText,a=void 0===r?"Next":r,o=e.cancel,u=e.error,c=void 0===u?!1:u;return l["default"].createElement("div",{className:"buttons"},l["default"].createElement(i.NegButton,{text:"Previous",click:t,disabled:void 0===t}),l["default"].createElement(i.PosButton,{text:a,type:"submit",click:n,disabled:c}),l["default"].createElement(i.NegButton,{text:"Cancel",click:o}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),l=r(o),i=n(182)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if((0,h.unhighlight)(v.queryCheck),""!==e){var n=(0,p.select)(t,e,null,".forager-holder");(0,h.highlight)(n,v.queryCheck)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(185),h=n(204),v=n(186),m=function(e){return e.reduce(function(e,t){return e+(t.checked?t.name:"")},"")},y=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={parts:[],eleCount:0,error:!0},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleRadio=n.toggleRadio.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.parts,n=this.props,r=n.next,a=n.startData,o=m(t);""!==o?r({selector:o,current:a.current}):this.setState({error:!0})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleRadio",value:function(e){var t=e.target.value,n=this.state.parts;n[t].checked=!n[t].checked;var r=m(n),a=this.props.startData,o=a.current.matches;i(r,o),this.setState({parts:n,eleCount:""===r?0:(0,p.count)(o,r),error:""===r})}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.parts,n=e.current,r=t.join("");i(r,n.matches),this.setState({parts:t.map(function(e){return{name:e,checked:!0}}),eleCount:(0,p.count)(n.matches,r),error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.parts,r=(t.eleCount,t.error),a=n.map(function(t,n){var r=t.name,a=t.checked;return s["default"].createElement("label",{key:n,className:a?"selected":""},s["default"].createElement("input",{type:"checkbox",name:"selector-part",value:n,checked:a,onChange:e.toggleRadio}),r)});return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"Select Relevant Part(s) of the CSS selector"),s["default"].createElement("div",{className:"choices"},a),s["default"].createElement("h5",null,"Count: ",this.state.eleCount)),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:r}))}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(s["default"].Component);t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.endData,n=void 0===t?{}:t,r="single";return n.spec&&n.spec.type&&(r=n.spec.type),r}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(215),h=r(p),v=n(185),m=n(204),y=n(186),g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:i(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,o={type:t};switch(t){case"single":o.index=0;break;case"all":o.name="";break;case"range":o.name="",o.low=0,o.high=void 0}a(Object.assign({},r,{spec:o}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this.state.type,t=["single","all","range"];return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(h["default"],{types:t,current:e,setType:this.typeHandler})),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state.type,a={type:r};"single"===r?a.index=0:"range"===r&&(a.low=0,a.high=void 0);var o=(0,v.select)(t.matches,n,a,".forager-holder");(0,m.highlight)(o,y.queryCheck)}},{key:"componentWillUpdate",value:function(e,t){(0,m.unhighlight)(y.queryCheck);var n=e.startData,r=n.current,a=n.selector,o=t.type,l={type:o};"single"===o?l.index=0:"range"===o&&(l.low=0,l.high=void 0);var i=(0,v.select)(r.matches,a,l,".forager-holder");(0,m.highlight)(i,y.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,m.unhighlight)(y.queryCheck)}}]),t}(s["default"].Component);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.types,n=e.current,r=e.setType,a=t.map(function(e){var t=n===e;return l["default"].createElement("label",{key:e,className:t?"selected":null},l["default"].createElement("input",{type:"radio",name:"type",value:e,checked:t,onChange:r}),e)});return l["default"].createElement("div",null,l["default"].createElement("h3",null,"Should the element target a single element or all?"),a)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),l=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.startData.spec;switch(t.type){case"all":return l["default"].createElement(u["default"],e);case"single":return l["default"].createElement(s["default"],e);case"range":return l["default"].createElement(d["default"],e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),l=r(o),i=n(217),u=r(i),c=n(219),s=r(c),f=n(221),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.spec&&t.spec.name&&(a=t.spec.name),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(161),d=n(218),p=r(d),h=n(212),v=r(h),m=n(185),y=n(204),g=n(187),b=n(188),E=n(186),_=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=i(e);return n.state={name:r,error:""===r},n.nameHandler=n.nameHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,o=a.startData,l=a.next,i=a.takenNames,u=a.showMessage;if(!i.every(function(e){return e!==n}))return void u('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!r){var c={type:"all",name:n};l(Object.assign({},o,{spec:c}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(p["default"],{name:t,setName:this.nameHandler})),s["default"].createElement(v["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state.name,a=(0,m.select)(t.matches,n,{
type:"all",name:r},".forager-holder");(0,y.highlight)(a,E.queryCheck)}},{key:"componentWillUpdate",value:function(e,t){(0,y.unhighlight)(E.queryCheck);var n=e.startData,r=n.current,a=n.selector,o=t.name,l=(0,m.select)(r.matches,a,{type:"all",name:o},".forager-holder");(0,y.highlight)(l,E.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.queryCheck)}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=o.elements[a],i=null!==l.parent?l.parent:a;return{takenNames:(0,g.levelNames)(o.elements,i)}},{showMessage:b.showMessage})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.setName;return l["default"].createElement("div",null,l["default"].createElement("h3",null,"What should the array of elements be named?"),l["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:n}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),l=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.spec&&void 0!==t.spec.index&&(a=t.spec.index),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(220),h=r(p),v=n(185),m=n(204),y=n(186),g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:i(e),error:!1},n.indexHandler=n.indexHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"indexHandler",value:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,o=a.startData,l=a.next;if(!r){var i={type:"single",index:n};l(Object.assign({},o,{spec:i}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.index,n=e.error,r=this.props.startData,a=r.current,o=r.selector,l=(0,v.count)(a.matches,o);return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(h["default"],{index:t,count:l,setIndex:this.indexHandler})),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state.index,a=(0,v.select)(t.matches,n,{type:"single",index:r},".forager-holder");(0,m.highlight)(a,y.queryCheck)}},{key:"componentWillUpdate",value:function(e,t){(0,m.unhighlight)(y.queryCheck);var n=e.startData,r=n.current,a=n.selector,o=t.index,l=(0,v.select)(r.matches,a,{type:"single",index:o},".forager-holder");(0,m.highlight)(l,y.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,m.unhighlight)(y.queryCheck)}}]),t}(s["default"].Component);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=function(e){var t=e.index,n=e.count,r=e.setIndex;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"The element at which index should be selected?"),o["default"].createElement("select",{value:t,onChange:r},Array.from(new Array(n)).map(function(e,t){return o["default"].createElement("option",{key:t,value:t},t)})))};t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="",o=0,l="end";return r.spec?(r.spec.name&&(a=r.spec.name),void 0!==r.spec.low&&(o=r.spec.low),void 0!==r.spec.high&&(l=null===r.spec.high?"end":r.spec.high)):t.spec&&(t.spec.name&&(a=t.spec.name),void 0!==t.spec.low&&(o=t.spec.low),void 0!==t.spec.high&&(l=null===t.spec.high?"end":t.spec.high)),{name:a,low:o,high:l,error:""===a}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(161),d=n(212),p=r(d),h=n(222),v=r(h),m=n(185),y=n(204),g=n(187),b=n(188),E=n(186),_=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state=i(e),n.nameHandler=n.nameHandler.bind(n),n.lowHandler=n.lowHandler.bind(n),n.highHandler=n.highHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"lowHandler",value:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})}},{key:"highHandler",value:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,o=t.error,l=this.props,i=l.startData,u=l.next,c=l.takenNames,s=l.showMessage;if(!c.every(function(e){return e!==n}))return void s('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!o){var f={type:"range",name:n,low:r,high:"end"===a?null:a};u(Object.assign({},i,{spec:f}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,o=this.props.startData,l=o.current,i=o.selector,u=(0,m.count)(l.matches,i);return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(v["default"],{name:t,low:n,high:r,count:u,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state,a=r.name,o=r.low,l=this.state.high;"end"===l&&(l=null);var i=(0,m.select)(t.matches,n,{type:"range",name:a,low:o,high:l},".forager-holder");(0,y.highlight)(i,E.queryCheck)}},{key:"componentWillUpdate",value:function(e,t){(0,y.unhighlight)(E.queryCheck);var n=e.startData,r=n.current,a=n.selector,o=t.name,l=t.low,i=t.high;"end"===i&&(i=null);var u=(0,m.select)(r.matches,a,{type:"range",name:o,low:l,high:i},".forager-holder");(0,y.highlight)(u,E.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.queryCheck)}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=o.elements[a],i=null!==l.parent?l.parent:a;return{takenNames:(0,g.levelNames)(o.elements,i)}},{showMessage:b.showMessage})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.low,r=e.high,a=e.count,o=e.setName,i=e.setLow,u=e.setHigh;return l["default"].createElement("div",null,l["default"].createElement("h3",null,"What should the array of elements be named?"),l["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:o}),l["default"].createElement("h3",null,"Which elements should be selected?"),l["default"].createElement("select",{value:n,onChange:i},Array.from(new Array(a)).map(function(e,t){return l["default"].createElement("option",{key:t,value:t},t)}))," - ",l["default"].createElement("select",{value:r,onChange:u},Array.from(new Array(a)).map(function(e,t){return l["default"].createElement("option",{key:t,value:t},t)}),l["default"].createElement("option",{key:"end",value:"end"},"end")))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),l=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(224),h=r(p),v=n(185),m=n(204),y=n(186),g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={optional:i(n.props)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleOptional=n.toggleOptional.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleOptional",value:function(e){this.setState({optional:e.target.checked})}},{key:"render",value:function(){var e=this.state.optional,t=this.props.startData;t.current,t.selector;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(h["default"],{optional:e,toggle:this.toggleOptional})),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.current,n=e.selector,r=e.spec,a=(0,v.select)(t.matches,n,r,".forager-holder");(0,m.highlight)(a,y.queryCheck)}},{key:"componentWillUpdate",value:function(e,t){(0,m.unhighlight)(y.queryCheck);var n=e.startData,r=n.current,a=n.selector,o=n.spec,l=(0,v.select)(r.matches,a,o,".forager-holder");(0,m.highlight)(l,y.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,m.unhighlight)(y.queryCheck)}}]),t}(s["default"].Component);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=function(e){var t=e.optional,n=e.toggle;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"Is this element optional?"),o["default"].createElement("label",{className:t?"selected":null},o["default"].createElement("input",{type:"checkbox",checked:t,onChange:n}),t?"Yes":"No"))};t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(212),f=r(s),d=n(187),p=n(185),h=n(204),v=n(186),m=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=(n.current,n.selector),o=n.spec,l=n.optional,i=(0,d.createElement)(a,o,l);r(i)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Element"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Selector: ",t),c["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),c["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props.startData,t=e.current,n=e.selector,r=e.spec,a=(0,p.select)(t.matches,n,r,".forager-holder");(0,h.highlight)(a,v.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(c["default"].Component);t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(161),f=n(209),d=r(f),p=n(201),h=r(p),v=n(227),m=n(194),y=[v.ChooseType,v.ChooseValue,v.ChooseOptional,v.ConfirmUpdate],g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"save",value:function(e){var t=this.props,n=t.current,r=t.updateElement,a=e.spec,o=e.optional;r(n.index,{spec:a,optional:o})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.parent,r=t.selector,a=t.spec,o=t.optional;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],null),c["default"].createElement(d["default"],{steps:y,initialData:{selector:r,spec:a,optional:o},extraData:{parent:n,originalSpec:a},save:this.save,cancel:this.cancel}))}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=void 0===o?void 0:o.elements[a],i=void 0===l?void 0:o.elements[l.parent];return{current:l,parent:i}},{updateElement:m.updateElement,cancel:m.showElementFrame})(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(228);Object.defineProperty(t,"ChooseOptional",{enumerable:!0,get:function(){return r(a)["default"]}});var o=n(229);Object.defineProperty(t,"ChooseType",{enumerable:!0,get:function(){return r(o)["default"]}});var l=n(230);Object.defineProperty(t,"ChooseValue",{enumerable:!0,get:function(){return r(l)["default"]}});var i=n(234);Object.defineProperty(t,"ConfirmUpdate",{enumerable:!0,get:function(){return r(i)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(224),h=r(p),v=n(185),m=n(204),y=n(186),g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={optional:i(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleOptional=n.toggleOptional.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleOptional",value:function(e){this.setState({optional:e.target.checked})}},{key:"render",value:function(){var e=this.state.optional,t=this.props.startData;t.current,t.selector;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(h["default"],{optional:e,toggle:this.toggleOptional})),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.extraData,r=(t.selector,t.spec),a=n.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=(0,v.select)(i,t.selector,r,".forager-holder");(0,m.highlight)(u,y.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,m.unhighlight)(y.currentSelector);var n=this.props,r=n.startData,a=n.extraData,o=(r.selector,r.spec),l=a.parent,i=void 0===l?{}:l,u=i.matches,c=void 0===u?[document]:u,s=(0,v.select)(c,r.selector,o,".forager-holder");(0,m.highlight)(s,y.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,m.unhighlight)(y.currentSelector)}}]),t}(s["default"].Component);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="single";return r.spec&&r.spec.type?a=r.spec.type:t.spec&&t.spec.type&&(a=t.spec.type),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(215),h=r(p),v=n(185),m=n(204),y=n(186),g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:i(e)},n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,o=(r.spec,{type:t});a(Object.assign({},r,{spec:o}))}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this.state.type,t=["single","all","range"];return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(h["default"],{types:t,current:e,setType:this.typeHandler})),s["default"].createElement(d["default"],{next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,o=a.matches,l=void 0===o?[document]:o,i=this.state.type,u={type:i};if("single"===i){var c=t.spec&&"single"===t.spec.type;u.index=c?t.spec.index:0}else if("range"===i){var s=t.spec&&"range"===t.spec.type;u.low=s?t.spec.low:0,u.high=s?t.spec.high:void 0}var f=(0,v.select)(l,t.selector,u,".forager-holder");(0,m.highlight)(f,y.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,m.unhighlight)(y.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=t.type,c={type:u};if("single"===u){var s=n.spec&&"single"===n.spec.type;c.index=s?n.spec.index:0}else if("range"===u){var f=n.spec&&"range"===n.spec.type;c.low=f?n.spec.low:0,c.high=f?n.spec.high:void 0}var d=(0,v.select)(i,n.selector,c,".forager-holder");(0,m.highlight)(d,y.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,m.unhighlight)(y.currentSelector)}}]),t}(s["default"].Component);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.startData,n=t.spec;switch(n.type){case"all":return l["default"].createElement(u["default"],e);case"single":return l["default"].createElement(s["default"],e);case"range":return l["default"].createElement(d["default"],e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(1),l=r(o),i=n(231),u=r(i),c=n(232),s=r(c),f=n(233),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.extraData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.originalSpec&&void 0!==t.originalSpec.name&&(a=t.originalSpec.name),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(161),d=n(212),p=r(d),h=n(218),v=r(h),m=n(185),y=n(204),g=n(187),b=n(188),E=n(186),_=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=i(e);return n.state={name:r,error:""===r},n.nameHandler=n.nameHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,o=a.startData,l=a.extraData,i=a.next,u=a.takenNames,c=a.showMessage,s=l.originalSpec.name;return n===s||u.every(function(e){return e!==n})?void(r||i(Object.assign({},o,{spec:{type:"all",name:n}}))):void c('"'+n+'" is a duplicate name and cannot be used.',5e3,-1)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(v["default"],{name:t,setName:this.nameHandler})),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,o=a.matches,l=void 0===o?[document]:o,i=this.state.name,u=(0,m.select)(l,t.selector,{type:"all",name:i},".forager-holder");(0,y.highlight)(u,E.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,y.unhighlight)(E.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=t.name,c=(0,m.select)(i,n.selector,{type:"all",name:u},".forager-holder");(0,y.highlight)(c,E.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.currentSelector)}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=o.elements[a],i=null!==l.parent?l.parent:a;return{takenNames:(0,g.levelNames)(o.elements,i)}},{showMessage:b.showMessage})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.extraData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.originalSpec&&void 0!==t.originalSpec.index&&(a=t.originalSpec.index),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(220),h=r(p),v=n(185),m=n(204),y=n(186),g=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:i(e),error:!1},n.indexHandler=n.indexHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"indexHandler",value:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,o=a.startData,l=a.next;if(!r){var i={type:"single",index:n};l(Object.assign({},o,{spec:i}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.index,n=e.error,r=this.props,a=r.startData,o=r.extraData,l=a.selector,i=o.parent,u=void 0===i?{}:i,c=u.matches,f=void 0===c?[document]:c,p=(0,v.count)(f,l);return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(h["default"],{index:t,count:p,setIndex:this.indexHandler})),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,o=a.matches,l=void 0===o?[document]:o,i=this.state.index,u=(0,v.select)(l,t.selector,{type:"single",index:i},".forager-holder");(0,m.highlight)(u,y.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,m.unhighlight)(y.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=t.index,c=(0,v.select)(i,n.selector,{type:"single",index:u},".forager-holder");(0,m.highlight)(c,y.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,m.unhighlight)(y.currentSelector)}}]),t}(s["default"].Component);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.extraData,n=e.endData,r=void 0===n?{}:n,a="",o=0,l="end";if(r.spec){var i=r.spec;i.name&&(a=i.name),void 0!==i.low&&(o=i.low),void 0!==i.high&&(l=null===i.high?"end":i.high)}else if(t.originalSpec){var u=t.originalSpec;u.name&&(a=u.name),void 0!==u.low&&(o=u.low),void 0!==u.high&&(l=null===u.high?"end":u.high)}return{name:a,low:o,high:l,error:""===a}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(161),d=n(212),p=r(d),h=n(222),v=r(h),m=n(185),y=n(204),g=n(187),b=n(188),E=n(186),_=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state=i(e),n.nameHandler=n.nameHandler.bind(n),n.lowHandler=n.lowHandler.bind(n),n.highHandler=n.highHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"lowHandler",value:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})}},{key:"highHandler",value:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,o=t.error,l=this.props,i=l.startData,u=l.extraData,c=l.next,s=l.takenNames,f=l.showMessage,d=u.originalSpec.name;if(n!==d&&!s.every(function(e){return e!==n}))return void f('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!o){var p={type:"range",name:n,low:r,high:"end"===a?null:a};c(Object.assign({},i,{spec:p}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,o=this.props,l=o.startData,i=o.extraData,u=l.selector,c=i.parent,f=void 0===c?{}:c,d=f.matches,h=void 0===d?[document]:d,y=(0,m.count)(h,u);return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement(v["default"],{name:t,low:n,high:r,count:y,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,o=a.matches,l=void 0===o?[document]:o,i=this.state,u=i.name,c=i.low,s=this.state.high;"end"===s&&(s=null);var f=(0,m.select)(l,t.selector,{type:"range",name:u,low:c,high:s},".forager-holder");(0,y.highlight)(f,E.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,y.unhighlight)(E.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=t.name,c=t.low,s=t.high;"end"===s&&(s=null);var f=(0,m.select)(i,n.selector,{type:"range",name:u,low:c,high:s},".forager-holder");(0,y.highlight)(f,E.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.currentSelector)}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=o.elements[a],i=null!==l.parent?l.parent:a;return{takenNames:(0,g.levelNames)(o.elements,i)}},{showMessage:b.showMessage})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(212),f=r(s),d=(n(187),n(185)),p=n(204),h=n(186),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.spec,o=n.optional;r({optional:o,spec:a})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Updated Element"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Selector: ",t),c["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),c["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.extraData,r=(t.selector,t.spec),a=n.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=(0,d.select)(i,t.selector,r,".forager-holder");(0,p.highlight)(u,h.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,p.unhighlight)(h.currentSelector)}}]),t}(c["default"].Component);t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(161),f=n(209),d=r(f),p=n(205),h=r(p),v=n(236),m=n(244),y=r(m),g=n(194),b=n(204),E=n(186),_=[v.ChooseAttribute,v.ChooseType,v.ChooseName,v.ConfirmRule],O=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){this.props.saveRule(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current,t=this.state.index;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],{active:!1,element:e}),c["default"].createElement(d["default"],{steps:_,initialData:{},extraData:{element:e.matches[t]},save:this.save,cancel:this.cancel},c["default"].createElement(y["default"],{index:t,count:e.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,b.highlight)(e.matches,E.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(E.currentSelector);var n=this.props.current;(0,b.highlight)(n.matches,E.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(E.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r],l=void 0===o?void 0:o.elements[a];return{current:l}},{saveRule:g.saveRule,cancel:g.showElementFrame})(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(237);Object.defineProperty(t,"ChooseAttribute",{enumerable:!0,get:function(){return r(a)["default"]}});var o=n(239);Object.defineProperty(t,"ChooseName",{enumerable:!0,get:function(){return r(o)["default"]}});var l=n(240);Object.defineProperty(t,"ChooseType",{enumerable:!0,get:function(){return r(l)["default"]}});var i=n(242);Object.defineProperty(t,"ConfirmRule",{enumerable:!0,get:function(){return r(i)["default"]}});var u=n(243);Object.defineProperty(t,"ConfirmUpdateRule",{enumerable:!0,get:function(){return r(u)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.attribute?a=r.attribute:t.attr&&(a=t.attr),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(238),h=n(184),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=i(e);return n.state={attribute:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.attributeHandler=n.attributeHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.attribute,r=t.error;if(!r){var a=this.props,o=a.startData,l=a.next;l(Object.assign({},o,{attribute:n}))}}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"attributeHandler",value:function(e){this.setState({attribute:e.target.value,error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.attribute,r=(t.index,t.error),a=this.props.extraData,o=a.element;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"Which attribute has the value that you want?"),s["default"].createElement("ul",null,(0,p.attributes)(o).map(function(t,r){return s["default"].createElement("li",{key:r},s["default"].createElement("label",null,s["default"].createElement("input",{type:"radio",value:t.name,checked:t.name===n,onChange:e.attributeHandler}),t.name),s["default"].createElement("p",{className:"line"},(0,h.abbreviate)(t.value,40)))})),this.props.children),s["default"].createElement(d["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:r}))}}]),t}(s["default"].Component);t["default"]=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripEvents=t.attributes=void 0;var r=n(186);t.attributes=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[r.currentSelector,r.potentialSelector,r.queryCheck,r.hoverClass,r.savedPreview],a=Array.from(e.attributes).reduce(function(e,r){var a=r.name,o=r.value;return t[a]?e:("class"===a&&(o=o.split(" ").filter(function(e){return!n.includes(e)&&""!==e}).join(" ")),""!==o&&e.push({name:a,value:o}),e)},[]),o=e.textContent.trim();return""!==o&&a.push({name:"text",value:o}),a},t.stripEvents=function(e){var t=Array.from(e.attributes);if(t.some(function(e){return e.name.startsWith("on")})){t.forEach(function(t){var n=t.name;n.startsWith("on")&&e.removeAttribute(n)});var n=e.cloneNode(!0);return e.parentNode.replaceChild(n,e),n}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.name?a=r.name:t.name&&(a=t.name),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(161),d=n(212),p=r(d),h=n(187),v=n(188),m=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=i(e);return n.state={name:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.nameHandler=n.nameHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.name,n=this.props,r=n.takenNames,a=n.showMessage;if(!r.every(function(e){return e!==t}))return void a('"'+t+'" is a duplicate name and cannot be used.',5e3,-1);var o=this.props,l=o.startData,i=o.next;i(Object.assign({},l,{name:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"What should the rule be named?"),s["default"].createElement("input",{type:"text",placeholder:"e.g., name",value:t,onChange:this.nameHandler})),s["default"].createElement(p["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}}]),t}(s["default"].Component);t["default"]=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r];return{takenNames:(0,h.levelNames)(o.elements,a)}},{showMessage:v.showMessage})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="string";return r.type?a=r.type:t.type&&(a=t.type),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(212),d=r(f),p=n(184),h=n(241),v=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={type:i(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{type:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.type,n=this.props,r=n.startData,a=n.children,o=r.attribute,l=this.props.extraData,i=l.element,u="text"===o?i.innerText:i.getAttribute(o),c=void 0;switch(t){case"string":c=(0,p.abbreviate)(u,40);break;case"int":c=(0,h.integer)(u),null===c&&(c="No int detected");break;case"float":c=(0,h["float"])(u),null===c&&(c="No float detected")}return s["default"].createElement("form",{className:"info-box"},s["default"].createElement("div",{className:"info"},s["default"].createElement("h3",null,"What type of value is this?"),["string","int","float"].map(function(n,r){return s["default"].createElement("label",{key:r},s["default"].createElement("input",{type:"radio",value:n,checked:n===t,onChange:e.typeHandler}),n)}),s["default"].createElement("p",{className:"line"},c),a),s["default"].createElement(d["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}}]),t}(s["default"].Component);t["default"]=v},function(e,t){"use strict";function n(e){var t=/\d+/,n=e.match(t);return null!==n?parseInt(n[0],10):null}function r(e){var t=/\d+(\.\d+)?/,n=e.match(t);return null!==n?parseFloat(n[0]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.integer=n,t["float"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(212),f=r(s),d=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,o=n.attribute,l=n.type;r({name:a,type:l,attr:o})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Rule"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Name: ",t),c["default"].createElement("li",null,"Attribute: ",n),c["default"].createElement("li",null,"Type: ",r)),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}}]),t}(c["default"].Component);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(212),f=r(s),d=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,o=n.attribute,l=n.type;r({name:a,type:l,attr:o})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return c["default"].createElement("form",{className:"info-box"},c["default"].createElement("h2",null,"Confirm Updated Rule"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Name: ",t),c["default"].createElement("li",null,"Attribute: ",n),c["default"].createElement("li",null,"Type: ",r)),c["default"].createElement(f["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}}]),t}(c["default"].Component);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=n(182),i=function(e){var t=e.index,n=e.count,r=e.setIndex,a=(t+1)%n,i=(t-1+n)%n;return o["default"].createElement("div",null,o["default"].createElement(l.NeutralButton,{click:function(){r(i)},text:"<"}),t+1," / ",n,o["default"].createElement(l.NeutralButton,{click:function(){r(a)},text:">"}))};t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(161),f=n(209),d=r(f),p=n(205),h=r(p),v=n(236),m=n(244),y=r(m),g=n(194),b=n(204),E=n(186),_=[v.ChooseAttribute,v.ChooseType,v.ChooseName,v.ConfirmUpdateRule],O=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){var t=this.props,n=t.updateRule,r=t.ruleIndex;n(r,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.ruleIndex,r=t.rules[n];if(void 0===n||void 0===n)return null;var a=this.state.index,o=r.name,l=r.attr,i=r.type;return c["default"].createElement("div",{className:"frame"},c["default"].createElement(h["default"],{active:!1,element:t}),c["default"].createElement(d["default"],{steps:_,initialData:{current:t,index:0,name:o,attr:l,type:i},extraData:{element:t.matches[a]},save:this.save,cancel:this.cancel},c["default"].createElement(y["default"],{index:a,count:t.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,b.highlight)(e.matches,E.currentSelector)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(E.currentSelector);var n=this.props.current;(0,b.highlight)(n.matches,E.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(E.currentSelector)}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,o=t.elementIndex,l=r[a],i=void 0===l?void 0:l.elements[o];return{current:i,ruleIndex:n.index}},{updateRule:g.updateRule,cancel:g.showElementFrame})(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(161),f=n(182),d=n(201),p=r(d),h=n(187),v=n(247),m=n(194),y=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.closeHandler=n.closeHandler.bind(n),n.logHandler=n.logHandler.bind(n),n.prettyLogHandler=n.prettyLogHandler.bind(n),n.varHandler=n.varHandler.bind(n),n}return l(t,e),i(t,[{key:"closeHandler",value:function(e){e.preventDefault(),this.props.close()}},{key:"logHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree)))}},{key:"prettyLogHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree),null,2))}},{key:"varHandler",value:function(e){e.preventDefault(),console.log(['The current preview data can be accessed using the %c"pageData"%c variable.',"Make sure that the Forager extension's context is selected.",'(This will be a string using the extension\'s ID that starts with "chrome-extensions://". Open the chrome://extensions tab and look for the Forager extension to determine the extension ID)'].join(" "),"font-weight: bold; font-size: 1.5em;",""),window.pageData=(0,v.preview)(this.props.tree)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"frame"},c["default"].createElement(p["default"],null),c["default"].createElement("div",{className:"preview"},c["default"].createElement("pre",null,JSON.stringify((0,v.preview)(this.props.tree),null,2)),c["default"].createElement("div",{className:"buttons"},c["default"].createElement(f.PosButton,{text:"Log to Console",click:this.logHandler}),c["default"].createElement(f.PosButton,{text:"Pretty Log",click:this.prettyLogHandler}),c["default"].createElement(f.PosButton,{text:"Use as Variable",click:this.varHandler}),c["default"].createElement(f.NegButton,{text:"Hide Preview",click:this.closeHandler}))))}}]),t}(c["default"].Component);t["default"]=(0,s.connect)(function(e){var t=e.page,n=(e.preview,t.pages),r=t.pageIndex,a=n[r];return{tree:void 0===a?{}:(0,h.fullGrow)(a.elements)}},{close:m.showElementFrame})(y)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var a=n(241),o=function(e,t){var n=t.querySelectorAll(e.selector),a=e.spec.type;switch(a){case"single":var o=e.spec.index,i=n[o];if(!i)return;return l(e,i);case"all":var u=e.spec.name,c=Array.from(n).map(function(t){return l(e,t)}).filter(function(e){return void 0!==e});return r({},u,c);case"range":var s=e.spec,u=s.name,f=s.low,d=s.high,c=Array.from(n).slice(f,d||void 0).map(function(t){return l(e,t)}).filter(function(e){return void 0!==e});return r({},u,c)}},l=function(e,t){var n=u(e.rules,t);if(n){var r=i(e.children,t);if(r)return Object.assign({},n,r)}},i=function(e,t){var n={};return e.some(function(e){var r=o(e,t);if(!r&&!e.optional)return n=void 0,!0;for(var a in r)n[a]=r[a];return!1}),n},u=function(e,t){var n={};return e.some(function(e){var r=void 0;if("text"===e.attr)r=t.textContent.replace(/\s+/g," ");else{var o=t.getAttribute(e.attr);if(null===o)return n=void 0,!0;r=o||""}switch(e.type){case"int":r=(0,a.integer)(r);break;case"float":r=(0,a["float"])(r)}return n[e.name]=r,!1}),n};t.preview=function(e){return void 0===e?"":o(e,document)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.upload=t.load=t.remove=t.rename=t.save=void 0;var r=(n(185),n(187));t.save=function(e){return new Promise(function(t,n){void 0===e&&n("No page to save");var a=(0,r.clean)(e);chrome.storage.local.get("sites",function(e){var n=window.location.hostname;e.sites[n]=e.sites[n]||{},e.sites[n][a.name]=a,chrome.storage.local.set({sites:e.sites}),t("Saved")})})},t.rename=function(e,t){return new Promise(function(n,r){chrome.storage.local.get("sites",function(a){var o=window.location.hostname,l=a.sites[o][t];void 0===l&&r("No page named "+t+" found"),l.name=e,a.sites[o][e]=l,delete a.sites[o][t],chrome.storage.local.set({sites:a.sites}),n('Renamed "'+t+'" to "'+e+'"')})})},t.remove=function(e){return new Promise(function(t,n){void 0===e&&n("No page to delete"),chrome.storage.local.get("sites",function(n){var r=window.location.hostname;delete n.sites[r][e],chrome.storage.local.set({sites:n.sites}),t("Deleted page "+e)})})},t.load=function(){return new Promise(function(e,t){
chrome.storage.local.get("sites",function(t){var n=window.location.hostname,a=t.sites[n]||{},o=(0,r.preparePages)(a);e(o)})})},t.upload=function(e){return new Promise(function(t,n){void 0===e&&n("No page to upload"),chrome.runtime.sendMessage({type:"upload",data:{name:e.name,site:window.location.hostname,page:JSON.stringify((0,r.clean)(e))}},function(e){e.error?n("Failed to upload page"):t(e)})})},t.sync=function(){return new Promise(function(e,t){var n=window.location.hostname;chrome.runtime.sendMessage({type:"sync",site:n},function(a){a.error?t("Failed to sync pages"):!function(){var t=a.pages;chrome.storage.local.get("sites",function(a){var o=a.sites[n]||{},l=Object.assign({},o,t);a.sites[n]=l,chrome.storage.local.set({sites:a.sites});var i=(0,r.preparePages)(l);e(i)})}()})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=(0,o.createStore)(v,m,(0,o.applyMiddleware)(h["default"],d["default"],s["default"],l.messagesMiddleware));return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(167),l=n(188),i=n(250),u=r(i),c=n(254),s=r(c),f=n(255),d=r(f),p=n(256),h=r(p),v=(0,o.combineReducers)(Object.assign({},u["default"],{messages:l.messages})),m={show:!0,page:{pages:[void 0],pageIndex:0,elementIndex:0},frame:{name:"element",data:{}},messages:[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(251),o=r(a),l=n(252),i=r(l),u=n(253),c=r(u);t["default"]={frame:c["default"],show:o["default"],page:i["default"]}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments[1];switch(t.type){case l.CLOSE_FORAGER:return!1;case l.OPEN_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(196),l=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case i.SELECT_PAGE:var n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=e.pages.length)&&(n=0),Object.assign({},e,{pageIndex:n,elementIndex:0});case i.SET_PAGES:return Object.assign({},e,{pageIndex:0,pages:[void 0].concat(a(t.pages)),elementIndex:0});case i.ADD_PAGE:var r=e.pages,o=[].concat(a(r),[t.page]);return Object.assign({},e,{pages:o,pageIndex:o.length-1,elementIndex:0});case i.REMOVE_PAGE:var r=e.pages,l=e.pageIndex;return 0===l?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),a(r.slice(l+1))),pageIndex:0,elementIndex:0});case i.RENAME_PAGE:var r=e.pages,l=e.pageIndex;return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},r[l],{name:t.name})],a(r.slice(l+1)))});case i.SET_MATCHES:var r=e.pages,l=e.pageIndex,u=t.matches;return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},r[l],{elements:r[l].elements.map(function(e){if(null===e)return null;var t=u[e.index];return void 0!==t?Object.assign({},e,{matches:t}):e})})],a(r.slice(l+1)))});case i.SELECT_ELEMENT:var r=e.pages,l=e.pageIndex,c=e.elementIndex,s=r[l].elements.length,n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=s)&&(n=0),Object.assign({},e,{elementIndex:n});case i.SAVE_ELEMENT:var r=e.pages,l=e.pageIndex,c=e.elementIndex,f=r[l],d=f.elements[c],p=f.elements.length,h=t.element;return h.parent=d.index,h.index=p,d.childIndices.push(p),Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},f,{elements:f.elements.concat([h])})],a(r.slice(l+1))),elementIndex:p});case i.UPDATE_ELEMENT:var r=e.pages,l=e.pageIndex,c=e.elementIndex,f=r[l],d=f.elements[c],n=t.index,v=t.newProps;return 0===n?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},f,{elements:f.elements.map(function(e){return null===e?null:e.index!==n?e:Object.assign({},e,v)})})],a(r.slice(l+1)))});case i.REMOVE_ELEMENT:var r=e.pages,l=e.pageIndex,c=e.elementIndex,f=r[l],d=f.elements[c];if(0===c){var m=Object.assign({},f.elements[0],{childIndices:[]});return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},f,{elements:[m]})],a(r.slice(l+1))),elementIndex:0})}var y=[c],g=f.elements[c].parent||0,b=Object.assign({},f,{elements:f.elements.map(function(e){return null===e?null:(e.childIndices=e.childIndices.filter(function(e){return!y.includes(e)}),y.includes(e.index)?(y=y.concat(e.childIndices),null):e)})});return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[b],a(r.slice(l+1))),elementIndex:g});case i.SAVE_RULE:var r=e.pages,l=e.pageIndex,c=e.elementIndex,E=t.rule,f=r[l];return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c&&(e.rules=e.rules.concat([E])),e})})],a(r.slice(l+1)))});case i.REMOVE_RULE:var r=e.pages,l=e.pageIndex,c=e.elementIndex,n=t.index,f=r[l];return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c?Object.assign({},e,{rules:e.rules.filter(function(e,t){return t!==n})}):e})})],a(r.slice(l+1)))});case i.UPDATE_RULE:var r=e.pages,l=e.pageIndex,c=e.elementIndex,n=t.index,E=t.rule,f=r[l];return Object.assign({},e,{pages:[].concat(a(r.slice(0,l)),[Object.assign({},f,{elements:f.elements.map(function(e){return null!==e&&e.index===c&&(e.rules=e.rules.map(function(e,t){return t===n?E:e})),e})})],a(r.slice(l+1)))});case i.CLOSE_FORAGER:return Object.assign({},e,{pageIndex:0,elementIndex:0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var l=n(196),i=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?{name:"element"}:arguments[0],t=arguments[1];switch(t.type){case l.SELECT_PAGE:case l.ADD_PAGE:case l.SET_PAGES:case l.REMOVE_ELEMENT:case l.SAVE_ELEMENT:case l.UPDATE_ELEMENT:case l.SAVE_RULE:case l.REMOVE_RULE:case l.UPDATE_RULE:case l.CLOSE_FORAGER:case l.SHOW_ELEMENT_FRAME:return{name:"element"};case l.SHOW_ELEMENT_WIZARD:return{name:"element-wizard"};case l.SHOW_EDIT_ELEMENT_WIZARD:return{name:"edit-element-wizard"};case l.SHOW_RULE_WIZARD:return{name:"rule-wizard"};case l.SHOW_EDIT_RULE_WIZARD:return{name:"edit-rule-wizard",index:t.index};case l.SHOW_PREVIEW:return{name:"preview"};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(196),l=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(196),o=r(a),l=n(188),i=n(194),u=n(248),c=r(u);t["default"]=function(e){return function(t){return function(n){var r=e.getState(),a=r.page,u=a.pages,s=a.pageIndex,f=u[s];switch(n.type){case o.RENAME_PAGE:return c.rename(n.name,f.name).then(function(t){e.dispatch((0,l.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,l.showMessage)(t,1e3,-1))}),t(n);case o.REMOVE_PAGE:var d=u[s].name;return c.remove(d).then(function(t){e.dispatch((0,l.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,l.showMessage)(t,1e3,-1))}),t(n);case o.UPLOAD_PAGE:c.upload(u[s]).then(function(t){e.dispatch((0,l.showMessage)("Upload Successful",5e3,1))})["catch"](function(t){e.dispatch((0,l.showMessage)(t,5e3,-1))});break;case o.SYNC_PAGES:c.sync().then(function(t){e.dispatch((0,i.setPages)(t)),e.dispatch((0,l.showMessage)("Pages synced",5e3,1))})["catch"](function(t){e.dispatch((0,l.showMessage)("Failed to sync pages",5e3,-1))});break;case o.ADD_PAGE:case o.SAVE_ELEMENT:case o.REMOVE_ELEMENT:case o.UPDATE_ELEMENT:case o.SAVE_RULE:case o.REMOVE_RULE:var p=t(n),h=e.getState(),v=h.page,m=v.pages,y=v.pageIndex;return c.save(m[y]).then(function(t){e.dispatch((0,l.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,l.showMessage)(t,1e3,-1))}),p;default:return t(n)}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(185),o=n(196),l=r(o),i=n(194);t["default"]=function(e){return function(t){return function(n){var r=[l.SELECT_PAGE,l.SAVE_ELEMENT,l.UPDATE_ELEMENT,l.REFRESH_MATCHES];if(!r.includes(n.type))return t(n);switch(n.type){case l.SELECT_PAGE:case l.SAVE_ELEMENT:case l.UPDATE_ELEMENT:case l.REFRESH_MATCHES:var o=t(n),u=e.getState().page,c=u.pages,s=u.pageIndex,f=c[s];if(void 0===f)return;var d=f.elements.reduce(function(e,t){if(null===t)return e;var n=null===t.parent?[document]:e[t.parent];return e[t.index]=(0,a.select)(n,t.selector,t.spec,".forager-holder"),e},{});return e.dispatch((0,i.setMatches)(d)),o}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(196),o=r(a);n(194);t["default"]=function(e){return function(t){return function(n){var r=[o.SYNC_PAGES,o.REMOVE_PAGE,o.REMOVE_ELEMENT];if(!r.includes(n.type))return t(n);var a="Are you sure?";switch(n.type){case o.SYNC_PAGES:a="Syncing pages will overwrite duplicate pages. Continue?";break;case o.REMOVE_PAGE:var l=e.getState(),i=l.page,u=i.pages,c=i.pageIndex,s=u[c];a='Are you sure you want to delete the page "'+s.name+'"?';break;case o.REMOVE_ELEMENT:var f=e.getState(),i=f.page,u=i.pages,c=i.pageIndex,d=i.elementIndex,s=u[c],p=s.elements[d];a=0===p.index?"Are you sure you want to reset the page? This will delete all rules and child elements":'Are you sure you want to delete the element "'+p.selector+'"?'}window.confirm(a)&&t(n)}}}}]);