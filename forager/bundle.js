webpackJsonp([0],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),l=r(a),o=n(31),i=r(o),s=n(161),u=n(180),c=r(u),d=n(194),f=n(247),p=n(237),h=n(248),m=r(h);document.body.classList.add("foraging"),(0,p.stripEvents)(document.body),Array.from(document.querySelectorAll("*")).forEach(function(e){(0,p.stripEvents)(e)}),document.querySelector(".forager-holder")?(document.body.classList.add("foraging"),window.restore()):!function(){var e=document.createElement("div");e.classList.add("forager-holder"),document.body.appendChild(e);var t=(0,m["default"])();(0,f.load)().then(function(n){t.dispatch((0,d.setPages)(n)),i["default"].render(l["default"].createElement(s.Provider,{store:t},l["default"].createElement(c["default"],null)),e)}),window.restore=function(){t.getState().show||t.dispatch((0,d.openForager)())}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.connect=t.Provider=void 0;var a=n(162),l=r(a),o=n(164),i=r(o);t.Provider=l["default"],t.connect=i["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t["default"]=void 0;var i=n(1),s=n(163),u=r(s),c=function(e){function t(n,r){a(this,t);var o=l(this,e.call(this,n,r));return o.store=n.store,o}return o(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return i.Children.only(e)},t}(i.Component);t["default"]=c,c.propTypes={store:u["default"].isRequired,children:i.PropTypes.element.isRequired},c.childContextTypes={store:u["default"].isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1);t["default"]=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.displayName||e.name||"Component"}function s(e,t){return(0,P["default"])((0,y["default"])(e),"`%sToProps` must return an object. Instead received %s.",t?"mapDispatch":"mapState",e),e}function u(e,t,n){function r(e,t,n){var r=E(e,t,n);return(0,P["default"])((0,y["default"])(r),"`mergeProps` must return an object. Instead received %s.",r),r}var u=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],f=Boolean(e),h=e||M,v=(0,y["default"])(t)?(0,g["default"])(t):t||S,E=n||O,_=u.pure,x=void 0===_?!0:_,D=u.withRef,N=void 0===D?!1:D,C=x&&E!==O,A=w++;return function(e){var t=function(t){function n(e,r){a(this,n);var o=l(this,t.call(this,e,r));o.version=A,o.store=e.store||r.store,(0,P["default"])(o.store,'Could not find "store" in either the context or '+('props of "'+o.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+o.constructor.displayName+'".'));var i=o.store.getState();return o.state={storeState:i},o.clearCache(),o}return o(n,t),n.prototype.shouldComponentUpdate=function(){return!x||this.haveOwnPropsChanged||this.hasStoreStateChanged},n.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return s(r)},n.prototype.configureFinalMapState=function(e,t){var n=h(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:h,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):s(n)},n.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return s(r,!0)},n.prototype.configureFinalMapDispatch=function(e,t){var n=v(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:v,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):s(n,!0)},n.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return this.stateProps&&(0,m["default"])(e,this.stateProps)?!1:(this.stateProps=e,!0)},n.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,m["default"])(e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},n.prototype.updateMergedPropsIfNeeded=function(){var e=r(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&C&&(0,m["default"])(e,this.mergedProps)?!1:(this.mergedProps=e,!0)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){f&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillReceiveProps=function(e){x&&(0,m["default"])(e,this.props)||(this.haveOwnPropsChanged=!0)},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},n.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},n.prototype.handleChange=function(){if(this.unsubscribe){var e=this.state.storeState,t=this.store.getState();x&&e===t||(this.hasStoreStateChanged=!0,this.setState({storeState:t}))}},n.prototype.getWrappedInstance=function(){return(0,P["default"])(N,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var a=!0,l=!0;x&&r&&(a=n||t&&this.doStatePropsDependOnOwnProps,l=t&&this.doDispatchPropsDependOnOwnProps);var o=!1,i=!1;a&&(o=this.updateStatePropsIfNeeded()),l&&(i=this.updateDispatchPropsIfNeeded());var s=!0;return s=o||i||t?this.updateMergedPropsIfNeeded():!1,!s&&r?r:(N?this.renderedElement=(0,d.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,d.createElement)(e,this.mergedProps),this.renderedElement)},n}(d.Component);return t.displayName="Connect("+i(e)+")",t.WrappedComponent=e,t.contextTypes={store:p["default"]},t.propTypes={store:p["default"]},(0,b["default"])(t,e)}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t["default"]=u;var d=n(1),f=n(163),p=r(f),h=n(165),m=r(h),v=n(166),g=r(v),E=n(169),y=r(E),_=n(178),b=r(_),x=n(179),P=r(x),M=function(e){return{}},S=function(e){return{dispatch:e}},O=function(e,t,n){return c({},n,e,t)},w=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,l=0;l<n.length;l++)if(!a.call(t,n[l])||e[n[l]]!==t[n[l]])return!1;return!0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,a.bindActionCreators)(e,t)}}t.__esModule=!0,t["default"]=r;var a=n(167)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var a=n(168),l=r(a),o=n(173),i=r(o),s=n(175),u=r(s),c=n(176),d=r(c),f=n(177),p=r(f),h=n(174);r(h);t.createStore=l["default"],t.combineReducers=i["default"],t.bindActionCreators=u["default"],t.applyMiddleware=d["default"],t.compose=p["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){function r(){h===p&&(h=p.slice())}function l(){return f}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),h.push(e),function(){if(t){t=!1,r();var n=h.indexOf(e);h.splice(n,1)}}}function u(e){if(!(0,o["default"])(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw new Error("Reducers may not dispatch actions.");try{m=!0,f=d(f,e)}finally{m=!1}for(var t=p=h,n=0;n<t.length;n++)t[n]();return e}function c(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,u({type:i.INIT})}if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var d=e,f=t,p=[],h=p,m=!1;return u({type:i.INIT}),{dispatch:u,subscribe:s,getState:l,replaceReducer:c}}t.__esModule=!0,t.ActionTypes=void 0,t["default"]=a;var l=n(169),o=r(l),i=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){function r(e){if(!o(e)||f.call(e)!=i||l(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d}var a=n(170),l=n(171),o=n(172),i="[object Object]",s=Object.prototype,u=Function.prototype.toString,c=s.hasOwnProperty,d=u.call(Object),f=s.toString;e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function l(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:i.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var a="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:a}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+i.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function o(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i,s=Object.keys(n);try{l(n)}catch(u){i=u}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(i)throw i;for(var r=!1,l={},o=0;o<s.length;o++){var u=s[o],c=n[u],d=e[u],f=c(d,t);if("undefined"==typeof f){var p=a(u,t);throw new Error(p)}l[u]=f,r=r||f!==d}return r?l:e}}t.__esModule=!0,t["default"]=o;var i=n(168),s=n(169),u=(r(s),n(174));r(u)},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),a={},l=0;l<r.length;l++){var o=r[l],i=e[o];"function"==typeof i&&(a[o]=n(i,t))}return a}t.__esModule=!0,t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var o=e(n,r,a),s=o.dispatch,u=[],c={getState:o.getState,dispatch:function(e){return s(e)}};return u=t.map(function(e){return e(c)}),s=i["default"].apply(void 0,u)(o.dispatch),l({},o,{dispatch:s})}}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=a;var o=n(177),i=r(o)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length<=0?void 0:arguments[0];var e=t[t.length-1],n=t.slice(0,-1);return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var a=Object.getOwnPropertyNames(t),l=0;l<a.length;++l)if(!n[a[l]]&&!r[a[l]])try{e[a[l]]=t[a[l]]}catch(o){}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,a,l,o,i){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,l,o,i],c=0;s=new Error(t.replace(/%s/g,function(){return u[c++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){return e.show?o["default"].createElement("div",{id:"forager"},o["default"].createElement(u["default"],null),o["default"].createElement(d["default"],null)):null}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=r(l),i=n(161),s=n(181),u=r(s),c=n(199),d=r(c);t["default"]=(0,i.connect)(function(e){return{show:e.show}})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){return window.prompt("Page Name:\nCannot contain the following characters: < > : ' \\ / | ? * ")}function l(e){return e.filter(function(e){return void 0!==e}).map(function(e){return e.name})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),s=n(161),u=n(182),c=n(183),d=r(c),f=n(184),p=(n(185),n(187)),h=n(188),m=n(194),v=i["default"].createClass({displayName:"Controls",addHandler:function(e){var t=this.props,n=t.pages,r=t.showMessage,o=t.addPage,i=a();if((0,f.validName)(i,l(n))){var s=(0,p.createElement)("body");s=Object.assign({},s,{index:0,parent:null,matches:[document.body]}),o({name:i,elements:[s]})}else r('Cannot Use Name: "'+i+'"',5e3,-1)},renameHandler:function(e){var t=a(),n=this.props,r=n.pages,o=n.showMessage,i=n.renamePage;(0,f.validName)(t,l(r))?i(t):o('Cannot Use Name: "'+t+'"',5e3,-1)},render:function(){var e=this.props,t=e.pages,n=(e.message,e.currentIndex),r=e.selectPage,a=e.uploadPage,l=e.showPreview,o=e.refreshMatches,s=e.syncPages,c=e.removePage,f=e.closeForager,p=0!==n;return i["default"].createElement("div",{className:"topbar"},i["default"].createElement("div",{className:"controls"},i["default"].createElement("div",{className:"page-controls"},"Page ",i["default"].createElement("select",{value:n,onChange:function(e){r(parseInt(e.target.value,10))}},t.map(function(e,t){return i["default"].createElement("option",{key:t,value:t},void 0===e?"":e.name)})),i["default"].createElement(u.PosButton,{text:"Add Page",click:this.addHandler}),i["default"].createElement(u.NeutralButton,{text:"Refresh",title:"Refresh the list of matched elements",click:function(){o()},disabled:!p}),i["default"].createElement(u.PosButton,{text:"Preview",click:function(){l()},disabled:!p}),i["default"].createElement(u.NegButton,{text:"Delete",click:function(){c()},disabled:!p}),i["default"].createElement(u.PosButton,{text:"Rename",click:this.renameHandler,disabled:!p}),i["default"].createElement(u.PosButton,{text:"Upload",click:function(){a()},disabled:!p}),i["default"].createElement(u.PosButton,{text:"Sync Pages",click:function(){s()}})),i["default"].createElement("div",{className:"app-controls"},i["default"].createElement(u.NegButton,{text:String.fromCharCode(215),classes:["transparent"],click:function(){document.body.classList.remove("foraging"),f()}}))),i["default"].createElement(d["default"],null))}});t["default"]=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex;return{currentIndex:r,pages:n}},{addPage:m.addPage,selectPage:m.selectPage,closeForager:m.closeForager,showMessage:h.showMessage,syncPages:m.syncPages,refreshMatches:m.refreshMatches,renamePage:m.renamePage,removePage:m.removePage,uploadPage:m.uploadPage,showPreview:m.showPreview})(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e){var t=e.classes,n=a(e,["classes"]);return c["default"].createElement(i,s({},n,{classes:["pos"].concat(t)}))}function o(e){var t=e.classes,n=a(e,["classes"]);return c["default"].createElement(i,s({},n,{classes:["neg"].concat(t)}))}function i(e){var t=e.text,n=void 0===t?"":t,r=e.click,a=void 0===r?function(){}:r,l=e.classes,o=void 0===l?[]:l,i=e.title,s=void 0===i?"":i,u=e.disabled,d=void 0===u?!1:u,f=e.type,p=void 0===f?"button":f;return c["default"].createElement("button",{className:o.join(" "),title:s,disabled:d,type:p,onClick:a},n)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.PosButton=l,t.NegButton=o,t.NeutralButton=i;var u=n(1),c=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.messages.map(function(e){return i["default"].createElement(l,{key:e.id,message:e.message,rating:e.rating})});return i["default"].createElement("div",{className:"message-board"},t)}function l(e){var t=e.message,n=e.rating,r=["message"];return 0>n?r.push("neg"):n>0&&r.push("pos"),i["default"].createElement("div",{className:r.join(" ")},t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),s=n(161);t["default"]=(0,s.connect)(function(e){return{messages:e.messages}})(a)},function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];switch(e.type){case"single":return r(e);case"all":return a(e);case"range":return l(e);default:return""}}function r(e){var t=e.index,n=void 0===t?0:t;return"captures element at index "+n}function a(e){var t=e.name,n=void 0===t?"":t;return'captures all elements, groups them as "'+n+'"'}function l(e){var t=e.name,n=void 0===t?"":t,r=e.low,a=e.high,l=null===a?"end":a;return"captures elements "+r+" to "+l+', groups them as "'+n+'"'}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=i(e,10),a="";if(!t)return r;switch(t.type){case"single":a=r+"["+t.index+"]";break;case"all":a="["+r+"]";break;case"range":a=r+"["+t.low+":"+(t.high||"end")+"]"}return n&&(a+="*"),a}Object.defineProperty(t,"__esModule",{value:!0}),t.describeSpec=n,t.shortElement=o;var i=(t.validName=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(null===e||""===e)return!1;var n=/[<>:'\/\\\|\?\*]/;return null!==e.match(n)?!1:t.every(function(t){return t!==e})},t.abbreviate=function(e,t){if(e.length<=t)return e;if(3>=t)return"...";var n=void 0,r=void 0,a=t-3,l=a/2;a%2===0?(n=l,r=l):(n=Math.ceil(l),r=Math.floor(l));var o=e.slice(0,n),i=0===r?"":e.slice(-r);return o+"..."+i})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=e.charCodeAt(0);return!(65>t||t>90&&97>t||t>122)}Object.defineProperty(t,"__esModule",{value:!0}),t.allSelect=t.parts=t.count=t.select=t.protect=void 0;var l=n(186),o=t.protect=function(e){var t=document.querySelectorAll(e);Array.from(t).forEach(function(e){e.classList.add("no-select"),Array.from(e.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})})};t.select=function(e,t,n,a){var l=(t||"*")+":not(.no-select)";n||(n={type:"all"}),void 0!==a&&""!==a&&o(a);var i=Array.from(e).reduce(function(e,t){var r=t.querySelectorAll(l),a=n,o=a.type,i=[];switch(o){case"single":var s=n.index;i=void 0!==r[s]?[r[s]]:[];break;case"all":i=Array.from(r);break;case"range":var u=n.low,c=n.high||void 0;i=Array.from(r).slice(u,c)}return e.concat(i)},[]);return[].concat(r(new Set(i)))},t.count=function(e,t,n){var r=(t||"*")+":not(.no-select)";return n||(n={type:"all"}),Array.from(e).reduce(function(e,t){var a=t.querySelectorAll(r),l=0;switch(n.type){case"single":var o=n.index;l=void 0!==a[o]?1:0;break;case"all":l=a.length;break;case"range":var i=n.low,s=n.high;l=Array.from(a).slice(i,s||void 0).length}return e>l?e:l},0)},t.parts=function(e){var t=[l.currentSelector,l.potentialSelector,l.queryCheck,l.hoverClass,l.savedPreview],n=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*/,r=function(e){return!t.some(function(t){return t===e})&&n.test(e)},o=[],i=e.tagName.toLowerCase();return o.push(i),""!==e.id&&a(e.id)&&o.push("#"+e.id),Array.from(e.classList).forEach(function(e){r(e)&&o.push("."+e)}),o},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.currentSelector="current-element",t.potentialSelector="selectable-element",t.queryCheck="query-check",t.hoverClass="forager-highlight",t.savedPreview="saved-preview"},function(e,t,n){"use strict";function r(e){return e?void 0===e.value?e:"single"===e.type?{type:"single",index:e.value}:"all"===e.type?{type:"all",name:e.value}:void 0:{}}function a(e,t){for(var n=e[t],r=void 0;void 0===r;)void 0!==n.spec.name||null===n.parent?r=n.index:n=e[n.parent];return l(e,r,!0)}function l(e,t,n){var r=e[t],a=[];return void 0===r?[]:(n||void 0===r.spec.name?(r.rules.forEach(function(e){a.push(e.name)}),r.childIndices.forEach(function(t){var n=e[t];a=a.concat(l(e,n.index,!1))})):a.push(r.spec.name),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGrow=t.fullGrow=t.clean=t.flatten=t.preparePages=t.createElement=void 0,t.levelNames=a;var o=(n(185),t.createElement=function(e){var t=arguments.length<=1||void 0===arguments[1]?{type:"single",index:0}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return{selector:e,spec:t,childIndices:[],rules:[],optional:n,matches:[]}},t.preparePages=function(e){var t=Object.keys(e).map(function(t){return e[t]}).filter(function(e){return null!==e}).map(function(e){return{name:e.name,elements:o(e.element)}});return t},t.flatten=function(e){if(void 0===e)return[];for(var t=0,n=[Object.assign({},e,{parent:null,childIndices:[]})];t<n.length;){var a=n[t];a.index=t,null!==a.parent&&n[a.parent].childIndices.push(t),a.spec=r(a.spec),a.children.forEach(function(e){n.push(Object.assign({},e,{parent:t,childIndices:[]}))}),delete a.children,t+=1}return n}),i=(t.clean=function(e){return{name:e.name,element:i(e.elements)}},t.fullGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),children:[],rules:e.rules.map(function(e){return Object.assign({},e)}),optional:e.optional,parent:e.parent}});return t.forEach(function(e){if(null!==e){var n=e.parent;delete e.parent,null!==n&&t[n].children.push(e)}}),t[0]});t.simpleGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),hasRules:e.rules.length>0,hasChildren:e.childIndices.length>0,children:[],index:e.index,parent:e.parent,matches:e.matches,optional:e.optional}});return t.forEach(function(e){null!==e&&null!==e.parent&&t[e.parent].children.push(e)}),t[0]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(189);Object.defineProperty(t,"ADD_MESSAGE",{enumerable:!0,get:function(){return a.ADD_MESSAGE}}),Object.defineProperty(t,"REMOVE_MESSAGE",{enumerable:!0,get:function(){return a.REMOVE_MESSAGE}});var l=n(190);Object.defineProperty(t,"showMessage",{enumerable:!0,get:function(){return l.showMessage}});var o=n(191);Object.defineProperty(t,"messagesMiddleware",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(193);Object.defineProperty(t,"messages",{enumerable:!0,get:function(){return r(i)["default"]}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SHOW_MESSAGE="@@erm/SHOW_MESSAGE",t.ADD_MESSAGE="@@erm/ADD_MESSAGE",t.REMOVE_MESSAGE="@@erm/REMOVE_MESSAGE"},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:o.SHOW_MESSAGE,message:e,lifetime:t,rating:n}}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:o.ADD_MESSAGE,message:e,id:t,rating:n}}function l(e){return{type:o.REMOVE_MESSAGE,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showMessage=r,t.addMessage=a,t.removeMessage=l;var o=n(189)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(189),a=n(190),l=n(192);t["default"]=function(e){return function(t){return function(n){if(n.type!==r.SHOW_MESSAGE)return t(n);var o=n.message,i=n.lifetime,s=n.rating,u=(0,l.pseudoRandomID)();return setTimeout(function(){e.dispatch((0,a.removeMessage)(u))},i),e.dispatch((0,a.addMessage)(o,u,s))}}}},function(e,t){"use strict";function n(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length;return Array.from(Array(10)).map(function(){return e[Math.floor(Math.random()*t)]}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.pseudoRandomID=n},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case a.ADD_MESSAGE:return e.concat([{id:t.id,message:t.message,rating:t.rating}]);case a.REMOVE_MESSAGE:return e.filter(function(e){return e.id!==t.id});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(189)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(195);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(197);Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var l=n(198);Object.keys(l).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.openForager=t.closeForager=void 0;var a=n(196),l=r(a);t.closeForager=function(){return{type:l.CLOSE_FORAGER}},t.openForager=function(){return{type:l.OPEN_FORAGER}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SELECT_PAGE="SELECT_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SYNC_PAGES="SYNC_PAGES",t.SET_PAGES="SET_PAGES",t.SET_MATCHES="SET_MATCHES",t.REFRESH_MATCHES="REFRESH_MATCHES",t.SELECT_ELEMENT="SELECT_ELEMENT",t.SAVE_ELEMENT="SAVE_ELEMENT",t.REMOVE_ELEMENT="REMOVE_ELEMENT",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE",t.UPDATE_RULE="UPDATE_RULE",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_ELEMENT_WIZARD="SHOW_ELEMENT_WIZARD",t.SHOW_EDIT_ELEMENT_WIZARD="SHOW_EDIT_ELEMENT_WIZARD",t.SHOW_RULE_WIZARD="SHOW_RULE_WIZARD",t.SHOW_EDIT_RULE_WIZARD="SHOW_EDIT_RULE_WIZARD",t.SHOW_PREVIEW="SHOW_PREVIEW",t.CLOSE_FORAGER="CLOSE_FORAGER",t.OPEN_FORAGER="OPEN_FORAGER"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.showPreview=t.showEditRuleWizard=t.showRuleWizard=t.showEditElementWizard=t.showElementWizard=t.showElementFrame=void 0;var a=n(196),l=r(a);t.showElementFrame=function(){return{type:l.SHOW_ELEMENT_FRAME}},t.showElementWizard=function(){return{type:l.SHOW_ELEMENT_WIZARD}},t.showEditElementWizard=function(){return{type:l.SHOW_EDIT_ELEMENT_WIZARD}},t.showRuleWizard=function(){return{type:l.SHOW_RULE_WIZARD}},t.showEditRuleWizard=function(e){return{type:l.SHOW_EDIT_RULE_WIZARD,index:e}},t.showPreview=function(){return{type:l.SHOW_PREVIEW}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRule=t.removeRule=t.saveRule=t.removeElement=t.updateElement=t.saveElement=t.selectElement=t.refreshMatches=t.setMatches=t.setPages=t.syncPages=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.selectPage=void 0;var a=n(196),l=r(a);t.selectPage=function(e){return{type:l.SELECT_PAGE,index:e}},t.addPage=function(e){return{type:l.ADD_PAGE,page:e}},t.removePage=function(){return{type:l.REMOVE_PAGE}},t.renamePage=function(e){return{type:l.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:l.UPLOAD_PAGE}},t.syncPages=function(){return{type:l.SYNC_PAGES}},t.setPages=function(e){return{type:l.SET_PAGES,pages:e}},t.setMatches=function(e){return{type:l.SET_MATCHES,matches:e}},t.refreshMatches=function(e){return{type:l.REFRESH_MATCHES}},t.selectElement=function(e){return{type:l.SELECT_ELEMENT,index:e}},t.saveElement=function(e){return{type:l.SAVE_ELEMENT,element:e}},t.updateElement=function(e,t){return{type:l.UPDATE_ELEMENT,index:e,newProps:t}},t.removeElement=function(){return{type:l.REMOVE_ELEMENT}},t.saveRule=function(e){return{type:l.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:l.REMOVE_RULE,
index:e}},t.updateRule=function(e,t){return{type:l.UPDATE_RULE,index:e,rule:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.frame;switch(t.name){case"element":return o["default"].createElement(u["default"],null);case"element-wizard":return o["default"].createElement(d["default"],null);case"edit-element-wizard":return o["default"].createElement(p["default"],null);case"rule-wizard":return o["default"].createElement(m["default"],null);case"edit-rule-wizard":return o["default"].createElement(g["default"],null);case"preview":return o["default"].createElement(y["default"],null);default:return null}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=r(l),i=n(161),s=n(200),u=r(s),c=n(207),d=r(c),f=n(225),p=r(f),h=n(234),m=r(h),v=n(244),g=r(v),E=n(245),y=r(E);t["default"]=(0,i.connect)(function(e){return{frame:e.frame}})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(201),s=r(i),u=n(204),c=r(u),d=n(203),f=n(186),p=l["default"].createClass({displayName:"ElementFrame",render:function(){var e=this.props.element;return void 0===e?l["default"].createElement("div",{className:"frame"}):l["default"].createElement("div",{className:"frame"},l["default"].createElement(s["default"],null),l["default"].createElement(c["default"],{element:e,active:!0}))},componentWillMount:function(){(0,d.unhighlight)(f.currentSelector),this.props.element&&(0,d.highlight)(this.props.element.matches,f.currentSelector)},componentWillReceiveProps:function(e){(0,d.unhighlight)(f.currentSelector),void 0!==e.element&&e.element!==this.props.element&&(0,d.highlight)(e.element.matches,f.currentSelector)},componentWillUnmount:function(){(0,d.unhighlight)(f.currentSelector)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=void 0===l?void 0:l.elements[a];return{element:o}})(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){return"M"+e.y+","+e.x+"C"+(e.y+e.parent.y)/2+","+e.x+" "+(e.y+e.parent.y)/2+","+e.parent.x+" "+e.parent.y+","+e.parent.x}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(161),u=n(202),c=n(184),d=n(187),f=n(203),p=n(194),h=n(186),m=i["default"].createClass({displayName:"Tree",getDefaultProps:function(){return{width:400,height:150}},componentWillMount:function(){var e=this.props,t=e.width,n=e.height;this.setState({tree:(0,u.tree)().size([n,t])})},_makeNodes:function(){var e=this.props,t=e.page,n=e.elementIndex,r=e.active,o=e.selectElement,s=this.state.tree,c=(0,d.simpleGrow)(t.elements),f=(0,u.hierarchy)(c);s(f);var p=f.descendants(),h=p.map(function(e,t){return i["default"].createElement(v,l({key:t,current:e.index===n,select:o,active:r},e))}),m=p.slice(1).map(function(e,t){return i["default"].createElement("path",{key:t,className:"link",d:a(e)})});return i["default"].createElement("g",{transform:"translate(50,25)"},i["default"].createElement("g",{className:"links"},m),i["default"].createElement("g",{className:"nodes"},h))},render:function(){if(void 0===this.props.page)return null;var e=this.props,t=e.width,n=e.height,r=e.active;return i["default"].createElement("div",{className:"tree"},i["default"].createElement("svg",{width:t+100,height:n+50,className:r?null:"not-allowed"},this._makeNodes()))}}),v=i["default"].createClass({displayName:"Node",handleClick:function(e){e.preventDefault(),this.props.select(this.props.data.index)},handleMouseover:function(e){(0,f.highlight)(this.props.data.matches,h.savedPreview)},handleMouseout:function(e){(0,f.unhighlight)(h.savedPreview)},render:function(){var e=this.props,t=e.current,n=e.data,r=e.active,a=e.children,o=e.x,s=e.y,u=n.hasRules,d=n.selector,f=n.spec,p=n.optional,h=!(u||a&&a.length),m=u?i["default"].createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):i["default"].createElement("circle",{r:"3"}),v=["node",t?"current":null,h?"empty":null],g=r?{onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout}:{};return i["default"].createElement("g",l({className:v.join(" "),transform:"translate("+s+","+o+")"},g),i["default"].createElement("text",{y:"-10"},(0,c.shortElement)(d,f,p)),m)},componentWillUnmount:function(){(0,f.unhighlight)(h.savedPreview)}});t["default"]=(0,s.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,l=t.elementIndex,o=r[a];return{page:o,active:"element"===n.name,elementIndex:l}},{selectElement:p.selectElement})(m)},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){Array.from(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){Array.from(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,n,r,a){function l(e){return function(n){n.target.classList.contains(t)&&(n.stopPropagation(),e(n))}}Array.from(e).forEach(function(e){e.classList.add(t)});var o=l(n),i=l(r),s=l(a);return document.body.addEventListener("mouseover",o,!1),document.body.addEventListener("mouseout",i,!1),document.body.addEventListener("click",s,!1),function(){Array.from(e).forEach(function(e){e.classList.remove(t)}),document.body.removeEventListener("mouseover",o,!1),document.body.removeEventListener("mouseout",i,!1),document.body.removeEventListener("click",s,!1)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.element,n=void 0===t?{}:t,r=e.active,a=void 0===r?!0:r,o=e.showElementWizard,s=e.showRuleWizard,u=e.showEditElementWizard,f=e.removeElement,p=0===n.index;return i["default"].createElement("div",{className:"info-box"},i["default"].createElement("div",{className:"info"},i["default"].createElement(c["default"],l({active:a},n))),i["default"].createElement("div",{className:"buttons"},i["default"].createElement(d.PosButton,{text:"Add Child",disabled:!a,click:function(){o()}}),i["default"].createElement(d.PosButton,{text:"Add Rule",disabled:!a,click:function(){s()}}),i["default"].createElement(d.NeutralButton,{text:"Edit",disabled:!a||p,click:function(){u()}}),i["default"].createElement(d.NegButton,{text:p?"Reset":"Delete",title:p?"Reset Page":"Delete Element",disabled:!a,click:function(){f()}})))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(161),u=n(205),c=r(u),d=n(182),f=n(194);a.propTypes={element:i["default"].PropTypes.object,active:i["default"].PropTypes.bool},t["default"]=(0,s.connect)(null,{showElementWizard:f.showElementWizard,removeElement:f.removeElement,showRuleWizard:f.showRuleWizard,showEditElementWizard:f.showEditElementWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.selector,n=e.rules,r=e.spec,a=e.optional,o=void 0===a?!1:a,i=e.active,u=void 0===i?!0:i;return s["default"].createElement("div",{className:"element"},s["default"].createElement("div",null,s["default"].createElement("span",{className:"big bold"},t,o?s["default"].createElement("span",{title:"optional"},"*"):null)),s["default"].createElement("div",null,(0,d.describeSpec)(r)),s["default"].createElement(l,{rules:n,active:u}))}function l(e){var t=e.rules,n=e.active;return t.length?s["default"].createElement("ul",{className:"rules"},t.map(function(e,t){return s["default"].createElement(c["default"],o({key:t,index:t,active:n},e))})):null}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),s=r(i),u=n(206),c=r(u),d=n(184);t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.attr,r=e.type,a=e.active,l=void 0===a?!0:a,i=e.index,u=e.removeRule,c=e.updateRule;return o["default"].createElement("li",{className:"rule"},o["default"].createElement("span",{className:"rule-name",title:"name"},t),o["default"].createElement("span",{className:"rule-attr",title:"attribute (or text)"},n),o["default"].createElement("span",{className:"rule-type",title:"data type"},r),l?o["default"].createElement(s.NeutralButton,{text:"Edit",click:function(){c(i)}}):null,l?o["default"].createElement(s.NegButton,{text:"Delete",click:function(){u(i)}}):null)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=r(l),i=n(161),s=n(182),u=n(194);a.propTypes={removeRule:o["default"].PropTypes.func.isRequired,updateRule:o["default"].PropTypes.func.isRequired,name:o["default"].PropTypes.string.isRequired,attr:o["default"].PropTypes.string.isRequired,type:o["default"].PropTypes.string.isRequired,active:o["default"].PropTypes.bool},t["default"]=(0,i.connect)(null,{removeRule:u.removeRule,updateRule:u.showEditRuleWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(201),s=r(i),u=n(208),c=r(u),d=n(209),f=n(194),p=n(203),h=n(186),m=l["default"].createClass({displayName:"ElementWizard",save:function(e){this.props.saveElement(e)},cancel:function(){this.props.cancel()},render:function(){var e=this.props.current,t={current:e},n=[d.ChooseElements,d.ChooseParts,d.ChooseType,d.ChooseValue,d.ChooseOptional,d.ConfirmElement];return l["default"].createElement("div",{className:"frame"},l["default"].createElement(s["default"],null),l["default"].createElement(c["default"],{steps:n,initialData:t,save:this.save,cancel:this.cancel}))},componentWillMount:function(){var e=this.props.current;(0,p.highlight)(e.matches,h.currentSelector)},componentWillUpdate:function(e,t){(0,p.unhighlight)(h.currentSelector);var n=this.props.current;(0,p.highlight)(n.matches,h.currentSelector)},componentWillUnmount:function(){(0,p.unhighlight)(h.currentSelector)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=void 0===l?void 0:l.elements[a];return{current:o}},{saveElement:f.saveElement,cancel:f.showElementFrame})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=l["default"].createClass({displayName:"Wizard",propTypes:{initialData:l["default"].PropTypes.object.isRequired,steps:l["default"].PropTypes.array.isRequired,extraData:l["default"].PropTypes.object,save:l["default"].PropTypes.func,cancel:l["default"].PropTypes.func},getInitialState:function(){var e=this.props,t=e.initialData,n=e.steps;return{position:0,data:[t].concat(Array(n.length))}},next:function(e){var t=this.state,n=t.position,r=t.data,a=this.props.steps,l=a.length-1,o=n===l?n:n+1;r[o]=e,this.setState({position:o,data:r})},previous:function(){var e=this.state,t=e.position;e.data;this.setState({position:t>0?t-1:0})},cancel:function(){this.props.cancel()},finish:function(e){this.props.save(e)},render:function(){var e=this.state,t=e.position,n=e.data,r=this.props,a=r.steps,o=r.extraData,s=r.children,u=a[t],c=0===t?void 0:this.previous,d=t===a.length-1?this.finish:this.next;return l["default"].createElement("div",{className:"wizard"},l["default"].createElement(i,{steps:a.length,position:t}),l["default"].createElement(u,{startData:n[t],endData:n[t+1],extraData:o,cancel:this.cancel,next:d,previous:c},s))}}),i=l["default"].createClass({displayName:"ProgressBar",render:function(){var e=this.props,t=e.steps,n=e.position,r=Array.from(Array(t)).map(function(e,t){var r=["marker",n>t?"complete":null,t==n?"active":null];return l["default"].createElement("div",{key:t,className:r.join(" ")})});return l["default"].createElement("div",{className:"progress-bar"},r)}});t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(210);Object.defineProperty(t,"ChooseElements",{enumerable:!0,get:function(){return r(a)["default"]}});var l=n(212);Object.defineProperty(t,"ChooseParts",{enumerable:!0,get:function(){return r(l)["default"]}});var o=n(213);Object.defineProperty(t,"ChooseType",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(215);Object.defineProperty(t,"ChooseValue",{enumerable:!0,get:function(){return r(i)["default"]}});var s=n(222);Object.defineProperty(t,"ChooseOptional",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(224);Object.defineProperty(t,"ConfirmElement",{enumerable:!0,get:function(){return r(u)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(185),u=n(203),c=n(186),d=l["default"].createClass({displayName:"ChooseElement",propTypes:{startData:l["default"].PropTypes.object,endData:l["default"].PropTypes.object,next:l["default"].PropTypes.func,previous:l["default"].PropTypes.func},getInitialState:function(){var e=[["*"]],t=this.props.startData,n=t.current;return(0,s.allSelect)(n.matches)&&e.push(["option"]),{checked:void 0,selectors:e,eleCount:0,error:!0}},events:{mouseover:function(e){e.target.classList.add(c.hoverClass)},mouseout:function(e){e.target.classList.remove(c.hoverClass)},click:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.path).filter(function(e){return e.classList&&e.classList.contains(c.potentialSelector)}).reverse().map(function(e){return(0,s.parts)(e)});this.setState({selectors:[["*"]].concat(t),checked:void 0,error:!0})}},setRadio:function(e){var t=this.state.selectors[e].join(""),n=this.props.startData,r=n.current;this.setState({checked:e,eleCount:(0,s.count)(r.matches,t),error:!1})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.checked,r=t.selectors,a=this.props,l=a.next,o=a.startData,i=r[n];void 0!==n&&void 0!==i?l({parts:i,current:o.current}):this.setState({error:!0})},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this,t=this.props,n=(t.next,t.previous,this.state),r=n.selectors,a=n.checked,o=n.eleCount,s=n.error;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement("h3",null,"Select Relevant Element(s)"),l["default"].createElement("div",{className:"choices"},r.map(function(t,n){return l["default"].createElement(f,{key:n,selector:t,index:n,checked:n===a,select:e.setRadio})})),l["default"].createElement("h5",null,"Count: ",o)),l["default"].createElement(i["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:s}))},componentWillMount:function(){var e=this.props.startData;this.addEvents(e)},componentWillReceiveNewProps:function(e){var t=e.startData;this.addEvents(t)},addEvents:function(e){var t=(0,s.select)(e.current.matches,null,null,".forager-holder");this.iUnhighlight&&(this.iUnhighlight(),delete this.iUnhighlight),this.events.boundClick=this.events.click.bind(this),this.iUnhighlight=(0,u.iHighlight)(t,c.potentialSelector,this.events.mouseover,this.events.mouseout,this.events.boundClick)},componentWillUpdate:function(e,t){(0,u.unhighlight)(c.queryCheck);var n=t.selectors[t.checked];if(void 0!==n){var r=n.join(""),a=e.startData,l=(0,s.select)(a.current.matches,r,null,".forager-holder");(0,u.highlight)(l,c.queryCheck)}},componentWillUnmount:function(){(0,u.unhighlight)(c.queryCheck),this.iUnhighlight()}}),f=l["default"].createClass({displayName:"SelectorRadio",setRadio:function(e){this.props.select(this.props.index)},render:function(){var e=this.props,t=e.selector,n=e.checked;return l["default"].createElement("label",{className:n?"selected":""},l["default"].createElement("input",{type:"radio",name:"css-selector",checked:n,onChange:this.setRadio}),t.join(""))}});t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.previous,n=e.next,r=e.nextText,a=void 0===r?"Next":r,l=e.cancel,s=e.error,u=void 0===s?!1:s;return o["default"].createElement("div",{className:"buttons"},o["default"].createElement(i.NegButton,{text:"Previous",click:t,disabled:void 0===t}),o["default"].createElement(i.PosButton,{text:a,type:"submit",click:n,disabled:u}),o["default"].createElement(i.NegButton,{text:"Cancel",click:l}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l),i=n(182)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){return e.reduce(function(e,t){return t.checked&&(e+=t.name),e},"")}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=r(l),i=n(211),s=r(i),u=n(185),c=n(203),d=n(186),f=o["default"].createClass({displayName:"ChooseParts",getInitialState:function(){return{parts:[],eleCount:0,error:!0}},nextHandler:function(e){e.preventDefault();var t=this.state.parts,n=this.props,r=n.next,l=n.startData,o=a(t);""!==o?r({selector:o,current:l.current}):this.setState({error:!0})},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},toggleRadio:function(e){var t=e.target.value,n=this.state.parts;n[t].checked=!n[t].checked;var r=a(n);this._setupHighlights(r);var l=this.props.startData;this.setState({parts:n,eleCount:""===r?0:(0,u.count)(l.current.matches,r),error:""===r})},componentWillMount:function(){var e=this.props.startData,t=e.parts,n=e.current,r=t.join("");this._setupHighlights(r),this.setState({parts:t.map(function(e){return{name:e,checked:!0}}),eleCount:(0,u.count)(n.matches,r),error:!1})},render:function(){var e=this,t=this.state,n=t.parts,r=(t.eleCount,t.error),a=n.map(function(t,n){var r=t.name,a=t.checked;return o["default"].createElement("label",{key:n,className:a?"selected":""},o["default"].createElement("input",{type:"checkbox",name:"selector-part",value:n,checked:a,onChange:e.toggleRadio}),r)});return o["default"].createElement("form",{className:"info-box"},o["default"].createElement("div",{className:"info"},o["default"].createElement("h3",null,"Select Relevant Part(s) of the CSS selector"),o["default"].createElement("div",{className:"choices"},a),o["default"].createElement("h5",null,"Count: ",this.state.eleCount)),o["default"].createElement(s["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:r}))},componentWillUnmount:function(){(0,c.unhighlight)(d.queryCheck)},_setupHighlights:function(e){if((0,c.unhighlight)(d.queryCheck),""!==e){var t=this.props.startData,n=(0,u.select)(t.current.matches,e,null,".forager-holder");(0,c.highlight)(n,d.queryCheck)}}});t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(214),u=r(s),c=n(185),d=n(203),f=n(186),p=l["default"].createClass({displayName:"ChooseType",getInitialState:function(){var e=this.props.endData,t=void 0===e?{}:e,n="single";return t.spec&&t.spec.type&&(n=t.spec.type),{type:n}},nextHandler:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,l={type:t};switch(t){case"single":l.index=0;break;case"all":l.name="";break;case"range":l.name="",l.low=0,l.high=void 0}a(Object.assign({},r,{spec:l}))},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},typeHandler:function(e){this.setState({type:e.target.value})},render:function(){var e=this.state.type,t=["single","all","range"];return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(u["default"],{types:t,current:e,setType:this.typeHandler})),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))},componentWillMount:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state.type,a={type:r};"single"===r?a.index=0:"range"===r&&(a.low=0,a.high=void 0);var l=(0,c.select)(t.matches,n,a,".forager-holder");(0,d.highlight)(l,f.queryCheck)},componentWillUpdate:function(e,t){(0,d.unhighlight)(f.queryCheck);var n=e.startData,r=n.current,a=n.selector,l=t.type,o={type:l};"single"===l?o.index=0:"range"===l&&(o.low=0,o.high=void 0);var i=(0,c.select)(r.matches,a,o,".forager-holder");(0,d.highlight)(i,f.queryCheck)},componentWillUnmount:function(){(0,d.unhighlight)(f.queryCheck)}});t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.types,n=e.current,r=e.setType,a=t.map(function(e){var t=n===e;return o["default"].createElement("label",{key:e,className:t?"selected":null},o["default"].createElement("input",{type:"radio",name:"type",value:e,checked:t,onChange:r}),e)});return o["default"].createElement("div",null,o["default"].createElement("h3",null,"Should the element target a single element or all?"),a)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.startData,n=t.spec;switch(n.type){case"all":return o["default"].createElement(s["default"],e);case"single":return o["default"].createElement(c["default"],e);case"range":return o["default"].createElement(f["default"],e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l),i=n(216),s=r(i),u=n(218),c=r(u),d=n(220),f=r(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(217),s=r(i),u=n(211),c=r(u),d=n(185),f=n(203),p=n(187),h=n(188),m=n(186),v=l["default"].createClass({displayName:"AllValueStep",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.spec&&t.spec.name&&(a=t.spec.name),{name:a,error:""===a}},nameHandler:function(e){var t=e.target.value;this.setState({name:t,error:""===t})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,l=a.startData,o=a.next,i=a.takenNames,s=a.showMessage;if(!i.every(function(e){return e!==n}))return void s('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!r){var u={type:"all",name:n};o(Object.assign({},l,{spec:u}))}},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.state,t=e.name,n=e.error;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(s["default"],{name:t,setName:this.nameHandler})),l["default"].createElement(c["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))},componentWillMount:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state.name,a=(0,d.select)(t.matches,n,{type:"all",name:r},".forager-holder");(0,f.highlight)(a,m.queryCheck)},componentWillUpdate:function(e,t){(0,f.unhighlight)(m.queryCheck);var n=e.startData,r=n.current,a=n.selector,l=t.name,o=(0,d.select)(r.matches,a,{type:"all",name:l},".forager-holder");(0,f.highlight)(o,m.queryCheck)},componentWillUnmount:function(){(0,f.unhighlight)(m.queryCheck)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=l.elements[a],i=null!==o.parent?o.parent:a;return{takenNames:(0,p.levelNames)(l.elements,i)}},{showMessage:h.showMessage})(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.setName;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"What should the array of elements be named?"),o["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:n}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(219),u=r(s),c=n(185),d=n(203),f=n(186),p=l["default"].createClass({displayName:"SingleValueStep",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.spec&&void 0!==t.spec.index&&(a=t.spec.index),{index:a,error:!1}},indexHandler:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,l=a.startData,o=a.next;if(!r){var i={type:"single",index:n};o(Object.assign({},l,{spec:i}))}},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.state,t=e.index,n=e.error,r=this.props.startData,a=r.current,o=r.selector,s=(0,c.count)(a.matches,o);return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(u["default"],{index:t,count:s,setIndex:this.indexHandler})),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))},componentWillMount:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state.index,a=(0,c.select)(t.matches,n,{type:"single",index:r},".forager-holder");(0,d.highlight)(a,f.queryCheck)},componentWillUpdate:function(e,t){(0,d.unhighlight)(f.queryCheck);var n=e.startData,r=n.current,a=n.selector,l=t.index,o=(0,c.select)(r.matches,a,{type:"single",index:l},".forager-holder");(0,d.highlight)(o,f.queryCheck)},componentWillUnmount:function(){(0,d.unhighlight)(f.queryCheck)}});t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.index,n=e.count,r=e.setIndex,a=Array.from(new Array(n)).map(function(e,t){return o["default"].createElement("option",{key:t,value:t},t)});return o["default"].createElement("div",null,o["default"].createElement("h3",null,"The element at which index should be selected?"),o["default"].createElement("select",{value:t,onChange:r},a))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(211),s=r(i),u=n(221),c=r(u),d=n(185),f=n(203),p=n(187),h=n(188),m=n(186),v=l["default"].createClass({displayName:"RangeValueStep",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a="",l=0,o="end";return r.spec?(r.spec.name&&(a=r.spec.name),void 0!==r.spec.low&&(l=r.spec.low),void 0!==r.spec.high&&(o=null===r.spec.high?"end":r.spec.high)):t.spec&&(t.spec.name&&(a=t.spec.name),void 0!==t.spec.low&&(l=t.spec.low),void 0!==t.spec.high&&(o=null===t.spec.high?"end":t.spec.high)),{name:a,low:l,high:o,error:""===a}},nameHandler:function(e){var t=e.target.value;this.setState({name:t,error:""===t})},lowHandler:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})},highHandler:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,l=t.error,o=this.props,i=o.startData,s=o.next,u=o.takenNames,c=o.showMessage;if(!u.every(function(e){return e!==n}))return void c('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!l){var d={type:"range",name:n,low:r,high:"end"===a?null:a};s(Object.assign({},i,{spec:d}))}},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,o=this.props.startData,i=o.current,u=o.selector,f=(0,d.count)(i.matches,u);return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(c["default"],{name:t,low:n,high:r,count:f,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),l["default"].createElement(s["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))},componentWillMount:function(){var e=this.props.startData,t=e.current,n=e.selector,r=this.state,a=r.name,l=r.low,o=this.state.high;"end"===o&&(o=null);var i=(0,d.select)(t.matches,n,{type:"range",name:a,low:l,high:o},".forager-holder");(0,f.highlight)(i,m.queryCheck)},componentWillUpdate:function(e,t){(0,f.unhighlight)(m.queryCheck);var n=e.startData,r=n.current,a=n.selector,l=t.name,o=t.low,i=t.high;"end"===i&&(i=null);var s=(0,d.select)(r.matches,a,{type:"range",name:l,low:o,high:i},".forager-holder");(0,f.highlight)(s,m.queryCheck)},componentWillUnmount:function(){(0,f.unhighlight)(m.queryCheck)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=l.elements[a],i=null!==o.parent?o.parent:a;return{takenNames:(0,p.levelNames)(l.elements,i)}},{showMessage:h.showMessage})(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.name,n=e.low,r=e.high,a=e.count,l=e.setName,i=e.setLow,s=e.setHigh,u=Array.from(new Array(a)).map(function(e,t){return o["default"].createElement("option",{key:t,value:t},t)}),c=o["default"].createElement("select",{value:n,onChange:i},u),d=Array.from(new Array(a)).map(function(e,t){return o["default"].createElement("option",{key:t,value:t},t)}),f=o["default"].createElement("select",{value:r,onChange:s},d.concat([o["default"].createElement("option",{key:"end",value:"end"},"end")]));return o["default"].createElement("div",null,o["default"].createElement("h3",null,"What should the array of elements be named?"),o["default"].createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:l}),o["default"].createElement("h3",null,"Which elements should be selected?"),c," - ",f)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(223),u=r(s),c=n(185),d=n(203),f=n(186),p=l["default"].createClass({displayName:"ChooseOptional",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),{optional:a}},nextHandler:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},toggleOptional:function(e){this.setState({optional:e.target.checked})},render:function(){var e=this.state.optional,t=this.props.startData;t.current,t.selector;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(u["default"],{optional:e,toggle:this.toggleOptional})),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler
}))},componentWillMount:function(){var e=this.props.startData,t=e.current,n=e.selector,r=e.spec,a=(0,c.select)(t.matches,n,r,".forager-holder");(0,d.highlight)(a,f.queryCheck)},componentWillUpdate:function(e,t){(0,d.unhighlight)(f.queryCheck);var n=e.startData,r=n.current,a=n.selector,l=n.spec,o=(0,c.select)(r.matches,a,l,".forager-holder");(0,d.highlight)(o,f.queryCheck)},componentWillUnmount:function(){(0,d.unhighlight)(f.queryCheck)}});t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.optional,n=e.toggle;return o["default"].createElement("div",null,o["default"].createElement("h3",null,"Is this element optional?"),o["default"].createElement("label",{className:t?"selected":null},o["default"].createElement("input",{type:"checkbox",checked:t,onChange:n}),t?"Yes":"No"))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(187),u=n(185),c=n(203),d=n(186),f=l["default"].createClass({displayName:"ConfirmElement",saveHandler:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=(n.current,n.selector),l=n.spec,o=n.optional,i=(0,s.createElement)(a,l,o);r(i)},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("h2",null,"Confirm Element"),l["default"].createElement("ul",null,l["default"].createElement("li",null,"Selector: ",t),l["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),l["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))},componentWillMount:function(){var e=this.props.startData,t=e.current,n=e.selector,r=e.spec,a=(0,u.select)(t.matches,n,r,".forager-holder");(0,c.highlight)(a,d.queryCheck)},componentWillUnmount:function(){(0,c.unhighlight)(d.queryCheck)}});t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(208),s=r(i),u=n(201),c=r(u),d=n(226),f=n(194),p=l["default"].createClass({displayName:"EditElementWizard",save:function(e){var t=this.props,n=t.current,r=t.updateElement,a=e.spec,l=e.optional;r(n.index,{spec:a,optional:l})},cancel:function(){this.props.cancel()},render:function(){var e=this.props,t=e.current,n=e.parent,r=t.selector,a=t.spec,o=t.optional,i={selector:r,spec:a,optional:o},u={parent:n,originalSpec:a},f=[d.ChooseType,d.ChooseValue,d.ChooseOptional,d.ConfirmUpdate];return l["default"].createElement("div",{className:"frame"},l["default"].createElement(c["default"],null),l["default"].createElement(s["default"],{steps:f,initialData:i,extraData:u,save:this.save,cancel:this.cancel}))}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=void 0===l?void 0:l.elements[a],i=void 0===o?void 0:l.elements[o.parent];return{current:o,parent:i}},{updateElement:f.updateElement,cancel:f.showElementFrame})(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(227);Object.defineProperty(t,"ChooseOptional",{enumerable:!0,get:function(){return r(a)["default"]}});var l=n(228);Object.defineProperty(t,"ChooseType",{enumerable:!0,get:function(){return r(l)["default"]}});var o=n(229);Object.defineProperty(t,"ChooseValue",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(233);Object.defineProperty(t,"ConfirmUpdate",{enumerable:!0,get:function(){return r(i)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(223),u=r(s),c=n(185),d=n(203),f=n(186),p=l["default"].createClass({displayName:"ChooseOptional",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),{optional:a}},nextHandler:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},toggleOptional:function(e){this.setState({optional:e.target.checked})},render:function(){var e=this.state.optional,t=this.props.startData;t.current,t.selector;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(u["default"],{optional:e,toggle:this.toggleOptional})),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))},componentWillMount:function(){var e=this.props,t=e.startData,n=e.extraData,r=(t.selector,t.spec),a=n.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,s=(0,c.select)(i,t.selector,r,".forager-holder");(0,d.highlight)(s,f.currentSelector)},componentWillUpdate:function(e,t){(0,d.unhighlight)(f.currentSelector);var n=this.props,r=n.startData,a=n.extraData,l=(r.selector,r.spec),o=a.parent,i=void 0===o?{}:o,s=i.matches,u=void 0===s?[document]:s,p=(0,c.select)(u,r.selector,l,".forager-holder");(0,d.highlight)(p,f.currentSelector)},componentWillUnmount:function(){(0,d.unhighlight)(f.currentSelector)}});t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(214),u=r(s),c=n(185),d=n(203),f=n(186),p=l["default"].createClass({displayName:"ChooseType",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a="single";return r.spec&&r.spec.type?a=r.spec.type:t.spec&&t.spec.type&&(a=t.spec.type),{type:a}},nextHandler:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,l=(r.spec,{type:t});a(Object.assign({},r,{spec:l}))},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},typeHandler:function(e){this.setState({type:e.target.value})},render:function(){var e=this.state.type,t=["single","all","range"];return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(u["default"],{types:t,current:e,setType:this.typeHandler})),l["default"].createElement(i["default"],{next:this.nextHandler,cancel:this.cancelHandler}))},componentWillMount:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,l=a.matches,o=void 0===l?[document]:l,i=this.state.type,s={type:i};if("single"===i){var u=t.spec&&"single"===t.spec.type;s.index=u?t.spec.index:0}else if("range"===i){var p=t.spec&&"range"===t.spec.type;s.low=p?t.spec.low:0,s.high=p?t.spec.high:void 0}var h=(0,c.select)(o,t.selector,s,".forager-holder");(0,d.highlight)(h,f.currentSelector)},componentWillUpdate:function(e,t){(0,d.unhighlight)(f.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,s=t.type,u={type:s};if("single"===s){var p=n.spec&&"single"===n.spec.type;u.index=p?n.spec.index:0}else if("range"===s){var h=n.spec&&"range"===n.spec.type;u.low=h?n.spec.low:0,u.high=h?n.spec.high:void 0}var m=(0,c.select)(i,n.selector,u,".forager-holder");(0,d.highlight)(m,f.currentSelector)},componentWillUnmount:function(){(0,d.unhighlight)(f.currentSelector)}});t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.startData,n=t.spec;switch(n.type){case"all":return o["default"].createElement(s["default"],e);case"single":return o["default"].createElement(c["default"],e);case"range":return o["default"].createElement(f["default"],e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l),i=n(230),s=r(i),u=n(231),c=r(u),d=n(232),f=r(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(211),s=r(i),u=n(217),c=r(u),d=n(185),f=n(203),p=n(187),h=n(188),m=n(186),v=l["default"].createClass({displayName:"AllValueStep",getInitialState:function(){var e=this.props,t=e.extraData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.originalSpec&&void 0!==t.originalSpec.name&&(a=t.originalSpec.name),{name:a,error:""===a}},nameHandler:function(e){var t=e.target.value;this.setState({name:t,error:""===t})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,l=a.startData,o=a.extraData,i=a.next,s=a.takenNames,u=a.showMessage,c=o.originalSpec.name;return n===c||s.every(function(e){return e!==n})?void(r||i(Object.assign({},l,{spec:{type:"all",name:n}}))):void u('"'+n+'" is a duplicate name and cannot be used.',5e3,-1)},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.state,t=e.name,n=e.error;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(c["default"],{name:t,setName:this.nameHandler})),l["default"].createElement(s["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))},componentWillMount:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,l=a.matches,o=void 0===l?[document]:l,i=this.state.name,s=(0,d.select)(o,t.selector,{type:"all",name:i},".forager-holder");(0,f.highlight)(s,m.currentSelector)},componentWillUpdate:function(e,t){(0,f.unhighlight)(m.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,s=t.name,u=(0,d.select)(i,n.selector,{type:"all",name:s},".forager-holder");(0,f.highlight)(u,m.currentSelector)},componentWillUnmount:function(){(0,f.unhighlight)(m.currentSelector)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=l.elements[a],i=null!==o.parent?o.parent:a;return{takenNames:(0,p.levelNames)(l.elements,i)}},{showMessage:h.showMessage})(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(219),u=r(s),c=n(185),d=n(203),f=n(186),p=l["default"].createClass({displayName:"SingleValueStep",getInitialState:function(){var e=this.props,t=e.extraData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.originalSpec&&void 0!==t.originalSpec.index&&(a=t.originalSpec.index),{index:a,error:!1}},indexHandler:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,l=a.startData,o=a.next;if(!r){var i={type:"single",index:n};o(Object.assign({},l,{spec:i}))}},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.state,t=e.index,n=e.error,r=this.props,a=r.startData,o=r.extraData,s=a.selector,d=o.parent,f=void 0===d?{}:d,p=f.matches,h=void 0===p?[document]:p,m=(0,c.count)(h,s);return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(u["default"],{index:t,count:m,setIndex:this.indexHandler})),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))},componentWillMount:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,l=a.matches,o=void 0===l?[document]:l,i=this.state.index,s=(0,c.select)(o,t.selector,{type:"single",index:i},".forager-holder");(0,d.highlight)(s,f.currentSelector)},componentWillUpdate:function(e,t){(0,d.unhighlight)(f.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,s=t.index,u=(0,c.select)(i,n.selector,{type:"single",index:s},".forager-holder");(0,d.highlight)(u,f.currentSelector)},componentWillUnmount:function(){(0,d.unhighlight)(f.currentSelector)}});t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(211),s=r(i),u=n(221),c=r(u),d=n(185),f=n(203),p=n(187),h=n(188),m=n(186),v=l["default"].createClass({displayName:"RangeValueStep",getInitialState:function(){var e=this.props,t=e.extraData,n=e.endData,r=void 0===n?{}:n,a="",l=0,o="end";if(r.spec){var i=r.spec;i.name&&(a=i.name),void 0!==i.low&&(l=i.low),void 0!==i.high&&(o=null===i.high?"end":i.high)}else if(t.originalSpec){var s=t.originalSpec;s.name&&(a=s.name),void 0!==s.low&&(l=s.low),void 0!==s.high&&(o=null===s.high?"end":s.high)}return{name:a,low:l,high:o,error:""===a}},nameHandler:function(e){var t=e.target.value;this.setState({name:t,error:""===t})},lowHandler:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})},highHandler:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,l=t.error,o=this.props,i=o.startData,s=o.extraData,u=o.next,c=o.takenNames,d=o.showMessage,f=s.originalSpec.name;if(n!==f&&!c.every(function(e){return e!==n}))return void d('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!l){var p={type:"range",name:n,low:r,high:"end"===a?null:a};u(Object.assign({},i,{spec:p}))}},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,o=this.props,i=o.startData,u=o.extraData,f=i.selector,p=u.parent,h=void 0===p?{}:p,m=h.matches,v=void 0===m?[document]:m,g=(0,d.count)(v,f);return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement(c["default"],{name:t,low:n,high:r,count:g,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),l["default"].createElement(s["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))},componentWillMount:function(){var e=this.props,t=e.startData,n=e.extraData,r=n.parent,a=void 0===r?{}:r,l=a.matches,o=void 0===l?[document]:l,i=this.state,s=i.name,u=i.low,c=this.state.high;"end"===c&&(c=null);var p=(0,d.select)(o,t.selector,{type:"range",name:s,low:u,high:c},".forager-holder");(0,f.highlight)(p,m.currentSelector)},componentWillUpdate:function(e,t){(0,f.unhighlight)(m.currentSelector);var n=e.startData,r=e.extraData,a=r.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,s=t.name,u=t.low,c=t.high;"end"===c&&(c=null);var p=(0,d.select)(i,n.selector,{type:"range",name:s,low:u,high:c},".forager-holder");(0,f.highlight)(p,m.currentSelector)},componentWillUnmount:function(){(0,f.unhighlight)(m.currentSelector)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=l.elements[a],i=null!==o.parent?o.parent:a;return{takenNames:(0,p.levelNames)(l.elements,i)}},{showMessage:h.showMessage})(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=(n(187),n(185)),u=n(203),c=n(186),d=l["default"].createClass({displayName:"ConfirmElement",saveHandler:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.spec,l=n.optional;r({optional:l,spec:a})},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("h2",null,"Confirm Updated Element"),l["default"].createElement("ul",null,l["default"].createElement("li",null,"Selector: ",t),l["default"].createElement("li",null,"Spec: ",JSON.stringify(n,null,"	")),l["default"].createElement("li",null,"Optional: ",r?"Yes":"No")),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))},componentWillMount:function(){var e=this.props,t=e.startData,n=e.extraData,r=(t.selector,t.spec),a=n.parent,l=void 0===a?{}:a,o=l.matches,i=void 0===o?[document]:o,d=(0,s.select)(i,t.selector,r,".forager-holder");(0,u.highlight)(d,c.currentSelector)},componentWillUnmount:function(){(0,u.unhighlight)(c.currentSelector)}});t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(208),s=r(i),u=n(204),c=r(u),d=n(235),f=n(243),p=r(f),h=n(194),m=n(203),v=n(186),g=l["default"].createClass({displayName:"RuleWizard",getInitialState:function(){return{index:0}},setIndex:function(e){this.setState({index:e})},save:function(e){this.props.saveRule(e)},cancel:function(){this.props.cancel()},render:function(){var e=this.props.current,t=this.state.index,n={},r={element:e.matches[t]},a=[d.ChooseAttribute,d.ChooseType,d.ChooseName,d.ConfirmRule];return l["default"].createElement("div",{className:"frame"},l["default"].createElement(c["default"],{active:!1,element:e}),l["default"].createElement(s["default"],{steps:a,initialData:n,extraData:r,save:this.save,cancel:this.cancel},l["default"].createElement(p["default"],{index:t,count:e.matches.length,setIndex:this.setIndex})))},componentWillMount:function(){var e=this.props.current;(0,m.highlight)(e.matches,v.currentSelector)},componentWillUpdate:function(e,t){(0,m.unhighlight)(v.currentSelector);var n=this.props.current;(0,m.highlight)(n.matches,v.currentSelector)},componentWillUnmount:function(){(0,m.unhighlight)(v.currentSelector)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r],o=void 0===l?void 0:l.elements[a];return{current:o}},{saveRule:h.saveRule,cancel:h.showElementFrame})(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(236);Object.defineProperty(t,"ChooseAttribute",{enumerable:!0,get:function(){return r(a)["default"]}});var l=n(238);Object.defineProperty(t,"ChooseName",{enumerable:!0,get:function(){return r(l)["default"]}});var o=n(239);Object.defineProperty(t,"ChooseType",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(241);Object.defineProperty(t,"ConfirmRule",{enumerable:!0,get:function(){return r(i)["default"]}});var s=n(242);Object.defineProperty(t,"ConfirmUpdateRule",{enumerable:!0,get:function(){return r(s)["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(237),u=n(184),c=l["default"].createClass({displayName:"ChooseAttribute",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.attribute?a=r.attribute:t.attr&&(a=t.attr),{attribute:a,error:""===a}},nextHandler:function(e){e.preventDefault();var t=this.state,n=t.attribute,r=t.error;if(!r){var a=this.props,l=a.startData,o=a.next;o(Object.assign({},l,{attribute:n}))}},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},attributeHandler:function(e){this.setState({attribute:e.target.value,error:!1})},render:function(){var e=this,t=this.state,n=t.attribute,r=(t.index,t.error),a=this.props.extraData,o=a.element,c=(0,s.attributes)(o).map(function(t,r){return l["default"].createElement("li",{key:r},l["default"].createElement("label",null,l["default"].createElement("input",{type:"radio",value:t.name,checked:t.name===n,onChange:e.attributeHandler}),t.name),l["default"].createElement("p",{className:"line"},(0,u.abbreviate)(t.value,40)))});return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement("h3",null,"Which attribute has the value that you want?"),l["default"].createElement("ul",null,c),this.props.children),l["default"].createElement(i["default"],{next:this.nextHandler,cancel:this.cancelHandler,error:r}))}});t["default"]=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripEvents=t.attributes=void 0;var r=n(186);t.attributes=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[r.currentSelector,r.potentialSelector,r.queryCheck,r.hoverClass,r.savedPreview],a=Array.from(e.attributes).reduce(function(e,r){var a=r.name,l=r.value;return t[a]?e:("class"===a&&(l=l.split(" ").filter(function(e){return!n.includes(e)&&""!==e}).join(" ")),""!==l&&e.push({name:a,value:l}),e)},[]),l=e.textContent.trim();return""!==l&&a.push({name:"text",value:l}),a},t.stripEvents=function(e){var t=Array.from(e.attributes);if(t.some(function(e){return e.name.startsWith("on")})){t.forEach(function(t){var n=t.name;n.startsWith("on")&&e.removeAttribute(n)});var n=e.cloneNode(!0);return e.parentNode.replaceChild(n,e),n}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(211),s=r(i),u=n(187),c=n(188),d=l["default"].createClass({displayName:"ChooseName",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.name?a=r.name:t.name&&(a=t.name),{name:a,error:""===a}},nextHandler:function(e){e.preventDefault();var t=this.state.name,n=this.props,r=n.takenNames,a=n.showMessage;if(!r.every(function(e){return e!==t}))return void a('"'+t+'" is a duplicate name and cannot be used.',5e3,-1);var l=this.props,o=l.startData,i=l.next;i(Object.assign({},o,{name:t}))},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},nameHandler:function(e){var t=e.target.value;this.setState({name:t,error:""===t})},render:function(){var e=this.state,t=e.name,n=e.error;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement("h3",null,"What should the rule be named?"),l["default"].createElement("input",{type:"text",placeholder:"e.g., name",value:t,onChange:this.nameHandler})),l["default"].createElement(s["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,l=n[r];return{takenNames:(0,u.levelNames)(l.elements,a)}},{showMessage:c.showMessage})(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=n(184),u=n(240),c=l["default"].createClass({displayName:"ChooseType",getInitialState:function(){var e=this.props,t=e.startData,n=e.endData,r=void 0===n?{}:n,a="string";return r.type?a=r.type:t.type&&(a=t.type),{type:a}},nextHandler:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{type:t}))},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},typeHandler:function(e){this.setState({type:e.target.value})},render:function(){var e=this,t=this.state.type,n=this.props.startData,r=n.attribute,a=this.props.extraData,o=a.element,c="text"===r?o.innerText:o.getAttribute(r),d=["string","int","float"].map(function(n,r){return l["default"].createElement("label",{key:r},l["default"].createElement("input",{type:"radio",value:n,checked:n===t,onChange:e.typeHandler}),n)}),f=void 0;switch(t){case"string":f=(0,s.abbreviate)(c,40);break;case"int":f=(0,u.integer)(c),null===f&&(f="No int detected");break;case"float":f=(0,u["float"])(c),null===f&&(f="No float detected")}return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("div",{className:"info"},l["default"].createElement("h3",null,"What type of value is this?"),d,l["default"].createElement("p",{className:"line"},f),this.props.children),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}});t["default"]=c},function(e,t){"use strict";function n(e){var t=/\d+/,n=e.match(t);return null!==n?parseInt(n[0],10):null}function r(e){var t=/\d+(\.\d+)?/,n=e.match(t);return null!==n?parseFloat(n[0]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.integer=n,t["float"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=l["default"].createClass({displayName:"ConfirmElement",saveHandler:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,l=n.attribute,o=n.type;r({name:a,type:o,attr:l})},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("h2",null,"Confirm Rule"),l["default"].createElement("ul",null,l["default"].createElement("li",null,"Name: ",t),l["default"].createElement("li",null,"Attribute: ",n),l["default"].createElement("li",null,"Type: ",r)),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}});t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(211),i=r(o),s=l["default"].createClass({displayName:"ConfirmElement",saveHandler:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,l=n.attribute,o=n.type;r({name:a,type:o,attr:l})},previousHandler:function(e){e.preventDefault(),this.props.previous()},cancelHandler:function(e){e.preventDefault(),this.props.cancel()},render:function(){var e=this.props.startData,t=e.name,n=e.attribute,r=e.type;return l["default"].createElement("form",{className:"info-box"},l["default"].createElement("h2",null,"Confirm Updated Rule"),l["default"].createElement("ul",null,l["default"].createElement("li",null,"Name: ",t),l["default"].createElement("li",null,"Attribute: ",n),l["default"].createElement("li",null,"Type: ",r)),l["default"].createElement(i["default"],{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}});t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.index,n=e.count,r=e.setIndex,a=(t+1)%n,l=(t-1+n)%n;return o["default"].createElement("div",null,o["default"].createElement(i.NeutralButton,{click:function(){r(l)},text:"<"}),t+1," / ",n,o["default"].createElement(i.NeutralButton,{click:function(){r(a)},text:">"}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(1),o=r(l),i=n(182)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(208),s=r(i),u=n(204),c=r(u),d=n(235),f=n(243),p=r(f),h=n(194),m=n(203),v=n(186),g=l["default"].createClass({displayName:"EditRuleWizard",getInitialState:function(){return{index:0}},setIndex:function(e){this.setState({index:e})},save:function(e){var t=this.props,n=t.updateRule,r=t.ruleIndex;n(r,e)},cancel:function(){this.props.cancel()},render:function(){var e=this.props,t=e.current,n=e.ruleIndex,r=t.rules[n];if(void 0===n||void 0===n)return null;var a=this.state.index,o=r.name,i=r.attr,u=r.type,f={current:t,index:0,name:o,attr:i,type:u},h={element:t.matches[a]},m=[d.ChooseAttribute,d.ChooseType,d.ChooseName,d.ConfirmUpdateRule];return l["default"].createElement("div",{className:"frame"},l["default"].createElement(c["default"],{active:!1,element:t}),l["default"].createElement(s["default"],{steps:m,initialData:f,extraData:h,save:this.save,cancel:this.cancel},l["default"].createElement(p["default"],{index:a,count:t.matches.length,setIndex:this.setIndex})))},componentWillMount:function(){var e=this.props.current;(0,m.highlight)(e.matches,v.currentSelector)},componentWillUpdate:function(e,t){(0,m.unhighlight)(v.currentSelector);var n=this.props.current;(0,m.highlight)(n.matches,v.currentSelector)},componentWillUnmount:function(){(0,m.unhighlight)(v.currentSelector)}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,l=t.elementIndex,o=r[a],i=void 0===o?void 0:o.elements[l];return{current:i,ruleIndex:n.index}},{updateRule:h.updateRule,cancel:h.showElementFrame})(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=r(a),o=n(161),i=n(182),s=n(201),u=r(s),c=n(187),d=n(246),f=n(194),p=l["default"].createClass({displayName:"Preview",closeHandler:function(e){e.preventDefault(),this.props.close()},logHandler:function(e){e.preventDefault(),console.log(JSON.stringify((0,d.preview)(this.props.tree)))},prettyLogHandler:function(e){e.preventDefault(),console.log(JSON.stringify((0,d.preview)(this.props.tree),null,2))},render:function(){return l["default"].createElement("div",{className:"frame"},l["default"].createElement(u["default"],null),l["default"].createElement("div",{className:"preview"},l["default"].createElement("pre",null,JSON.stringify((0,d.preview)(this.props.tree),null,2)),l["default"].createElement("div",{className:"buttons"},l["default"].createElement(i.PosButton,{text:"Log to Console",click:this.logHandler}),l["default"].createElement(i.PosButton,{text:"Pretty Log",click:this.prettyLogHandler}),l["default"].createElement(i.NegButton,{text:"Hide Preview",click:this.closeHandler}))))}});t["default"]=(0,o.connect)(function(e){var t=e.page,n=(e.preview,t.pages),r=t.pageIndex,a=n[r];return{tree:void 0===a?{}:(0,c.fullGrow)(a.elements)}},{close:f.showElementFrame})(p)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var a=n(240),l=function(e,t){var n=t.querySelectorAll(e.selector),a=e.spec.type;switch(a){case"single":var l=e.spec.index,i=n[l];if(!i)return;return o(e,i);case"all":var s=e.spec.name,u=Array.from(n).map(function(t){return o(e,t)}).filter(function(e){return void 0!==e});return r({},s,u);case"range":var c=e.spec,s=c.name,d=c.low,f=c.high,u=Array.from(n).slice(d,f||void 0).map(function(t){return o(e,t)}).filter(function(e){return void 0!==e});return r({},s,u)}},o=function(e,t){var n=s(e.rules,t);if(n){var r=i(e.children,t);if(r)return Object.assign({},n,r)}},i=function(e,t){var n={};return e.some(function(e){var r=l(e,t);if(!r&&!e.optional)return n=void 0,
!0;for(var a in r)n[a]=r[a];return!1}),n},s=function(e,t){var n={};return e.some(function(e){var r=void 0;if("text"===e.attr)r=t.textContent.replace(/\s+/g," ");else{var l=t.getAttribute(e.attr);if(null===l)return n=void 0,!0;r=l||""}switch(e.type){case"int":r=(0,a.integer)(r);break;case"float":r=(0,a["float"])(r)}return n[e.name]=r,!1}),n};t.preview=function(e){return void 0===e?"":l(e,document)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.upload=t.load=t.remove=t.rename=t.save=void 0;var r=(n(185),n(187));t.save=function(e){return new Promise(function(t,n){void 0===e&&n("No page to save");var a=(0,r.clean)(e);chrome.storage.local.get("sites",function(e){var n=window.location.hostname;e.sites[n]=e.sites[n]||{},e.sites[n][a.name]=a,chrome.storage.local.set({sites:e.sites}),t("Saved")})})},t.rename=function(e,t){return new Promise(function(n,r){chrome.storage.local.get("sites",function(a){var l=window.location.hostname,o=a.sites[l][t];void 0===o&&r("No page named "+t+" found"),o.name=e,a.sites[l][e]=o,delete a.sites[l][t],chrome.storage.local.set({sites:a.sites}),n('Renamed "'+t+'" to "'+e+'"')})})},t.remove=function(e){return new Promise(function(t,n){void 0===e&&n("No page to delete"),chrome.storage.local.get("sites",function(n){var r=window.location.hostname;delete n.sites[r][e],chrome.storage.local.set({sites:n.sites}),t("Deleted page "+e)})})},t.load=function(){return new Promise(function(e,t){chrome.storage.local.get("sites",function(t){var n=window.location.hostname,a=t.sites[n]||{},l=(0,r.preparePages)(a);e(l)})})},t.upload=function(e){return new Promise(function(t,n){void 0===e&&n("No page to upload"),chrome.runtime.sendMessage({type:"upload",data:{name:e.name,site:window.location.hostname,page:JSON.stringify((0,r.clean)(e))}},function(e){e.error?n("Failed to upload page"):t(e)})})},t.sync=function(){return new Promise(function(e,t){var n=window.location.hostname;chrome.runtime.sendMessage({type:"sync",site:n},function(a){a.error?t("Failed to sync pages"):!function(){var t=a.pages;chrome.storage.local.get("sites",function(a){var l=a.sites[n]||{},o=Object.assign({},l,t);a.sites[n]=o,chrome.storage.local.set({sites:a.sites});var i=(0,r.preparePages)(o);e(i)})}()})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=(0,l.createStore)(m,v,(0,l.applyMiddleware)(h["default"],f["default"],c["default"],o.messagesMiddleware));return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(167),o=n(188),i=n(249),s=r(i),u=n(253),c=r(u),d=n(254),f=r(d),p=n(255),h=r(p),m=(0,l.combineReducers)(Object.assign({},s["default"],{messages:o.messages})),v={show:!0,page:{pages:[void 0],pageIndex:0,elementIndex:0},frame:{name:"element",data:{}},messages:[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(250),l=r(a),o=n(251),i=r(o),s=n(252),u=r(s);t["default"]={frame:u["default"],show:l["default"],page:i["default"]}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments[1];switch(t.type){case o.CLOSE_FORAGER:return!1;case o.OPEN_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(196),o=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case i.SELECT_PAGE:var n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=e.pages.length)&&(n=0),Object.assign({},e,{pageIndex:n,elementIndex:0});case i.SET_PAGES:return Object.assign({},e,{pageIndex:0,pages:[void 0].concat(a(t.pages)),elementIndex:0});case i.ADD_PAGE:var r=e.pages,l=[].concat(a(r),[t.page]);return Object.assign({},e,{pages:l,pageIndex:l.length-1,elementIndex:0});case i.REMOVE_PAGE:var r=e.pages,o=e.pageIndex;return 0===o?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),a(r.slice(o+1))),pageIndex:0,elementIndex:0});case i.RENAME_PAGE:var r=e.pages,o=e.pageIndex;return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},r[o],{name:t.name})],a(r.slice(o+1)))});case i.SET_MATCHES:var r=e.pages,o=e.pageIndex,s=t.matches;return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},r[o],{elements:r[o].elements.map(function(e){if(null===e)return null;var t=s[e.index];return void 0!==t?Object.assign({},e,{matches:t}):e})})],a(r.slice(o+1)))});case i.SELECT_ELEMENT:var r=e.pages,o=e.pageIndex,u=e.elementIndex,c=r[o].elements.length,n=parseInt(t.index,10);return(isNaN(n)||0>n||n>=c)&&(n=0),Object.assign({},e,{elementIndex:n});case i.SAVE_ELEMENT:var r=e.pages,o=e.pageIndex,u=e.elementIndex,d=r[o],f=d.elements[u],p=d.elements.length,h=t.element;return h.parent=f.index,h.index=p,f.childIndices.push(p),Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},d,{elements:d.elements.concat([h])})],a(r.slice(o+1))),elementIndex:p});case i.UPDATE_ELEMENT:var r=e.pages,o=e.pageIndex,u=e.elementIndex,d=r[o],f=d.elements[u],n=t.index,m=t.newProps;return 0===n?e:Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},d,{elements:d.elements.map(function(e){return null===e?null:e.index!==n?e:Object.assign({},e,m)})})],a(r.slice(o+1)))});case i.REMOVE_ELEMENT:var r=e.pages,o=e.pageIndex,u=e.elementIndex,d=r[o],f=d.elements[u];if(0===u){var v=Object.assign({},d.elements[0],{childIndices:[]});return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},d,{elements:[v]})],a(r.slice(o+1))),elementIndex:0})}var g=[u],E=d.elements[u].parent||0,y=Object.assign({},d,{elements:d.elements.map(function(e){return null===e?null:(e.childIndices=e.childIndices.filter(function(e){return!g.includes(e)}),g.includes(e.index)?(g=g.concat(e.childIndices),null):e)})});return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[y],a(r.slice(o+1))),elementIndex:E});case i.SAVE_RULE:var r=e.pages,o=e.pageIndex,u=e.elementIndex,_=t.rule,d=r[o];return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},d,{elements:d.elements.map(function(e){return null!==e&&e.index===u&&(e.rules=e.rules.concat([_])),e})})],a(r.slice(o+1)))});case i.REMOVE_RULE:var r=e.pages,o=e.pageIndex,u=e.elementIndex,n=t.index,d=r[o];return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},d,{elements:d.elements.map(function(e){return null!==e&&e.index===u?Object.assign({},e,{rules:e.rules.filter(function(e,t){return t!==n})}):e})})],a(r.slice(o+1)))});case i.UPDATE_RULE:var r=e.pages,o=e.pageIndex,u=e.elementIndex,n=t.index,_=t.rule,d=r[o];return Object.assign({},e,{pages:[].concat(a(r.slice(0,o)),[Object.assign({},d,{elements:d.elements.map(function(e){return null!==e&&e.index===u&&(e.rules=e.rules.map(function(e,t){return t===n?_:e})),e})})],a(r.slice(o+1)))});case i.CLOSE_FORAGER:return Object.assign({},e,{pageIndex:0,elementIndex:0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l;var o=n(196),i=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=arguments.length<=0||void 0===arguments[0]?{name:"element"}:arguments[0],t=arguments[1];switch(t.type){case o.SELECT_PAGE:case o.ADD_PAGE:case o.SET_PAGES:case o.REMOVE_ELEMENT:case o.SAVE_ELEMENT:case o.UPDATE_ELEMENT:case o.SAVE_RULE:case o.REMOVE_RULE:case o.UPDATE_RULE:case o.CLOSE_FORAGER:case o.SHOW_ELEMENT_FRAME:return{name:"element"};case o.SHOW_ELEMENT_WIZARD:return{name:"element-wizard"};case o.SHOW_EDIT_ELEMENT_WIZARD:return{name:"edit-element-wizard"};case o.SHOW_RULE_WIZARD:return{name:"rule-wizard"};case o.SHOW_EDIT_RULE_WIZARD:return{name:"edit-rule-wizard",index:t.index};case o.SHOW_PREVIEW:return{name:"preview"};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var l=n(196),o=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(196),l=r(a),o=n(188),i=n(194),s=n(247),u=r(s);t["default"]=function(e){return function(t){return function(n){var r=e.getState(),a=r.page,s=a.pages,c=a.pageIndex,d=s[c];switch(n.type){case l.RENAME_PAGE:return u.rename(n.name,d.name).then(function(t){e.dispatch((0,o.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,1e3,-1))}),t(n);case l.REMOVE_PAGE:var f=s[c].name;return u.remove(f).then(function(t){e.dispatch((0,o.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,1e3,-1))}),t(n);case l.UPLOAD_PAGE:u.upload(s[c]).then(function(t){e.dispatch((0,o.showMessage)("Upload Successful",5e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,5e3,-1))});break;case l.SYNC_PAGES:u.sync().then(function(t){e.dispatch((0,i.setPages)(t)),e.dispatch((0,o.showMessage)("Pages synced",5e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)("Failed to sync pages",5e3,-1))});break;case l.ADD_PAGE:case l.SAVE_ELEMENT:case l.REMOVE_ELEMENT:case l.UPDATE_ELEMENT:case l.SAVE_RULE:case l.REMOVE_RULE:var p=t(n),h=e.getState(),m=h.page,v=m.pages,g=m.pageIndex;return u.save(v[g]).then(function(t){e.dispatch((0,o.showMessage)(t,1e3,1))})["catch"](function(t){e.dispatch((0,o.showMessage)(t,1e3,-1))}),p;default:return t(n)}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(185),l=n(196),o=r(l),i=n(194);t["default"]=function(e){return function(t){return function(n){var r=[o.SELECT_PAGE,o.SAVE_ELEMENT,o.UPDATE_ELEMENT,o.REFRESH_MATCHES];if(!r.includes(n.type))return t(n);switch(n.type){case o.SELECT_PAGE:case o.SAVE_ELEMENT:case o.UPDATE_ELEMENT:case o.REFRESH_MATCHES:var l=t(n),s=e.getState().page,u=s.pages,c=s.pageIndex,d=u[c];if(void 0===d)return;var f=d.elements.reduce(function(e,t){if(null===t)return e;var n=null===t.parent?[document]:e[t.parent];return e[t.index]=(0,a.select)(n,t.selector,t.spec,".forager-holder"),e},{});return e.dispatch((0,i.setMatches)(f)),l}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(196),l=r(a);n(194);t["default"]=function(e){return function(t){return function(n){var r=[l.SYNC_PAGES,l.REMOVE_PAGE,l.REMOVE_ELEMENT];if(!r.includes(n.type))return t(n);var a="Are you sure?";switch(n.type){case l.SYNC_PAGES:a="Syncing pages will overwrite duplicate pages. Continue?";break;case l.REMOVE_PAGE:var o=e.getState(),i=o.page,s=i.pages,u=i.pageIndex,c=s[u];a='Are you sure you want to delete the page "'+c.name+'"?';break;case l.REMOVE_ELEMENT:var d=e.getState(),i=d.page,s=i.pages,u=i.pageIndex,f=i.elementIndex,c=s[u],p=c.elements[f];a=0===p.index?"Are you sure you want to reset the page? This will delete all rules and child elements":'Are you sure you want to delete the element "'+p.selector+'"?'}window.confirm(a)&&t(n)}}}}]);