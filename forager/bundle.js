webpackJsonp([0],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=r(a),l=n(28),i=r(l),u=n(167),c=n(199),s=r(c),f=n(213),d=n(260),p=n(251),h=n(261),v=r(h);document.body.classList.add("foraging"),(0,p.stripEvents)(document.body),Array.from(document.querySelectorAll("*")).forEach(function(e){(0,p.stripEvents)(e)}),document.querySelector(".forager-holder")?(document.body.classList.add("foraging"),window.restore()):!function(){var e=document.createElement("div");e.classList.add("forager-holder"),document.body.appendChild(e);var t=(0,v.default)();(0,d.load)().then(function(n){t.dispatch((0,f.setPages)(n)),i.default.render(o.default.createElement(u.Provider,{store:t},o.default.createElement(s.default,null)),e)}),window.restore=function(){t.getState().show||t.dispatch((0,f.openForager)())}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=n(167),i=n(200),u=r(i),c=n(218),s=r(c),f=function(e){var t=e.show;return t?o.default.createElement("div",{id:"forager"},o.default.createElement(u.default,null),o.default.createElement(s.default,null)):null};t.default=(0,l.connect)(function(e){return{show:e.show}})(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return window.prompt("Page Name:\nCannot contain the following characters: < > : ' \\ / | ? * ")}function u(e){return e.filter(function(e){return void 0!==e}).map(function(e){return e.name})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(167),p=n(201),h=n(202),v=r(h),m=n(203),y=(n(204),n(206)),g=n(207),E=n(213),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addHandler=n.addHandler.bind(n),n.renameHandler=n.renameHandler.bind(n),n}return l(t,e),c(t,[{key:"addHandler",value:function(){var e=this.props,t=e.pages,n=e.showMessage,r=e.addPage,a=i();if((0,m.validName)(a,u(t))){var o=(0,y.createElement)("body");o=Object.assign({},o,{index:0,parent:null,matches:[document.body]}),r({name:a,elements:[o]})}else n('Cannot Use Name: "'+a+'"',5e3,-1)}},{key:"renameHandler",value:function(){var e=i(),t=this.props,n=t.pages,r=t.showMessage,a=t.renamePage;(0,m.validName)(e,u(n))?a(e):r('Cannot Use Name: "'+e+'"',5e3,-1)}},{key:"render",value:function(){var e=this.props,t=e.pages,n=e.currentIndex,r=e.selectPage,a=e.uploadPage,o=e.showPreview,l=e.refreshMatches,i=e.syncPages,u=e.removePage,c=e.closeForager,s=0!==n;return f.default.createElement("div",{className:"topbar"},f.default.createElement("div",{className:"controls"},f.default.createElement("div",{className:"page-controls"},"Page ",f.default.createElement("select",{value:n,onChange:function(e){r(parseInt(e.target.value,10))}},t.map(function(e,t){return f.default.createElement("option",{key:t,value:t},void 0===e?"":e.name)})),f.default.createElement(p.PosButton,{text:"Add Page",click:this.addHandler}),f.default.createElement(p.NeutralButton,{text:"Refresh",title:"Refresh the list of matched elements. This is useful if more content has been dynamically loaded",click:function(){l()},disabled:!s}),f.default.createElement(p.PosButton,{text:"Preview",click:function(){o()},disabled:!s}),f.default.createElement(p.NegButton,{text:"Delete",click:function(){u()},disabled:!s}),f.default.createElement(p.PosButton,{text:"Rename",click:this.renameHandler,disabled:!s}),f.default.createElement(p.PosButton,{text:"Upload",click:function(){a()},disabled:!s}),f.default.createElement(p.PosButton,{text:"Sync Pages",click:function(){i()}})),f.default.createElement("div",{className:"app-controls"},f.default.createElement(p.NegButton,{text:String.fromCharCode(215),classes:["transparent"],click:function(){document.body.classList.remove("foraging"),c()}}))),f.default.createElement(v.default,null))}}]),t}(f.default.Component);t.default=(0,d.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex;return{currentIndex:r,pages:n}},{addPage:E.addPage,selectPage:E.selectPage,closeForager:E.closeForager,showMessage:g.showMessage,syncPages:E.syncPages,refreshMatches:E.refreshMatches,renamePage:E.renamePage,removePage:E.removePage,uploadPage:E.uploadPage,showPreview:E.showPreview})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.NeutralButton=t.NegButton=t.PosButton=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),i=r(l),u=function(e){var t=e.classes,n=a(e,["classes"]);return i.default.createElement(f,o({},n,{classes:["pos"].concat(t)}))};t.PosButton=u;var c=function(e){var t=e.classes,n=a(e,["classes"]);return i.default.createElement(f,o({},n,{classes:["neg"].concat(t)}))};t.NegButton=c;var s=function(){},f=t.NeutralButton=function(e){var t=e.text,n=void 0===t?"":t,r=e.click,a=void 0===r?s:r,o=e.classes,l=void 0===o?[]:o,u=e.title,c=void 0===u?"":u,f=e.disabled,d=void 0!==f&&f,p=e.type,h=void 0===p?"button":p;return i.default.createElement("button",{className:l.join(" "),title:c,disabled:d,type:h,onClick:a},n)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.message,n=e.rating,r=["message"];return n<0?r.push("neg"):n>0&&r.push("pos"),l.default.createElement("div",{className:r.join(" ")},t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=r(o),i=n(167),u=function(e){var t=e.messages;return l.default.createElement("div",{className:"message-board"},t.map(function(e){return l.default.createElement(a,{key:e.id,message:e.message,rating:e.rating})}))};t.default=(0,i.connect)(function(e){return{messages:e.messages}})(u)},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.type){case"single":return r(e);case"all":return a(e);case"range":return o(e);default:return""}}function r(e){var t=e.index,n=void 0===t?0:t;return"captures element at index "+n}function a(e){var t=e.name,n=void 0===t?"":t;return'captures all elements, groups them as "'+n+'"'}function o(e){var t=e.name,n=void 0===t?"":t,r=e.low,a=e.high,o=null===a?"end":a;return"captures elements "+r+" to "+o+', groups them as "'+n+'"'}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=i(e,10),a="";if(!t)return r;switch(t.type){case"single":a=r+"["+t.index+"]";break;case"all":a="["+r+"]";break;case"range":a=r+"["+t.low+":"+(t.high||"end")+"]"}return n&&(a+="*"),a}Object.defineProperty(t,"__esModule",{value:!0}),t.describeSpec=n,t.shortElement=l;var i=(t.validName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===e||""===e)return!1;var n=/[<>:'\/\\\|\?\*]/;return null===e.match(n)&&t.every(function(t){return t!==e})},t.abbreviate=function(e,t){if(e.length<=t)return e;if(t<=3)return"...";var n=void 0,r=void 0,a=t-3,o=a/2;a%2===0?(n=o,r=o):(n=Math.ceil(o),r=Math.floor(o));var l=e.slice(0,n),i=0===r?"":e.slice(-r);return l+"..."+i})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=e.charCodeAt(0);return!(t<65||t>90&&t<97||t>122)}Object.defineProperty(t,"__esModule",{value:!0}),t.allSelect=t.parts=t.count=t.select=t.protect=void 0;var o=n(205),l=t.protect=function(e){var t=document.querySelectorAll(e);Array.from(t).forEach(function(e){e.classList.add("no-select"),Array.from(e.querySelectorAll("*")).forEach(function(e){e.classList.add("no-select")})})};t.select=function(e,t,n,a){var o=(t||"*")+":not(.no-select)";n||(n={type:"all"}),void 0!==a&&""!==a&&l(a);var i=Array.from(e).reduce(function(e,t){var r=t.querySelectorAll(o),a=n,l=a.type,i=[];switch(l){case"single":var u=n.index;i=void 0!==r[u]?[r[u]]:[];break;case"all":i=Array.from(r);break;case"range":var c=n.low,s=n.high||void 0;i=Array.from(r).slice(c,s)}return e.concat(i)},[]);return[].concat(r(new Set(i)))},t.count=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"all"},r=(t||"*")+":not(.no-select)";return Array.from(e).reduce(function(e,t){var a=t.querySelectorAll(r),o=0;switch(n.type){case"single":var l=n.index;o=void 0!==a[l]?1:0;break;case"all":o=a.length;break;case"range":var i=n.low,u=n.high;o=Array.from(a).slice(i,u||void 0).length}return e>o?e:o},0)},t.parts=function(e){var t=[o.currentSelector,o.potentialSelector,o.queryCheck,o.hoverClass,o.savedPreview],n=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*/,r=function(e){return!t.some(function(t){return t===e})&&n.test(e)},l=[],i=e.tagName.toLowerCase();return l.push(i),""!==e.id&&a(e.id)&&l.push("#"+e.id),Array.from(e.classList).forEach(function(e){r(e)&&l.push("."+e)}),l},t.allSelect=function(e){return e.every(function(e){return"SELECT"===e.tagName})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.currentSelector="current-element",t.potentialSelector="selectable-element",t.queryCheck="query-check",t.hoverClass="forager-highlight",t.savedPreview="saved-preview"},function(e,t){"use strict";function n(e,t){function n(t){return null===t?null:void 0!==t.spec.name||null===t.parent?t.index:n(e[t.parent])}var a=n(e[t]);return r(e,a,!0)}function r(e,t,n){var a=e[t],o=[];return void 0===a?[]:(n||void 0===a.spec.name?(a.rules.forEach(function(e){o.push(e.name)}),a.childIndices.forEach(function(t){var n=e[t];o=o.concat(r(e,n.index,!1))})):o.push(a.spec.name),o)}Object.defineProperty(t,"__esModule",{value:!0}),t.levelNames=n;var a=(t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"single",index:0},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{selector:e,spec:t,childIndices:[],rules:[],optional:n,matches:[]}},t.preparePages=function(e){var t=Object.keys(e).map(function(t){return e[t]}).filter(function(e){return null!==e}).map(function(e){return{name:e.name,elements:a(e.element)}});return t},t.flatten=function(e){if(void 0===e)return[];for(var t=0,n=[Object.assign({},e,{parent:null,childIndices:[]})];t<n.length;){var r=n[t];r.index=t,null!==r.parent&&n[r.parent].childIndices.push(t),r.children.forEach(function(e){n.push(Object.assign({},e,{parent:t,childIndices:[]}))}),delete r.children,t+=1}return n}),o=(t.clean=function(e){return{name:e.name,element:o(e.elements)}},t.fullGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),children:[],rules:e.rules.map(function(e){return Object.assign({},e)}),optional:e.optional,parent:e.parent}});return t.forEach(function(e){if(null!==e){var n=e.parent;delete e.parent,null!==n&&t[n].children.push(e)}}),t[0]});t.simpleGrow=function(e){var t=e.map(function(e){return null===e?null:{selector:e.selector,spec:Object.assign({},e.spec),hasRules:e.rules.length>0,children:[],index:e.index,parent:e.parent,matches:e.matches,optional:e.optional}});return t.forEach(function(e){null!==e&&null!==e.parent&&t[e.parent].children.push(e)}),t.forEach(function(e){null!==e&&(e.hasChildren=e.children.length>0)}),t[0]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(208);Object.defineProperty(t,"ADD_MESSAGE",{enumerable:!0,get:function(){return a.ADD_MESSAGE}}),Object.defineProperty(t,"REMOVE_MESSAGE",{enumerable:!0,get:function(){return a.REMOVE_MESSAGE}});var o=n(209);Object.defineProperty(t,"showMessage",{enumerable:!0,get:function(){return o.showMessage}});var l=n(210);Object.defineProperty(t,"messagesMiddleware",{enumerable:!0,get:function(){return r(l).default}});var i=n(212);Object.defineProperty(t,"messages",{enumerable:!0,get:function(){return r(i).default}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SHOW_MESSAGE="@@erm/SHOW_MESSAGE",t.ADD_MESSAGE="@@erm/ADD_MESSAGE",t.REMOVE_MESSAGE="@@erm/REMOVE_MESSAGE"},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:l.SHOW_MESSAGE,message:e,lifetime:t,rating:n}}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return{type:l.ADD_MESSAGE,message:e,id:t,rating:n}}function o(e){return{type:l.REMOVE_MESSAGE,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showMessage=r,t.addMessage=a,t.removeMessage=o;var l=n(208)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(208),a=n(209),o=n(211);t.default=function(e){return function(t){return function(n){if(n.type!==r.SHOW_MESSAGE)return t(n);var l=n.message,i=n.lifetime,u=n.rating,c=(0,o.pseudoRandomID)();return setTimeout(function(){e.dispatch((0,a.removeMessage)(c))},i),e.dispatch((0,a.addMessage)(l,c,u))}}}},function(e,t){"use strict";function n(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length;return Array.from(Array(10)).map(function(){return e[Math.floor(Math.random()*t)]}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.pseudoRandomID=n},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case a.ADD_MESSAGE:return e.concat([{id:t.id,message:t.message,rating:t.rating}]);case a.REMOVE_MESSAGE:return e.filter(function(e){return e.id!==t.id});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(208)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(214);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(216);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var o=n(217);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.openForager=t.closeForager=void 0;var a=n(215),o=r(a);t.closeForager=function(){return{type:o.CLOSE_FORAGER}},t.openForager=function(){return{type:o.OPEN_FORAGER}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SELECT_PAGE="SELECT_PAGE",t.ADD_PAGE="ADD_PAGE",t.REMOVE_PAGE="REMOVE_PAGE",t.RENAME_PAGE="RENAME_PAGE",t.UPLOAD_PAGE="UPLOAD_PAGE",t.SYNC_PAGES="SYNC_PAGES",t.SET_PAGES="SET_PAGES",t.SET_MATCHES="SET_MATCHES",t.REFRESH_MATCHES="REFRESH_MATCHES",t.SELECT_ELEMENT="SELECT_ELEMENT",t.SAVE_ELEMENT="SAVE_ELEMENT",t.REMOVE_ELEMENT="REMOVE_ELEMENT",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.SAVE_RULE="SAVE_RULE",t.REMOVE_RULE="REMOVE_RULE",t.UPDATE_RULE="UPDATE_RULE",t.SHOW_ELEMENT_FRAME="SHOW_ELEMENT_FRAME",t.SHOW_ELEMENT_WIZARD="SHOW_ELEMENT_WIZARD",t.SHOW_EDIT_ELEMENT_WIZARD="SHOW_EDIT_ELEMENT_WIZARD",t.SHOW_RULE_WIZARD="SHOW_RULE_WIZARD",t.SHOW_EDIT_RULE_WIZARD="SHOW_EDIT_RULE_WIZARD",t.SHOW_PREVIEW="SHOW_PREVIEW",t.CLOSE_FORAGER="CLOSE_FORAGER",t.OPEN_FORAGER="OPEN_FORAGER"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.showPreview=t.showEditRuleWizard=t.showRuleWizard=t.showEditElementWizard=t.showElementWizard=t.showElementFrame=void 0;var a=n(215),o=r(a);t.showElementFrame=function(){return{type:o.SHOW_ELEMENT_FRAME}},t.showElementWizard=function(){return{type:o.SHOW_ELEMENT_WIZARD}},t.showEditElementWizard=function(){return{type:o.SHOW_EDIT_ELEMENT_WIZARD}},t.showRuleWizard=function(){return{type:o.SHOW_RULE_WIZARD}},t.showEditRuleWizard=function(e){return{type:o.SHOW_EDIT_RULE_WIZARD,index:e}},t.showPreview=function(){return{type:o.SHOW_PREVIEW}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRule=t.removeRule=t.saveRule=t.removeElement=t.updateElement=t.saveElement=t.selectElement=t.refreshMatches=t.setMatches=t.setPages=t.syncPages=t.uploadPage=t.renamePage=t.removePage=t.addPage=t.selectPage=void 0;var a=n(215),o=r(a);t.selectPage=function(e){return{type:o.SELECT_PAGE,index:e}},t.addPage=function(e){return{type:o.ADD_PAGE,page:e}},t.removePage=function(){return{type:o.REMOVE_PAGE}},t.renamePage=function(e){return{type:o.RENAME_PAGE,name:e}},t.uploadPage=function(){return{type:o.UPLOAD_PAGE}},t.syncPages=function(){return{type:o.SYNC_PAGES}},t.setPages=function(e){return{type:o.SET_PAGES,pages:e}},t.setMatches=function(e){return{type:o.SET_MATCHES,matches:e}},t.refreshMatches=function(){return{type:o.REFRESH_MATCHES}},t.selectElement=function(e){return{type:o.SELECT_ELEMENT,index:e}},t.saveElement=function(e){return{type:o.SAVE_ELEMENT,element:e}},t.updateElement=function(e,t){return{type:o.UPDATE_ELEMENT,index:e,newProps:t}},t.removeElement=function(){return{type:o.REMOVE_ELEMENT}},t.saveRule=function(e){return{type:o.SAVE_RULE,rule:e}},t.removeRule=function(e){return{type:o.REMOVE_RULE,index:e}},t.updateRule=function(e,t){return{type:o.UPDATE_RULE,index:e,rule:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=n(167),i=n(219),u=r(i),c=n(228),s=r(c),f=n(247),d=r(f),p=n(248),h=r(p),v=n(257),m=r(v),y=n(258),g=r(y),E=function(e){var t=e.frame;switch(t.name){case"element":return o.default.createElement(u.default,null);case"element-wizard":return o.default.createElement(s.default,null);case"edit-element-wizard":return o.default.createElement(d.default,null);case"rule-wizard":return o.default.createElement(h.default,null);case"edit-rule-wizard":return o.default.createElement(m.default,null);case"preview":return o.default.createElement(g.default,null);default:return null}};t.default=(0,l.connect)(function(e){return{frame:e.frame}})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(167),f=n(220),d=r(f),p=n(224),h=r(p),v=n(223),m=n(227),y=n(205),g=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.element;return void 0===e?c.default.createElement("div",{className:"frame"}):c.default.createElement("div",{className:"frame"},c.default.createElement(d.default,null),c.default.createElement(h.default,{element:e,active:!0}))}},{key:"componentWillMount",value:function(){(0,v.unhighlight)(y.currentSelector),this.props.element&&(0,v.highlight)(this.props.element.matches,y.currentSelector)}},{key:"componentWillReceiveProps",value:function(e){(0,v.unhighlight)(y.currentSelector),void 0!==e.element&&e.element!==this.props.element&&(0,v.highlight)(e.element.matches,y.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,v.unhighlight)(y.currentSelector)}}]),t}(c.default.Component);t.default=(0,s.connect)(function(e){var t=e.page;return{element:(0,m.currentElement)(t)}})(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=(0,h.path)(),n=e.source,r=e.target;return t.moveTo(r.y,r.x),t.bezierCurveTo((r.y+n.y)/2,r.x,(r.y+n.y)/2,n.x,n.y,n.x),t.toString()}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(167),p=n(221),h=n(222),v=n(203),m=n(206),y=n(223),g=n(213),E=n(205),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._makeNodes=n._makeNodes.bind(n),n}return l(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.width,n=e.height;this.setState({tree:(0,p.tree)().size([n,t])})}},{key:"_makeNodes",value:function(){var e=this.props,t=e.page,n=e.elementIndex,r=e.active,a=e.selectElement,o=this.state.tree,l=(0,m.simpleGrow)(t.elements),c=(0,p.hierarchy)(l);o(c);var s=c.descendants().map(function(e,t){return f.default.createElement(_,u({key:t,current:e.data.index===n,select:a,active:r},e))}),d=c.links().map(function(e,t){return f.default.createElement("path",{key:t,className:"link",d:i(e)})});return f.default.createElement("g",{transform:"translate(50,25)"},f.default.createElement("g",{className:"links"},d),f.default.createElement("g",{className:"nodes"},s))}},{key:"render",value:function(){if(void 0===this.props.page)return null;var e=this.props,t=e.width,n=e.height,r=e.active;return f.default.createElement("div",{className:"tree"},f.default.createElement("svg",{width:t+100,height:n+50,className:r?null:"not-allowed"},this._makeNodes()))}}]),t}(f.default.Component);b.defaultProps={width:400,height:150};var _=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.handleMouseover=n.handleMouseover.bind(n),n.handleMouseout=n.handleMouseout.bind(n),n}return l(t,e),c(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.select(this.props.data.index)}},{key:"handleMouseover",value:function(){(0,y.highlight)(this.props.data.matches,E.savedPreview)}},{key:"handleMouseout",value:function(){(0,y.unhighlight)(E.savedPreview)}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.data,r=e.active,a=e.children,o=e.x,l=e.y,i=n.hasRules,c=n.selector,s=n.spec,d=n.optional,p=!(i||a&&a.length),h=i?f.default.createElement("rect",{width:"6",height:"6",x:"-3",y:"-3"}):f.default.createElement("circle",{r:"3"}),m=["node",t?"current":null,p?"empty":null],y=r?{onClick:this.handleClick,onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout}:{};return f.default.createElement("g",u({className:m.join(" "),transform:"translate("+l+","+o+")"},y),f.default.createElement("text",{y:"-10"},(0,v.shortElement)(c,s,d)),h)}},{key:"componentWillUnmount",value:function(){(0,y.unhighlight)(E.savedPreview)}}]),t}(f.default.Component);t.default=(0,d.connect)(function(e){var t=e.page,n=e.frame,r=t.pages,a=t.pageIndex,o=t.elementIndex,l=r[a];return{page:l,active:"element"===n.name,elementIndex:o}},{selectElement:g.selectElement})(b)},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.highlight=function(e,t){Array.from(e).forEach(function(e){e.classList.add(t)})},t.unhighlight=function(e){Array.from(document.getElementsByClassName(e)).forEach(function(t){t.classList.remove(e)})},t.iHighlight=function(e,t,n,r,a){function o(e){return function(n){n.target.classList.contains(t)&&(n.stopPropagation(),e(n))}}Array.from(e).forEach(function(e){e.classList.add(t)});var l=o(n),i=o(r),u=o(a);return document.body.addEventListener("mouseover",l,!1),document.body.addEventListener("mouseout",i,!1),document.body.addEventListener("click",u,!1),function(){Array.from(e).forEach(function(e){e.classList.remove(t)}),document.body.removeEventListener("mouseover",l,!1),document.body.removeEventListener("mouseout",i,!1),document.body.removeEventListener("click",u,!1)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.element,n=void 0===t?{}:t,r=e.active,a=void 0===r||r,l=e.showElementWizard,u=e.showRuleWizard,c=e.showEditElementWizard,d=e.removeElement,p=0===n.index;return i.default.createElement("div",{className:"info-box"},i.default.createElement("div",{className:"info"},i.default.createElement(s.default,o({active:a},n))),i.default.createElement("div",{className:"buttons"},i.default.createElement(f.PosButton,{text:"Add Child",disabled:!a,click:function(){l()}}),i.default.createElement(f.PosButton,{text:"Add Rule",disabled:!a,click:function(){u()}}),i.default.createElement(f.NeutralButton,{text:"Edit",disabled:!a||p,click:function(){c()}}),i.default.createElement(f.NegButton,{text:p?"Reset":"Delete",title:p?"Reset Page":"Delete Element",disabled:!a,click:function(){d()}})))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),i=r(l),u=n(167),c=n(225),s=r(c),f=n(201),d=n(213);t.default=(0,u.connect)(null,{showElementWizard:d.showElementWizard,removeElement:d.removeElement,showRuleWizard:d.showRuleWizard,showEditElementWizard:d.showEditElementWizard})(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.selector,n=e.rules,r=e.spec,a=e.optional,o=void 0!==a&&a,l=e.active,u=void 0===l||l;return i.default.createElement("div",{className:"element"},i.default.createElement("div",null,i.default.createElement("span",{className:"big bold"},t,o?i.default.createElement("span",{title:"optional"},"*"):null)),i.default.createElement("div",null,(0,s.describeSpec)(r)),i.default.createElement(f,{rules:n,active:u}))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),i=r(l),u=n(226),c=r(u),s=n(203),f=function(e){var t=e.rules,n=e.active;return t.length?i.default.createElement("ul",{className:"rules"},t.map(function(e,t){return i.default.createElement(c.default,o({key:t,index:t,active:n},e))})):null};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.name,n=e.attr,r=e.type,a=e.active,o=void 0===a||a,i=e.index,c=e.removeRule,s=e.updateRule;return l.default.createElement("li",{className:"rule"},l.default.createElement("span",{className:"rule-name",title:"name"},t),l.default.createElement("span",{className:"rule-attr",title:"attribute (or text)"},n),l.default.createElement("span",{className:"rule-type",title:"data type"},r),o?l.default.createElement(u.NeutralButton,{text:"Edit",click:function(){s(i)}}):null,o?l.default.createElement(u.NegButton,{text:"Delete",click:function(){c(i)}}):null)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=r(o),i=n(167),u=n(201),c=n(213);t.default=(0,i.connect)(null,{removeRule:c.removeRule,updateRule:c.showEditRuleWizard})(a)},function(e,t,n){"use strict";function r(e){var t=e.pages,n=e.pageIndex,r=e.elementIndex,a=t[n];return void 0===a?void 0:a.elements[r]}function a(e){var t=e.pages,n=e.pageIndex,r=e.elementIndex,a=t[n],o=void 0===a?void 0:a.elements[r];return void 0===o?void 0:a.elements[o.parent]}function o(e){var t=r(e),n=null!==t.parent?t.parent:e.elementIndex,a=e.pages[e.pageIndex].elements;return(0,l.levelNames)(a,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.currentElement=r,t.currentParent=a,t.takenNames=o;var l=n(206)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(167),f=n(220),d=r(f),p=n(229),h=r(p),v=n(230),m=n(213),y=n(223),g=n(227),E=n(205),b=[v.Elements,v.Parts,v.CreateType,v.CreateValue,v.CreateOptional,v.ConfirmElement],_=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"save",value:function(e){this.props.saveElement(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current;return c.default.createElement("div",{className:"frame"},c.default.createElement(d.default,null),c.default.createElement(h.default,{steps:b,initialData:{},staticData:{parent:e},save:this.save,cancel:this.cancel}))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,y.highlight)(e.matches,E.currentSelector)}},{key:"componentWillUpdate",value:function(e){(0,y.unhighlight)(E.currentSelector);var t=e.current;(0,y.highlight)(t.matches,E.currentSelector)}},{key:"componentWillUnmount",value:function(){
(0,y.unhighlight)(E.currentSelector)}}]),t}(c.default.Component);t.default=(0,s.connect)(function(e){var t=e.page;return{current:(0,g.currentElement)(t)}},{saveElement:m.saveElement,cancel:m.showElementFrame})(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={position:0,data:[e.initialData].concat(Array(e.steps.length))},n.next=n.next.bind(n),n.previous=n.previous.bind(n),n.cancel=n.cancel.bind(n),n.finish=n.finish.bind(n),n}return l(t,e),i(t,[{key:"next",value:function(e){var t=this.state,n=t.position,r=t.data,a=this.props.steps,o=a.length-1,l=n===o?n:n+1;r[l]=e,this.setState({position:l,data:r})}},{key:"previous",value:function(){var e=this.state,t=e.position;e.data;this.setState({position:t>0?t-1:0})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"finish",value:function(e){this.props.save(e)}},{key:"render",value:function(){var e=this.state,t=e.position,n=e.data,r=this.props,a=r.steps,o=r.staticData,l=(r.children,a[t]),i=0===t?void 0:this.previous,u=t===a.length-1?this.finish:this.next;return c.default.createElement("div",{className:"wizard"},c.default.createElement(f,{steps:a.length,position:t}),c.default.createElement(l,{startData:n[t],endData:n[t+1],staticData:o,cancel:this.cancel,next:u,previous:i}))}}]),t}(c.default.Component);s.propTypes={initialData:c.default.PropTypes.object.isRequired,steps:c.default.PropTypes.array.isRequired,staticData:c.default.PropTypes.object,save:c.default.PropTypes.func,cancel:c.default.PropTypes.func};var f=function(e){var t=e.steps,n=e.position;return c.default.createElement("div",{className:"progress-bar"},Array.from(Array(t)).map(function(e,t){return c.default.createElement("div",{key:t,className:["marker",t<n?"complete":null,t==n?"active":null].filter(function(e){return null!==e}).join(" ").trim()})}))};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(231);Object.defineProperty(t,"Elements",{enumerable:!0,get:function(){return r(a).default}});var o=n(233);Object.defineProperty(t,"Parts",{enumerable:!0,get:function(){return r(o).default}});var l=n(234);Object.defineProperty(t,"CreateType",{enumerable:!0,get:function(){return l.CreateType}}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return l.EditType}});var i=n(236);Object.defineProperty(t,"CreateValue",{enumerable:!0,get:function(){return i.CreateValue}}),Object.defineProperty(t,"EditValue",{enumerable:!0,get:function(){return i.EditValue}});var u=n(243);Object.defineProperty(t,"CreateOptional",{enumerable:!0,get:function(){return u.CreateOptional}}),Object.defineProperty(t,"EditOptional",{enumerable:!0,get:function(){return u.EditOptional}});var c=n(245);Object.defineProperty(t,"ConfirmElement",{enumerable:!0,get:function(){return r(c).default}});var s=n(246);Object.defineProperty(t,"ConfirmUpdate",{enumerable:!0,get:function(){return r(s).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(232),f=r(s),d=n(204),p=n(223),h=n(205),v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=[["*"]],l=n.props.staticData,i=l.parent;return(0,d.allSelect)(i.matches)&&r.push(["option"]),n.state={checked:void 0,selectors:r,eleCount:0,error:!0},n.mouseover=n.mouseover.bind(n),n.mouseout=n.mouseout.bind(n),n.click=n.click.bind(n),n.addEvents=n.addEvents.bind(n),n.setRadio=n.setRadio.bind(n),n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"mouseover",value:function(e){e.target.classList.add(h.hoverClass)}},{key:"mouseout",value:function(e){e.target.classList.remove(h.hoverClass)}},{key:"click",value:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.path).filter(function(e){return e.classList&&e.classList.contains(h.potentialSelector)}).reverse().map(function(e){return(0,d.parts)(e)});this.setState({selectors:[["*"]].concat(t),checked:void 0,error:!0})}},{key:"addEvents",value:function(e){var t=(0,d.select)(e.parent.matches,null,null,".forager-holder");this.iUnhighlight&&(this.iUnhighlight(),delete this.iUnhighlight),this.iUnhighlight=(0,p.iHighlight)(t,h.potentialSelector,this.mouseover,this.mouseout,this.click)}},{key:"setRadio",value:function(e){var t=this.state.selectors[e].join(""),n=this.props.staticData,r=n.parent;this.setState({checked:e,eleCount:(0,d.count)(r.matches,t),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.checked,r=t.selectors,a=this.props.next,o=r[n];void 0!==n&&void 0!==o?a({parts:o}):this.setState({error:!0})}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectors,r=t.checked,a=t.eleCount,o=t.error;return c.default.createElement("form",{className:"info-box"},c.default.createElement("div",{className:"info"},c.default.createElement("h3",null,"Select Relevant Element(s)"),c.default.createElement("div",{className:"choices"},n.map(function(t,n){return c.default.createElement(m,{key:n,selector:t,index:n,checked:n===r,select:e.setRadio})})),c.default.createElement("h5",null,"Count: ",a)),c.default.createElement(f.default,{next:this.nextHandler,cancel:this.cancelHandler,error:o}))}},{key:"componentWillMount",value:function(){var e=this.props.staticData;this.addEvents(e)}},{key:"componentWillReceiveNewProps",value:function(e){var t=e.staticData;this.addEvents(t)}},{key:"componentWillUpdate",value:function(e,t){(0,p.unhighlight)(h.queryCheck);var n=t.selectors[t.checked];if(void 0!==n){var r=n.join(""),a=e.staticData,o=(0,d.select)(a.parent.matches,r,null,".forager-holder");(0,p.highlight)(o,h.queryCheck)}}},{key:"componentWillUnmount",value:function(){(0,p.unhighlight)(h.queryCheck),this.iUnhighlight()}}]),t}(c.default.Component),m=function(e){var t=e.selector,n=e.checked,r=e.select,a=e.index;return c.default.createElement("label",{className:n?"selected":""},c.default.createElement("input",{type:"radio",name:"css-selector",checked:n,onChange:function(){return r(a)}}),t.join(""))};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.previous,n=e.next,r=e.nextText,a=void 0===r?"Next":r,o=e.cancel,u=e.error,c=void 0!==u&&u;return l.default.createElement("div",{className:"buttons"},l.default.createElement(i.NegButton,{text:"Previous",click:t,disabled:void 0===t}),l.default.createElement(i.PosButton,{text:a,type:"submit",click:n,disabled:c}),l.default.createElement(i.NegButton,{text:"Cancel",click:o}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),l=r(o),i=n(201)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if((0,h.unhighlight)(v.queryCheck),""!==e){var n=(0,p.select)(t,e,null,".forager-holder");(0,h.highlight)(n,v.queryCheck)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(232),d=r(f),p=n(204),h=n(223),v=n(205),m=function(e){return e.reduce(function(e,t){return e+(t.checked?t.name:"")},"")},y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={parts:[],eleCount:0,error:!0},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleRadio=n.toggleRadio.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.parts,n=this.props.next,r=m(t);""!==r?n({selector:r}):this.setState({error:!0})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleRadio",value:function(e){var t=e.target.value,n=this.state.parts;n[t].checked=!n[t].checked;var r=m(n),a=this.props.staticData,o=a.parent.matches;i(r,o),this.setState({parts:n,eleCount:""===r?0:(0,p.count)(o,r),error:""===r})}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.parts,a=n.parent,o=r.join("");i(o,a.matches),this.setState({parts:r.map(function(e){return{name:e,checked:!0}}),eleCount:(0,p.count)(a.matches,o),error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.parts,r=t.eleCount,a=t.error,o=n.map(function(t,n){var r=t.name,a=t.checked;return s.default.createElement("label",{key:n,className:a?"selected":""},s.default.createElement("input",{type:"checkbox",name:"selector-part",value:n,checked:a,onChange:e.toggleRadio}),r)});return s.default.createElement("form",{className:"info-box"},s.default.createElement("div",{className:"info"},s.default.createElement("h3",null,"Select Relevant Part(s) of the CSS selector"),s.default.createElement("div",{className:"choices"},o),s.default.createElement("h5",null,"Count: ",r)),s.default.createElement(d.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(s.default.Component);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.endData,n=void 0===t?{}:t,r="single";return n.spec&&n.spec.type&&(r=n.spec.type),r}function u(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="single";return r.spec&&r.spec.type?a=r.spec.type:t.spec&&t.spec.type&&(a=t.spec.type),a}function c(e,t,n){var r=e.startData,a=e.staticData,o=t.type,l=r.selector,i=a.parent,u={type:o};"single"===o?u.index=0:"range"===o&&(u.low=0,u.high=void 0);var c=(0,E.select)(i.matches,l,u,".forager-holder");(0,b.highlight)(c,n)}function s(e,t,n){var r=e.startData,a=e.staticData,o=t.type,l=a.parent,i=void 0===l?{}:l,u=i.matches,c=void 0===u?[document]:u,s={type:o};if("single"===o){var f=r.spec&&"single"===r.spec.type;s.index=f?r.spec.index:0}else if("range"===o){var d=r.spec&&"range"===r.spec.type;s.low=d?r.spec.low:0,s.high=d?r.spec.high:void 0}var p=(0,E.select)(c,r.selector,s,".forager-holder");(0,b.highlight)(p,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditType=t.CreateType=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),h=r(p),v=n(232),m=r(v),y=n(235),g=r(y),E=n(204),b=n(223),_=n(205),O=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={type:e.setupState(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return l(t,e),d(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next,o={type:t};switch(t){case"single":o.index=0;break;case"all":o.name="";break;case"range":o.name="",o.low=0,o.high=void 0}a(Object.assign({},r,{spec:o}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this.state.type,t=this.props.noPrevious,n=void 0!==t&&t,r=["single","all","range"];return h.default.createElement("form",{className:"info-box"},h.default.createElement("div",{className:"info"},h.default.createElement(g.default,{types:r,current:e,setType:this.typeHandler})),h.default.createElement(m.default,{previous:n?void 0:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.highlight,n=e.highlightClass;t(this.props,this.state,n)}},{key:"componentWillUpdate",value:function(e,t){(0,b.unhighlight)(this.props.highlightClass);var n=e.highlight,r=e.highlightClass;n(e,t,r)}},{key:"componentWillUnmount",value:function(){(0,b.unhighlight)(this.props.highlightClass)}}]),t}(h.default.Component);t.CreateType=function(e){return h.default.createElement(O,f({highlight:c,highlightClass:_.queryCheck,setupState:i},e))},t.EditType=function(e){return h.default.createElement(O,f({highlight:s,highlightClass:_.currentSelector,setupState:u,noPrevious:!0},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.types,n=e.current,r=e.setType,a=t.map(function(e){var t=n===e;return l.default.createElement("label",{key:e,className:t?"selected":null},l.default.createElement("input",{type:"radio",name:"type",value:e,checked:t,onChange:r}),e)});return l.default.createElement("div",null,l.default.createElement("h3",null,"Should the element target a single element or all?"),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),l=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.startData.spec;switch(t.type){case"all":return i.default.createElement(u.CreateAllValueStep,e);case"single":return i.default.createElement(c.CreateSingleValueStep,e);case"range":return i.default.createElement(s.CreateRangeValueStep,e);default:return null}}function o(e){var t=e.startData.spec;switch(t.type){case"all":return i.default.createElement(u.EditAllValueStep,e);case"single":return i.default.createElement(c.EditSingleValueStep,e);case"range":return i.default.createElement(s.EditRangeValueStep,e);default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateValue=a,t.EditValue=o;var l=n(1),i=r(l),u=n(237),c=n(239),s=n(241)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.spec&&t.spec.name&&(a=t.spec.name),a}function u(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a="";return r.spec&&void 0!==r.spec.name?a=r.spec.name:t.originalSpec&&void 0!==t.originalSpec.name&&(a=t.originalSpec.name),a}function c(e,t){var n=t.name,r=e.takenNames;return r.every(function(e){return e!==n})}function s(e,t){var n=t.name,r=e.takenNames,a=e.staticData,o=a.originalSpec.name;return n===o||r.every(function(e){return e!==n})}function f(e,t,n){var r=e.startData,a=e.staticData,o=t.name,l=r.selector,i=a.parent,u=(0,_.select)(i.matches,l,{type:"all",name:o},".forager-holder");(0,O.highlight)(u,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditAllValueStep=t.CreateAllValueStep=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),m=n(167),y=n(238),g=r(y),E=n(232),b=r(E),_=n(204),O=n(223),w=n(227),P=n(207),x=n(205),j=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.setupState(e);return n.state={name:r,error:""===r},n.nameHandler=n.nameHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),p(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.error,a=this.props,o=a.startData,l=a.next,i=a.showMessage,u=a.validate;if(!r){var c=u(this.props,this.state);if(!c)return void i('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);var s={type:"all",name:n};l(Object.assign({},o,{spec:s}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return v.default.createElement("form",{className:"info-box"},v.default.createElement("div",{className:"info"},v.default.createElement(g.default,{name:t,setName:this.nameHandler})),v.default.createElement(b.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){f(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,O.unhighlight)(this.props.highlightClass),f(e,t,e.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,O.unhighlight)(this.props.highlightClass)}}]),t}(v.default.Component),S=(0,m.connect)(function(e){var t=e.page;return{takenNames:(0,w.takenNames)(t)}},{showMessage:P.showMessage})(j);t.CreateAllValueStep=function(e){return v.default.createElement(S,d({setupState:i,highlightClass:x.queryCheck,validate:c},e))},t.EditAllValueStep=function(e){return v.default.createElement(S,d({setupState:u,highlightClass:x.currentSelector,validate:s},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.name,n=e.setName;return l.default.createElement("div",null,l.default.createElement("h3",null,"What should the array of elements be named?"),l.default.createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:n}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),l=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.spec&&void 0!==t.spec.index&&(a=t.spec.index),a}function u(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a=0;return r.spec&&void 0!==r.spec.index?a=r.spec.index:t.originalSpec&&void 0!==t.originalSpec.index&&(a=t.originalSpec.index),a}function c(e,t,n){var r=e.startData,a=e.staticData,o=t.index,l=r.selector,i=a.parent,u=(0,g.select)(i.matches,l,{type:"single",index:o},".forager-holder");(0,E.highlight)(u,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditSingleValueStep=t.CreateSingleValueStep=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(232),v=r(h),m=n(240),y=r(m),g=n(204),E=n(223),b=n(205),_=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={index:e.setupState(e),error:!1},n.indexHandler=n.indexHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),f(t,[{key:"indexHandler",value:function(e){var t=e.target.value;this.setState({index:parseInt(t,10),error:!1})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.index,r=t.error,a=this.props,o=a.startData,l=a.next,i=a.validate;if(!r){var u=i(this.props,this.state);if(u){var c={type:"single",index:n};l(Object.assign({},o,{spec:c}))}}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.index,n=e.error,r=this.props,a=r.startData,o=r.staticData,l=a.selector,i=o.parent,u=(0,g.count)(i.matches,l);return p.default.createElement("form",{className:"info-box"},p.default.createElement("div",{className:"info"},p.default.createElement(y.default,{index:t,count:u,setIndex:this.indexHandler})),p.default.createElement(v.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}},{key:"componentWillMount",value:function(){c(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,E.unhighlight)(this.props.highlightClass),c(e,t,this.props.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(this.props.highlightClass)}}]),t}(p.default.Component);t.CreateSingleValueStep=function(e){return p.default.createElement(_,s({setupState:i,highlightClass:b.queryCheck,validate:function(){return!0}},e))},t.EditSingleValueStep=function(e){return p.default.createElement(_,s({setupState:u,highlightClass:b.currentSelector,validate:function(){return!0}},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=function(e){var t=e.index,n=e.count,r=e.setIndex;return o.default.createElement("div",null,o.default.createElement("h3",null,"The element at which index should be selected?"),o.default.createElement("select",{value:t,onChange:r},Array.from(new Array(n)).map(function(e,t){return o.default.createElement("option",{key:t,value:t},t)})))};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="",o=0,l="end";return r.spec?(r.spec.name&&(a=r.spec.name),void 0!==r.spec.low&&(o=r.spec.low),void 0!==r.spec.high&&(l=null===r.spec.high?"end":r.spec.high)):t.spec&&(t.spec.name&&(a=t.spec.name),void 0!==t.spec.low&&(o=t.spec.low),void 0!==t.spec.high&&(l=null===t.spec.high?"end":t.spec.high)),{name:a,low:o,high:l,error:""===a}}function u(e){var t=e.staticData,n=e.endData,r=void 0===n?{}:n,a="",o=0,l="end";if(r.spec){var i=r.spec;i.name&&(a=i.name),void 0!==i.low&&(o=i.low),void 0!==i.high&&(l=null===i.high?"end":i.high)}else if(t.originalSpec){var u=t.originalSpec;u.name&&(a=u.name),void 0!==u.low&&(o=u.low),void 0!==u.high&&(l=null===u.high?"end":u.high)}return{name:a,low:o,high:l,error:""===a}}function c(e,t){var n=t.name,r=e.takenNames;return r.every(function(e){return e!==n})}function s(e,t){var n=t.name,r=e.takenNames,a=e.staticData,o=a.originalSpec.name;return n===o||r.every(function(e){return e!==n})}function f(e,t,n){var r=e.startData,a=e.staticData,o=t.name,l=t.low,i=t.high,u=r.selector,c=a.parent;"end"===i&&(i=null);var s=(0,_.select)(c.matches,u,{type:"range",name:o,low:l,high:i},".forager-holder");(0,O.highlight)(s,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditRangeValueStep=t.CreateRangeValueStep=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),m=n(167),y=n(232),g=r(y),E=n(242),b=r(E),_=n(204),O=n(223),w=n(227),P=n(207),x=n(205),j=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=e.setupState(e),n.nameHandler=n.nameHandler.bind(n),n.lowHandler=n.lowHandler.bind(n),n.highHandler=n.highHandler.bind(n),n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),p(t,[{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"lowHandler",value:function(e){var t=e.target.value,n=parseInt(t,10),r=this.state.high;if(n>r){var a=[n,r];r=a[0],n=a[1]}this.setState({low:n,high:r})}},{key:"highHandler",value:function(e){var t=e.target.value;if("end"===t)return void this.setState({high:t});var n=parseInt(t,10),r=this.state.low;if(r>n){var a=[r,n];n=a[0],r=a[1]}this.setState({low:r,high:n})}},{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.name,r=t.low,a=t.high,o=t.error,l=this.props,i=l.startData,u=l.next,c=l.showMessage,s=l.validate,f=s(this.props,this.state);if(!f)return void c('"'+n+'" is a duplicate name and cannot be used.',5e3,-1);if(!o){var d={type:"range",name:n,low:r,high:"end"===a?null:a};u(Object.assign({},i,{spec:d}))}}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.low,r=e.high,a=e.error,o=this.props,l=o.startData,i=o.staticData,u=l.selector,c=i.parent,s=(0,_.count)(c.matches,u);return v.default.createElement("form",{className:"info-box"},v.default.createElement("div",{className:"info"},v.default.createElement(b.default,{name:t,low:n,high:r,count:s,setName:this.nameHandler,setLow:this.lowHandler,setHigh:this.highHandler})),v.default.createElement(g.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:a}))}},{key:"componentWillMount",value:function(){f(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,O.unhighlight)(this.props.highlightClass),f(e,t,this.props.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,O.unhighlight)(this.props.highlightClass)}}]),t}(v.default.Component),S=(0,m.connect)(function(e){var t=e.page;return{takenNames:(0,w.takenNames)(t)}},{showMessage:P.showMessage})(j);t.CreateRangeValueStep=function(e){return v.default.createElement(S,d({setupState:i,highlightClass:x.queryCheck,validate:c},e))},t.EditRangeValueStep=function(e){return v.default.createElement(S,d({setupState:u,highlightClass:x.currentSelector,validate:s},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.name,n=e.low,r=e.high,a=e.count,o=e.setName,i=e.setLow,u=e.setHigh;return l.default.createElement("div",null,l.default.createElement("h3",null,"What should the array of elements be named?"),l.default.createElement("input",{type:"text",placeholder:"e.g., names",value:t,onChange:o}),l.default.createElement("h3",null,"Which elements should be selected?"),l.default.createElement("select",{value:n,onChange:i},Array.from(new Array(a)).map(function(e,t){return l.default.createElement("option",{key:t,value:t},t)}))," - ",l.default.createElement("select",{value:r,onChange:u},Array.from(new Array(a)).map(function(e,t){return l.default.createElement("option",{key:t,value:t},t)}),l.default.createElement("option",{key:"end",value:"end"},"end")))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),l=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a=!1;return void 0!==r.optional?a=r.optional:void 0!==t.optional&&(a=t.optional),a}function u(e,t,n){var r=e.startData,a=e.staticData,o=r.selector,l=r.spec,i=a.parent,u=void 0===i?{}:i,c=u.matches,s=void 0===c?[document]:c,f=(0,y.select)(s,o,l,".forager-holder");(0,g.highlight)(f,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditOptional=t.CreateOptional=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(232),h=r(p),v=n(244),m=r(v),y=n(204),g=n(223),E=n(205),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={optional:i(n.props)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.toggleOptional=n.toggleOptional.bind(n),n}return l(t,e),s(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.optional,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{optional:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"toggleOptional",value:function(e){this.setState({optional:e.target.checked})}},{key:"render",value:function(){var e=this.state.optional;return d.default.createElement("form",{className:"info-box"},d.default.createElement("div",{className:"info"},d.default.createElement(m.default,{optional:e,toggle:this.toggleOptional})),d.default.createElement(h.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){u(this.props,this.state,this.props.highlightClass)}},{key:"componentWillUpdate",value:function(e,t){(0,g.unhighlight)(this.props.highlightClass),u(e,t,e.highlightClass)}},{key:"componentWillUnmount",value:function(){(0,g.unhighlight)(this.props.highlightClass)}}]),t}(d.default.Component);t.CreateOptional=function(e){return d.default.createElement(b,c({highlightClass:E.queryCheck},e))},t.EditOptional=function(e){return d.default.createElement(b,c({highlightClass:E.currentSelector},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=function(e){var t=e.optional,n=e.toggle;return o.default.createElement("div",null,o.default.createElement("h3",null,"Is this element optional?"),o.default.createElement("label",{className:t?"selected":null},o.default.createElement("input",{type:"checkbox",checked:t,onChange:n}),t?"Yes":"No"))};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(232),f=r(s),d=n(206),p=n(204),h=n(223),v=n(205),m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.selector,o=n.spec,l=n.optional,i=(0,d.createElement)(a,o,l);r(i)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c.default.createElement("form",{className:"info-box"},c.default.createElement("h2",null,"Confirm Element"),c.default.createElement("ul",null,c.default.createElement("li",null,"Selector: ",t),c.default.createElement("li",null,"Spec: ",JSON.stringify(n,null,"\t")),c.default.createElement("li",null,"Optional: ",r?"Yes":"No")),c.default.createElement(f.default,{previous:this.previousHandler,next:this.saveHandler,nextText:"Save",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.selector,a=t.spec,o=n.parent,l=(0,p.select)(o.matches,r,a,".forager-holder");(0,h.highlight)(l,v.queryCheck)}},{key:"componentWillUnmount",value:function(){(0,h.unhighlight)(v.queryCheck)}}]),t}(c.default.Component);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(232),f=r(s),d=n(204),p=n(223),h=n(205),v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),i(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.spec,o=n.optional;r({optional:o,spec:a})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props.startData,t=e.selector,n=e.spec,r=e.optional;return c.default.createElement("form",{className:"info-box"},c.default.createElement("h2",null,"Confirm Updated Element"),c.default.createElement("ul",null,c.default.createElement("li",null,"Selector: ",t),c.default.createElement("li",null,"Spec: ",JSON.stringify(n,null,"\t")),c.default.createElement("li",null,"Optional: ",r?"Yes":"No")),c.default.createElement(f.default,{previous:this.previousHandler,next:this.saveHandler,nextText:"Update",cancel:this.cancelHandler}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.startData,n=e.staticData,r=t.spec,a=n.parent,o=void 0===a?{}:a,l=o.matches,i=void 0===l?[document]:l,u=(0,d.select)(i,t.selector,r,".forager-holder");(0,p.highlight)(u,h.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,p.unhighlight)(h.currentSelector)}}]),t}(c.default.Component);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(167),f=n(229),d=r(f),p=n(220),h=r(p),v=n(230),m=n(213),y=n(227),g=[v.EditType,v.EditValue,v.EditOptional,v.ConfirmUpdate],E=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"save",value:function(e){var t=this.props,n=t.current,r=t.updateElement,a=e.spec,o=e.optional;r(n.index,{spec:a,optional:o})}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.parent,r=t.selector,a=t.spec,o=t.optional;return c.default.createElement("div",{className:"frame"},c.default.createElement(h.default,null),c.default.createElement(d.default,{steps:g,initialData:{selector:r,spec:a,optional:o},staticData:{parent:n,originalSpec:a},save:this.save,cancel:this.cancel}))}}]),t}(c.default.Component);t.default=(0,s.connect)(function(e){var t=e.page;return{current:(0,y.currentElement)(t),parent:(0,y.currentParent)(t)}},{updateElement:m.updateElement,cancel:m.showElementFrame})(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(167),f=n(229),d=r(f),p=n(224),h=r(p),v=n(249),m=n(256),y=r(m),g=n(213),E=n(223),b=n(227),_=n(205),O=[v.Attribute,v.Type,v.Name,v.ConfirmSaveRule],w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){this.props.saveRule(e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props.current,t=this.state.index;return c.default.createElement("div",{className:"frame"},c.default.createElement(h.default,{active:!1,element:e}),c.default.createElement(d.default,{steps:O,initialData:{},staticData:{element:e.matches[t]},save:this.save,cancel:this.cancel},c.default.createElement(y.default,{index:t,count:e.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,E.highlight)(e.matches,_.currentSelector)}},{key:"componentWillUpdate",value:function(e){(0,E.unhighlight)(_.currentSelector);var t=e.current;(0,E.highlight)(t.matches,_.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(_.currentSelector)}}]),t}(c.default.Component);t.default=(0,s.connect)(function(e){var t=e.page;return{current:(0,b.currentElement)(t)}},{saveRule:g.saveRule,cancel:g.showElementFrame})(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(250);Object.defineProperty(t,"Attribute",{enumerable:!0,get:function(){return r(a).default}});var o=n(252);Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r(o).default}});var l=n(253);Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return r(l).default}});var i=n(255);Object.defineProperty(t,"ConfirmSaveRule",{enumerable:!0,get:function(){return i.ConfirmSaveRule}}),Object.defineProperty(t,"ConfirmUpdateRule",{enumerable:!0,get:function(){return i.ConfirmUpdateRule}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.attribute?a=r.attribute:t.attr&&(a=t.attr),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(232),d=r(f),p=n(251),h=n(203),v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=i(e);return n.state={attribute:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.attributeHandler=n.attributeHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state,n=t.attribute,r=t.error;if(!r){var a=this.props,o=a.startData,l=a.next;l(Object.assign({},o,{attribute:n}))}}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"attributeHandler",value:function(e){this.setState({attribute:e.target.value,error:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.attribute,r=t.error,a=this.props.staticData,o=a.element;return s.default.createElement("form",{className:"info-box"},s.default.createElement("div",{className:"info"},s.default.createElement("h3",null,"Which attribute has the value that you want?"),s.default.createElement("ul",null,(0,p.attributes)(o).map(function(t,r){return s.default.createElement("li",{key:r},s.default.createElement("label",null,s.default.createElement("input",{type:"radio",value:t.name,checked:t.name===n,onChange:e.attributeHandler}),t.name),s.default.createElement("p",{className:"line"},(0,h.abbreviate)(t.value,40)))})),this.props.children),s.default.createElement(d.default,{next:this.nextHandler,cancel:this.cancelHandler,error:r}))}}]),t}(s.default.Component);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripEvents=t.attributes=void 0;var r=n(205);t.attributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[r.currentSelector,r.potentialSelector,r.queryCheck,r.hoverClass,r.savedPreview],a=Array.from(e.attributes).reduce(function(e,r){var a=r.name,o=r.value;return t[a]?e:("class"===a&&(o=o.split(" ").filter(function(e){return!n.includes(e)&&""!==e}).join(" ")),""!==o&&e.push({name:a,value:o}),e)},[]),o=e.textContent.trim();return""!==o&&a.push({name:"text",value:o}),a},t.stripEvents=function(e){var t=Array.from(e.attributes);if(t.some(function(e){return e.name.startsWith("on")})){t.forEach(function(t){var n=t.name;n.startsWith("on")&&e.removeAttribute(n)});var n=e.cloneNode(!0);return e.parentNode.replaceChild(n,e),n}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="";return r.name?a=r.name:t.name&&(a=t.name),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(167),d=n(232),p=r(d),h=n(206),v=n(207),m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=i(e);return n.state={name:r,error:""===r},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.nameHandler=n.nameHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.name,n=this.props,r=n.takenNames,a=n.showMessage,o=n.startData,l=n.next,i=o.name;return t===i||r.every(function(e){return e!==t})?void l(Object.assign({},o,{name:t})):void a('"'+t+'" is a duplicate name and cannot be used.',5e3,-1)}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"nameHandler",value:function(e){var t=e.target.value;this.setState({name:t,error:""===t})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.error;return s.default.createElement("form",{className:"info-box"},s.default.createElement("div",{className:"info"},s.default.createElement("h3",null,"What should the rule be named?"),s.default.createElement("input",{type:"text",placeholder:"e.g., name",value:t,onChange:this.nameHandler})),s.default.createElement(p.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler,error:n}))}}]),t}(s.default.Component);t.default=(0,f.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=t.elementIndex,o=n[r];return{takenNames:(0,h.levelNames)(o.elements,a)}},{showMessage:v.showMessage})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.startData,n=e.endData,r=void 0===n?{}:n,a="string";return r.type?a=r.type:t.type&&(a=t.type),a}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(232),d=r(f),p=n(203),h=n(254),v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={type:i(e)},n.nextHandler=n.nextHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n.typeHandler=n.typeHandler.bind(n),n}return l(t,e),u(t,[{key:"nextHandler",value:function(e){e.preventDefault();var t=this.state.type,n=this.props,r=n.startData,a=n.next;a(Object.assign({},r,{type:t}))}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"typeHandler",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.type,n=this.props,r=n.startData,a=n.children,o=r.attribute,l=this.props.staticData,i=l.element,u="text"===o?i.innerText:i.getAttribute(o),c=void 0;switch(t){case"string":c=(0,p.abbreviate)(u,40);break;case"int":c=(0,h.integer)(u),null===c&&(c="No int detected");break;case"float":c=(0,h.float)(u),null===c&&(c="No float detected")}return s.default.createElement("form",{className:"info-box"},s.default.createElement("div",{className:"info"},s.default.createElement("h3",null,"What type of value is this?"),["string","int","float"].map(function(n,r){return s.default.createElement("label",{key:r},s.default.createElement("input",{type:"radio",value:n,checked:n===t,onChange:e.typeHandler}),n)}),s.default.createElement("p",{className:"line"},c),a),s.default.createElement(d.default,{previous:this.previousHandler,next:this.nextHandler,cancel:this.cancelHandler}))}}]),t}(s.default.Component);t.default=v},function(e,t){"use strict";function n(e){var t=/\d+/,n=e.match(t);return null!==n?parseInt(n[0],10):null}function r(e){var t=/\d+(\.\d+)?/,n=e.match(t);return null!==n?parseFloat(n[0]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.integer=n,t.float=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmUpdateRule=t.ConfirmSaveRule=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(232),d=r(f),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveHandler=n.saveHandler.bind(n),n.previousHandler=n.previousHandler.bind(n),n.cancelHandler=n.cancelHandler.bind(n),n}return l(t,e),u(t,[{key:"saveHandler",value:function(e){e.preventDefault();var t=this.props,n=t.startData,r=t.next,a=n.name,o=n.attribute,l=n.type;r({name:a,type:l,attr:o})}},{key:"previousHandler",value:function(e){e.preventDefault(),this.props.previous()}},{key:"cancelHandler",value:function(e){e.preventDefault(),this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.startData,n=e.buttonText,r=e.title,a=t.name,o=t.attribute,l=t.type;return s.default.createElement("form",{className:"info-box"},s.default.createElement("h2",null,r),s.default.createElement("ul",null,s.default.createElement("li",null,"Name: ",a),s.default.createElement("li",null,"Attribute: ",o),s.default.createElement("li",null,"Type: ",l)),s.default.createElement(d.default,{previous:this.previousHandler,next:this.saveHandler,nextText:n,cancel:this.cancelHandler}))}}]),t}(s.default.Component);t.ConfirmSaveRule=function(e){return s.default.createElement(p,i({title:"Confirm Rule",buttonText:"Save"},e))},t.ConfirmUpdateRule=function(e){return s.default.createElement(p,i({title:"Confirm Update Rule",buttonText:"Update"},e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),l=n(201),i=function(e){var t=e.index,n=e.count,r=e.setIndex,a=(t+1)%n,i=(t-1+n)%n;return o.default.createElement("div",null,o.default.createElement(l.NeutralButton,{click:function(){r(i)},text:"<"}),t+1," / ",n,o.default.createElement(l.NeutralButton,{click:function(){r(a)},text:">"}))};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(167),f=n(229),d=r(f),p=n(224),h=r(p),v=n(249),m=n(256),y=r(m),g=n(213),E=n(223),b=n(227),_=n(205),O=[v.Attribute,v.Type,v.Name,v.ConfirmUpdateRule],w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={index:0},n.setIndex=n.setIndex.bind(n),n.save=n.save.bind(n),n.cancel=n.cancel.bind(n),n}return l(t,e),i(t,[{key:"setIndex",value:function(e){this.setState({index:e})}},{key:"save",value:function(e){var t=this.props,n=t.updateRule,r=t.ruleIndex;n(r,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.ruleIndex,r=t.rules[n];if(void 0===n||void 0===n)return null;var a=this.state.index,o=r.name,l=r.attr,i=r.type;return c.default.createElement("div",{className:"frame"},c.default.createElement(h.default,{active:!1,element:t}),c.default.createElement(d.default,{steps:O,initialData:{current:t,index:0,name:o,attr:l,type:i},staticData:{element:t.matches[a]},save:this.save,cancel:this.cancel},c.default.createElement(y.default,{index:a,count:t.matches.length,setIndex:this.setIndex})))}},{key:"componentWillMount",value:function(){var e=this.props.current;(0,E.highlight)(e.matches,_.currentSelector)}},{key:"componentWillUpdate",value:function(e){(0,E.unhighlight)(_.currentSelector);var t=e.current;(0,E.highlight)(t.matches,_.currentSelector)}},{key:"componentWillUnmount",value:function(){(0,E.unhighlight)(_.currentSelector)}}]),t}(c.default.Component);t.default=(0,s.connect)(function(e){var t=e.page,n=e.frame;return{current:(0,b.currentElement)(t),ruleIndex:n.index}},{updateRule:g.updateRule,cancel:g.showElementFrame})(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(167),f=n(201),d=n(220),p=r(d),h=n(206),v=n(259),m=n(213),y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeHandler=n.closeHandler.bind(n),n.logHandler=n.logHandler.bind(n),n.prettyLogHandler=n.prettyLogHandler.bind(n),n.varHandler=n.varHandler.bind(n),n}return l(t,e),i(t,[{key:"closeHandler",value:function(e){e.preventDefault(),this.props.close()}},{key:"logHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree)))}},{key:"prettyLogHandler",value:function(e){e.preventDefault(),console.log(JSON.stringify((0,v.preview)(this.props.tree),null,2))}},{key:"varHandler",value:function(e){e.preventDefault(),console.log(['The current preview data can be accessed using the %c"pageData"%c variable.',"Make sure that the Forager extension's context is selected.",'(This will be a string using the extension\'s ID that starts with "chrome-extensions://". Open the chrome://extensions tab and look for the Forager extension to determine the extension ID)'].join(" "),"font-weight: bold; font-size: 1.5em;",""),window.pageData=(0,v.preview)(this.props.tree)}},{key:"render",value:function(){return c.default.createElement("div",{className:"frame"},c.default.createElement(p.default,null),c.default.createElement("div",{className:"preview"},c.default.createElement("pre",null,JSON.stringify((0,v.preview)(this.props.tree),null,2)),c.default.createElement("div",{className:"buttons"},c.default.createElement(f.PosButton,{text:"Log to Console",click:this.logHandler}),c.default.createElement(f.PosButton,{text:"Pretty Log",click:this.prettyLogHandler}),c.default.createElement(f.PosButton,{text:"Use as Variable",click:this.varHandler}),c.default.createElement(f.NegButton,{text:"Hide Preview",click:this.closeHandler}))))}}]),t}(c.default.Component);t.default=(0,s.connect)(function(e){var t=e.page,n=t.pages,r=t.pageIndex,a=n[r];return{tree:void 0===a?{}:(0,h.fullGrow)(a.elements)}},{close:m.showElementFrame})(y)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var a=n(254),o=function(e,t){var n=t.querySelectorAll(e.selector),a=e.spec.type;switch(a){case"single":var o=e.spec.index,i=n[o];if(!i)return;return l(e,i);case"all":var u=e.spec.name,c=Array.from(n).map(function(t){return l(e,t)}).filter(function(e){return void 0!==e});return r({},u,c);case"range":var s=e.spec,u=s.name,f=s.low,d=s.high,p=Array.from(n).slice(f,d||void 0).map(function(t){return l(e,t)}).filter(function(e){
return void 0!==e});return r({},u,p)}},l=function(e,t){var n=u(e.rules,t);if(n){var r=i(e.children,t);if(r)return Object.assign({},n,r)}},i=function(e,t){var n={};return e.some(function(e){var r=o(e,t);if(!r&&!e.optional)return n=void 0,!0;for(var a in r)n[a]=r[a];return!1}),n},u=function(e,t){var n={};return e.some(function(e){var r=void 0;if("text"===e.attr)r=t.textContent.replace(/\s+/g," ");else{var o=t.getAttribute(e.attr);if(null===o)return n=void 0,!0;r=o||""}switch(e.type){case"int":r=(0,a.integer)(r);break;case"float":r=(0,a.float)(r)}return n[e.name]=r,!1}),n};t.preview=function(e){return void 0===e?"":o(e,document)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.upload=t.load=t.remove=t.rename=t.save=void 0;var r=n(206);t.save=function(e){return new Promise(function(t,n){void 0===e&&n("No page to save");var a=(0,r.clean)(e);chrome.storage.local.get("sites",function(e){var n=window.location.hostname;e.sites[n]=e.sites[n]||{},e.sites[n][a.name]=a,chrome.storage.local.set({sites:e.sites}),t("Saved")})})},t.rename=function(e,t){return new Promise(function(n,r){chrome.storage.local.get("sites",function(a){var o=window.location.hostname,l=a.sites[o][t];void 0===l&&r("No page named "+t+" found"),l.name=e,a.sites[o][e]=l,delete a.sites[o][t],chrome.storage.local.set({sites:a.sites}),n('Renamed "'+t+'" to "'+e+'"')})})},t.remove=function(e){return new Promise(function(t,n){void 0===e&&n("No page to delete"),chrome.storage.local.get("sites",function(n){var r=window.location.hostname;delete n.sites[r][e],chrome.storage.local.set({sites:n.sites}),t("Deleted page "+e)})})},t.load=function(){return new Promise(function(e){chrome.storage.local.get("sites",function(t){var n=window.location.hostname,a=t.sites[n]||{},o=(0,r.preparePages)(a);e(o)})})},t.upload=function(e){return new Promise(function(t,n){void 0===e&&n("No page to upload"),chrome.runtime.sendMessage({type:"upload",data:{name:e.name,site:window.location.hostname,page:JSON.stringify((0,r.clean)(e))}},function(e){e.error?n("Failed to upload page"):t(e)})})},t.sync=function(){return new Promise(function(e,t){var n=window.location.hostname;chrome.runtime.sendMessage({type:"sync",site:n},function(a){a.error?t("Failed to sync pages"):!function(){var t=a.pages;chrome.storage.local.get("sites",function(a){var o=a.sites[n]||{},l=Object.assign({},o,t);a.sites[n]=l,chrome.storage.local.set({sites:a.sites});var i=(0,r.preparePages)(l);e(i)})}()})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=(0,o.createStore)(v,m,(0,o.applyMiddleware)(h.default,d.default,s.default,l.messagesMiddleware));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(178),l=n(207),i=n(262),u=r(i),c=n(266),s=r(c),f=n(267),d=r(f),p=n(268),h=r(p),v=(0,o.combineReducers)(Object.assign({},u.default,{messages:l.messages})),m={show:!0,page:{pages:[void 0],pageIndex:0,elementIndex:0},frame:{name:"element",data:{}},messages:[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(263),o=r(a),l=n(264),i=r(l),u=n(265),c=r(u);t.default={frame:c.default,show:o.default,page:i.default}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case l.CLOSE_FORAGER:return!1;case l.OPEN_FORAGER:return!0;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(215),l=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e,t,n,t,r,t,r,t,r,o,t,r,i,c,e,t,r,i,s,f,d,p,t,r,i,s,f,e,h,t,r,i,s,f,v,t,r,i,m,s,t,r,i,e,s,t,r,i,e,m,s,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments[1],E=function(){switch(g.type){case u.SELECT_PAGE:return e=parseInt(g.index,10),(isNaN(e)||e<0||e>=y.pages.length)&&(e=0),{v:Object.assign({},y,{pageIndex:e,elementIndex:0})};case u.SET_PAGES:return{v:Object.assign({},y,{pageIndex:0,pages:[void 0].concat(a(g.pages)),elementIndex:0})};case u.ADD_PAGE:return t=y.pages,n=[].concat(a(t),[g.page]),{v:Object.assign({},y,{pages:n,pageIndex:n.length-1,elementIndex:0})};case u.REMOVE_PAGE:return t=y.pages,r=y.pageIndex,0===r?{v:y}:{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),a(t.slice(r+1))),pageIndex:0,elementIndex:0})};case u.RENAME_PAGE:return t=y.pages,r=y.pageIndex,{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},t[r],{name:g.name})],a(t.slice(r+1)))})};case u.SET_MATCHES:return t=y.pages,r=y.pageIndex,o=g.matches,{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},t[r],{elements:t[r].elements.map(function(e){if(null===e)return null;var t=o[e.index];return void 0!==t?Object.assign({},e,{matches:t}):e})})],a(t.slice(r+1)))})};case u.SELECT_ELEMENT:return t=y.pages,r=y.pageIndex,i=y.elementIndex,c=t[r].elements.length,e=parseInt(g.index,10),(isNaN(e)||e<0||e>=c)&&(e=0),{v:Object.assign({},y,{elementIndex:e})};case u.SAVE_ELEMENT:return t=y.pages,r=y.pageIndex,i=y.elementIndex,s=t[r],f=s.elements[i],d=s.elements.length,p=g.element,p.parent=f.index,p.index=d,f.childIndices.push(d),{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},s,{elements:s.elements.concat([p])})],a(t.slice(r+1))),elementIndex:d})};case u.UPDATE_ELEMENT:return t=y.pages,r=y.pageIndex,i=y.elementIndex,s=t[r],f=s.elements[i],e=g.index,h=g.newProps,0===e?{v:y}:{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},s,{elements:s.elements.map(function(t){return null===t?null:t.index!==e?t:Object.assign({},t,h)})})],a(t.slice(r+1)))})};case u.REMOVE_ELEMENT:if(t=y.pages,r=y.pageIndex,i=y.elementIndex,s=t[r],f=s.elements[i],0===i){var l=Object.assign({},s.elements[0],{childIndices:[]});return{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},s,{elements:[l]})],a(t.slice(r+1))),elementIndex:0})}}var E=[i],b=s.elements[i].parent||0;return v=Object.assign({},s,{elements:s.elements.map(function(e){return null===e?null:(e.childIndices=e.childIndices.filter(function(e){return!E.includes(e)}),E.includes(e.index)?(E=E.concat(e.childIndices),null):e)})}),{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[v],a(t.slice(r+1))),elementIndex:b})};case u.SAVE_RULE:return t=y.pages,r=y.pageIndex,i=y.elementIndex,m=g.rule,s=t[r],{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},s,{elements:s.elements.map(function(e){return null!==e&&e.index===i&&(e.rules=e.rules.concat([m])),e})})],a(t.slice(r+1)))})};case u.REMOVE_RULE:return t=y.pages,r=y.pageIndex,i=y.elementIndex,e=g.index,s=t[r],{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},s,{elements:s.elements.map(function(t){return null!==t&&t.index===i?Object.assign({},t,{rules:t.rules.filter(function(t,n){return n!==e})}):t})})],a(t.slice(r+1)))})};case u.UPDATE_RULE:return t=y.pages,r=y.pageIndex,i=y.elementIndex,e=g.index,m=g.rule,s=t[r],{v:Object.assign({},y,{pages:[].concat(a(t.slice(0,r)),[Object.assign({},s,{elements:s.elements.map(function(t){return null!==t&&t.index===i&&(t.rules=t.rules.map(function(t,n){return n===e?m:t})),t})})],a(t.slice(r+1)))})};case u.CLOSE_FORAGER:return{v:Object.assign({},y,{pageIndex:0,elementIndex:0})};default:return{v:y}}}();if("object"===("undefined"==typeof E?"undefined":l(E)))return E.v}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var i=n(215),u=r(i)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"element"},t=arguments[1];switch(t.type){case l.SELECT_PAGE:case l.ADD_PAGE:case l.SET_PAGES:case l.REMOVE_PAGE:case l.REMOVE_ELEMENT:case l.SAVE_ELEMENT:case l.UPDATE_ELEMENT:case l.SAVE_RULE:case l.REMOVE_RULE:case l.UPDATE_RULE:case l.CLOSE_FORAGER:case l.SHOW_ELEMENT_FRAME:return{name:"element"};case l.SHOW_ELEMENT_WIZARD:return{name:"element-wizard"};case l.SHOW_EDIT_ELEMENT_WIZARD:return{name:"edit-element-wizard"};case l.SHOW_RULE_WIZARD:return{name:"rule-wizard"};case l.SHOW_EDIT_RULE_WIZARD:return{name:"edit-rule-wizard",index:t.index};case l.SHOW_PREVIEW:return{name:"preview"};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(215),l=r(o)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(215),o=r(a),l=n(207),i=n(213),u=n(260),c=r(u);t.default=function(e){return function(t){return function(n){var r=e.getState(),a=r.page,u=a.pages,s=a.pageIndex,f=u[s];switch(n.type){case o.RENAME_PAGE:return c.rename(n.name,f.name).then(function(t){e.dispatch((0,l.showMessage)(t,1e3,1))}).catch(function(t){e.dispatch((0,l.showMessage)(t,1e3,-1))}),t(n);case o.REMOVE_PAGE:var d=u[s].name;return c.remove(d).then(function(t){e.dispatch((0,l.showMessage)(t,1e3,1))}).catch(function(t){e.dispatch((0,l.showMessage)(t,1e3,-1))}),t(n);case o.UPLOAD_PAGE:c.upload(u[s]).then(function(){e.dispatch((0,l.showMessage)("Upload Successful",5e3,1))}).catch(function(t){e.dispatch((0,l.showMessage)(t,5e3,-1))});break;case o.SYNC_PAGES:c.sync().then(function(t){e.dispatch((0,i.setPages)(t)),e.dispatch((0,l.showMessage)("Pages synced",5e3,1))}).catch(function(){e.dispatch((0,l.showMessage)("Failed to sync pages",5e3,-1))});break;case o.ADD_PAGE:case o.SAVE_ELEMENT:case o.REMOVE_ELEMENT:case o.UPDATE_ELEMENT:case o.SAVE_RULE:case o.REMOVE_RULE:var p=t(n),h=e.getState(),v=h.page,m=v.pages,y=v.pageIndex;return c.save(m[y]).then(function(t){e.dispatch((0,l.showMessage)(t,1e3,1))}).catch(function(t){e.dispatch((0,l.showMessage)(t,1e3,-1))}),p;default:return t(n)}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(204),o=n(215),l=r(o),i=n(213);t.default=function(e){return function(t){return function(n){var r=[l.SELECT_PAGE,l.SAVE_ELEMENT,l.UPDATE_ELEMENT,l.REFRESH_MATCHES];if(!r.includes(n.type))return t(n);switch(n.type){case l.SELECT_PAGE:case l.SAVE_ELEMENT:case l.UPDATE_ELEMENT:case l.REFRESH_MATCHES:var o=t(n),u=e.getState().page,c=u.pages,s=u.pageIndex,f=c[s];if(void 0===f)return;var d=f.elements.reduce(function(e,t){if(null===t)return e;var n=null===t.parent?[document]:e[t.parent];return e[t.index]=(0,a.select)(n,t.selector,t.spec,".forager-holder"),e},{});return e.dispatch((0,i.setMatches)(d)),o}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(215),o=r(a);t.default=function(e){return function(t){return function(n){var r=[o.SYNC_PAGES,o.REMOVE_PAGE,o.REMOVE_ELEMENT];if(!r.includes(n.type))return t(n);var a="Are you sure?";switch(n.type){case o.SYNC_PAGES:a="Syncing pages will overwrite duplicate pages. Continue?";break;case o.REMOVE_PAGE:var l=e.getState(),i=l.page,u=i.pages,c=i.pageIndex,s=u[c];a='Are you sure you want to delete the page "'+s.name+'"?';break;case o.REMOVE_ELEMENT:var f=e.getState(),i=f.page,u=i.pages,c=i.pageIndex,d=i.elementIndex,s=u[c],p=s.elements[d];a=0===p.index?"Are you sure you want to reset the page? This will delete all rules and child elements":'Are you sure you want to delete the element "'+p.selector+'"?'}window.confirm(a)&&t(n)}}}}]);